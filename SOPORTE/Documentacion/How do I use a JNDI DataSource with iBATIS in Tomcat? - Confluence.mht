From: <Saved by UnMHT Ver.7.3.0.5>
Subject: How do I use a JNDI DataSource with iBATIS in Tomcat? - Confluence
Date: Wed, 28 Jan 2015 15:43:15 -0450
MIME-Version: 1.0
X-UnMHT-Save-State: Current-State
Content-Type: multipart/related;
	boundary="----=_Part_8ACADCFC_A9883FD4.14B322D279E";
	type="text/html"

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/pages/viewpage.action?pageId=12582997
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset="windows-1252"

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w=
3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html; charset=
=3Dwindows-1252">
<title>How do I use a JNDI DataSource with iBATIS in Tomcat? - Confluence</=
title>

<meta http-equiv=3D"Pragma" content=3D"no-cache">
<meta http-equiv=3D"Expires" content=3D"-1">
<script language=3D"javascript">
var contextPath =3D '/confluence/oss';
var i18n =3D [];
</script>

<link href=3D"http://www.apachebookstore.com/confluence/oss/s/811/1/1/_/sty=
les/main-action.css?spaceKey=3DIBATIS" rel=3D"stylesheet" type=3D"text/css">

<link href=3D"http://www.apachebookstore.com/confluence/oss/images/icons/fa=
vicon.ico" rel=3D"shortcut icon">
<link href=3D"http://www.apachebookstore.com/confluence/oss/images/icons/fa=
vicon.png" rel=3D"icon" type=3D"image/png">

<script src=3D"http://www.apachebookstore.com/confluence/oss/s/811/1/_/deco=
rators/effects.js" type=3D"text/javascript"></script>




<link href=3D"http://www.apachebookstore.com/confluence/oss/styles/main-act=
ion.css?pluginCompleteKey=3Dcom.atlassian.confluence.themes.leftnavigation%=
3Amain&amp;stylesheetName=3Dleftnav.css" rel=3D"stylesheet" type=3D"text/cs=
s">


<script type=3D"text/javascript">

function toggleMenu(menuId)
{
var visible =3D toggleVisibility(menuId);
if (visible)
setCookie("confluence.leftnav." + menuId, true);
else
setCookie("confluence.leftnav.", false);
}

function isMenuExpanded(menuId)
{
return getCookie("confluence.leftnav." + menuId);
}

function initMenuItem(menuId)
{
if (document.getElementById(menuId))
{
if (isMenuExpanded(menuId) =3D=3D 'true')
{
document.getElementById(menuId).style.display =3D "block";
}
else
{
document.getElementById(menuId).style.display =3D "none";
}
}
}
</script>

<base href=3D"http://www.apachebookstore.com/confluence/oss/pages/"></head>

<body onload=3D"placeFocus()">



<script type=3D"text/javascript">
function hideMessage(messageId)
{
var message =3D document.getElementById(messageId)
message.style.display =3D "none";
setCookie(messageId, true);
}
</script>




<div id=3D"PageContent">

 <div class=3D"topBar" id=3D"topBar" style=3D"height:2.2em;">
=20
  <div class=3D"topBarDiv" style=3D"float:left; margin-top:0.5em; white-spa=
ce: nowrap;">
  &#xa0;
  <script language=3D"JavaScript">
  function showBreadcrumbsEllipsis()
  {
  document.getElementById('breadcrumbsEllipsis').style.display =3D 'none';
  document.getElementById('breadcrumbsExpansion').style.display =3D 'inline=
';
  }
  </script>
 =20
  <a href=3D"http://www.apachebookstore.com/confluence/oss/dashboard.action=
">Dashboard</a>
  &gt;
 =20
  <a href=3D"http://www.apachebookstore.com/confluence/oss/display/IBATIS">=
iBATIS DataMapper</a> &gt;
 =20
 =20
 =20
 =20
 =20
  <a href=3D"http://www.apachebookstore.com/confluence/oss/display/IBATIS/H=
ome">Home</a>&#xa0;&gt;&#xa0;<a href=3D"http://www.apachebookstore.com/conf=
luence/oss/display/IBATIS/Frequently+Asked+Questions">Frequently Asked Ques=
tions</a>&#xa0;&gt;&#xa0;<a href=3D"http://www.apachebookstore.com/confluen=
ce/oss/pages/viewpage.action?pageId=3D12582997">How do I use a JNDI DataSou=
rce with iBATIS in Tomcat?</a>
 =20
  </div>
=20
  <div style=3D"float:right; white-space: nowrap;">
  <form action=3D"/confluence/oss/dosearchsite.action" method=3D"POST" name=
=3D"searchForm" style=3D"padding: 1px; margin: 1px">
  <input name=3D"qsrch" type=3D"hidden" value=3D"true">
 =20
  <input name=3D"searchQuery.spaceKey" type=3D"hidden" value=3D"conf_global=
">
  <input accesskey=3D"s" name=3D"searchQuery.queryString" size=3D"25" type=
=3D"text" value=3D"">
  <input type=3D"submit" value=3D"Search">
  </form>
  </div>
 </div>
<table cellpadding=3D"0" cellspacing=3D"0" style=3D"margin-top:0px;" width=
=3D"100%">
<tbody><tr>
<td class=3D"sbr" nowrap=3D"" valign=3D"top" width=3D"150px">

 <div class=3D"leftnav">
=20
  <div id=3D"logodiv">
  <a href=3D"http://www.apachebookstore.com/confluence/oss/display/IBATIS">=
<img align=3D"absmiddle" border=3D"0" src=3D"http://www.apachebookstore.com=
/confluence/oss/images/confluence_logo.gif"></a>					                      =
    </div>
=20
  <div id=3D"menu">
 =20
 =20
  <h5><a href=3D"#" onclick=3D"toggleMenu(&#x27;pagenav&#x27;); return fals=
e;"><img align=3D"absmiddle" border=3D"0" height=3D"16" src=3D"http://www.a=
pachebookstore.com/confluence/oss/images/icons/docs_16.gif" width=3D"16"> P=
age Operations</a></h5>
 =20
   <div class=3D"n_sub" id=3D"pagenav" style=3D"display:none;">
   <ul>
   <li><a accesskey=3D"v" class=3D"current" href=3D"http://www.apachebookst=
ore.com/confluence/oss/pages/viewpage.action?pageId=3D12582997" id=3D"vpl">=
View</a></li>
   <li><a accesskey=3D"i" href=3D"http://www.apachebookstore.com/confluence=
/oss/pages/pageinfo.action?pageId=3D12582997" id=3D"vpl"><u>I</u>nfo</a></l=
i>
   </ul>
   </div>
 =20
 =20
 =20
  <h5><a href=3D"#" onclick=3D"toggleMenu(&#x27;browsenav&#x27;); return fa=
lse;"><img align=3D"absmiddle" border=3D"0" height=3D"16" src=3D"http://www=
.apachebookstore.com/confluence/oss/images/icons/browse_space.gif" title=3D=
"Find Content" width=3D"16"> Browse Space</a></h5>
 =20
   <div class=3D"n_sub" id=3D"browsenav" style=3D"display:none;">
   <ul>
   <li><a href=3D"http://www.apachebookstore.com/confluence/oss/pages/listp=
ages.action?key=3DIBATIS">Pages</a></li>
   <li><a href=3D"http://www.apachebookstore.com/confluence/oss/labels/list=
labels-heatmap.action?key=3DIBATIS">Labels</a></li>
   <li><a href=3D"http://www.apachebookstore.com/confluence/oss/spaces/list=
attachmentsforspace.action?key=3DIBATIS">Attachments</a></li>
   <li><a href=3D"http://www.apachebookstore.com/confluence/oss/spaces/view=
mailarchive.action?key=3DIBATIS">Mail</a></li>
   <li><a href=3D"http://www.apachebookstore.com/confluence/oss/pages/viewr=
ecentblogposts.action?key=3DIBATIS">News</a></li>
   <li><a href=3D"http://www.apachebookstore.com/confluence/oss/spaces/usag=
e/report.action?key=3DIBATIS">Activity</a></li>
   <li><a href=3D"http://www.apachebookstore.com/confluence/oss/spaces/view=
spacesummary.action?key=3DIBATIS">Advanced</a></li>
   </ul>
   </div>
 =20
 =20
  </div>
 <script type=3D"text/javascript">
 initMenuItem("browsenav");
 initMenuItem("pagenav");
 initMenuItem("addcontent");
 </script>
 </div>

</td><td valign=3D"top" width=3D"100%">

<table cellpadding=3D"2" cellspacing=3D"0" width=3D"100%">
<tbody><tr>
<td colspan=3D"2" style=3D"background-color:#F0F0F0">

 <div>
=20
  <div style=3D"float:right; margin-right:5px;">
 =20
  <span class=3D"st" id=3D"userNavBar">
 =20
 =20
  <a href=3D"http://www.apachebookstore.com/confluence/oss/login.action?os_=
destination=3D%2Fpages%2Fviewpage.action%3FpageId%3D12582997">Log In</a>
 =20
  | <a href=3D"http://www.apachebookstore.com/confluence/oss/signup.action"=
>Sign Up</a>
  &#xa0;
  </span>
  <a href=3D"http://www.apachebookstore.com/confluence/oss/pages/viewpage.a=
ction?pageId=3D12582997&amp;decorator=3Dprintable"><img align=3D"absmiddle"=
 alt=3D"View a printable version of the current page." border=3D"0" height=
=3D"16" hspace=3D"1" src=3D"http://www.apachebookstore.com/confluence/oss/i=
mages/icons/print_16.gif" title=3D"View a printable version of the current =
page." vspace=3D"1" width=3D"16"></a>
 =20
 =20
  </div>
 </div>

 <div style=3D"float:left;">
 </div>


</td></tr><tr>
<td style=3D"border-left:1px solid #CCC; border-top:1px solid #CCC;" valign=
=3D"top" width=3D"100%">

 <div style=3D"margin-bottom:10px; margin-left:10px;">
=20
  <div style=3D"float:right; margin-right:5px;"></div>
=20
  <div class=3D"lslink" style=3D"margin-top: 5px; margin-bottom:5px">      =
      <a href=3D"http://www.apachebookstore.com/confluence/oss/display/IBAT=
IS">iBATIS DataMapper</a>    </div>
=20
  <div class=3D"p_t" style=3D"padding: 0px; margin-bottom:5px; margin-top: =
2px;">
  How do I use a JNDI DataSource with iBATIS in Tomcat?
  </div>
 </div>

 <div id=3D"content" style=3D"margin-left:10px;">
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
 <style>
 .imageLink{
 margin:2px;
 vertical-align: bottom;
 float:left;
 }
=20
 /*Overwritten styles in the main.css*/
 .greybox {
 border: 0px;
 border-top: 1px solid #ddd;
 border-bottom: 1px solid #ddd;
 background-color: #F0F0F0;
 padding: 3px;
 margin: 0;
 }
 </style>
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
  <div id=3D"pageInfoBar">
 =20
   <div class=3D"st">
   Added by     <a href=3D"http://www.apachebookstore.com/confluence/oss/di=
splay/~clamey@gmail.com">Chris Lamey</a>, last edited by     <a href=3D"htt=
p://www.apachebookstore.com/confluence/oss/display/~clamey@gmail.com">Chris=
 Lamey</a> on Sep 27, 2007
   &#xa0;(<a href=3D"http://www.apachebookstore.com/confluence/oss/pages/di=
ffpages.action?pageId=3D12582997&amp;originalId=3D12583002">view change</a>)
  =20
  =20
  =20
   <style type=3D"text/css">
   div.auto_complete {
   width: 350px;
   background: #fff;
   }
  =20
   div.auto_complete ul {
   border: 1px solid #888;
   margin: 0;
   padding: 0;
   width: 100%;
   list-style-type: none;
   }
  =20
   div.auto_complete ul li {
   margin: 0;
   padding: 3px;
   }
  =20
   div.auto_complete ul li.selected {
   background-color: #ffb;
   }
  =20
   div.auto_complete ul strong.highlight {
   color: #800;
   margin: 0;
   padding: 0;
   }
   </style>
  =20
  =20
  =20
  =20
   <script language=3D"JavaScript" type=3D"text/javascript">
   function doAddLabel(hideTextfieldAfterAddParam)
   {
   // stub
   }
  =20
   function onAddLabel()
   {
   // stub
   }
  =20
   function showLabelsInput()
   {
   // stub
   }
   </script>
  =20
  =20
  =20
  =20
   <span class=3D"error"><span class=3D"errorMessage" id=3D"errorSpan"></sp=
an></span>
   <form action=3D"" method=3D"" name=3D"addLabelForm" onsubmit=3D"doAddLab=
el(false); return false;" style=3D"margin: 0px; padding: 0px">
  =20
    <div style=3D"float: left">Labels:&#xa0;</div>
  =20
    <div id=3D"labelsInfo" style=3D"float: left; width: 90%">
    <span id=3D"labelsList">
    (None)
    </span>
    </div>
   <br clear=3D"all">
  =20
    <div id=3D"labelInputSpan" style=3D"display: none; clear: both;">
    <br>
   =20
     <div style=3D"border: 1px solid #cccccc; padding: 8px; align: center; =
background-color: #f0f0f0">
    =20
    =20
      <div id=3D"labelOperationErrorContainer" style=3D"display: none"><spa=
n class=3D"error"><span class=3D"errorMessage" id=3D"labelOperationErrorMes=
sage"></span></span></div>
    =20
     <table width=3D"100%">
     <tbody><tr>
     <td>
    =20
      <div class=3D"formtitle" style=3D"padding-bottom: 3px; font-size: 13p=
x;">Add Labels</div>
    =20
     </td><td align=3D"right">
      <div id=3D"waitImageAndStatus" style=3D"display: none; height: 16px;"=
><img align=3D"absmiddle" alt=3D"Wait Image" border=3D"0" src=3D"http://www=
.apachebookstore.com/confluence/oss/images/icons/wait.gif">&#xa0;<span clas=
s=3D"st" id=3D"labelOperationStatus" style=3D"vertical-align: middle"></spa=
n></div>
    =20
     </td></tr><tr><td width=3D"50%">
     Enter labels to add to this page:<br>
     <input autocomplete=3D"off" class=3D"monospaceInput" id=3D"labelName" =
name=3D"labelsString" size=3D"40" type=3D"text" value=3D"">
     <input onclick=3D"doAddLabel(false); return false;" type=3D"submit" va=
lue=3D"Add"><input onclick=3D"doAddLabel(true); return false;" type=3D"butt=
on" value=3D"Done">
    =20
      <div class=3D"auto_complete" id=3D"labelsAutocompleteList" style=3D"d=
isplay: none;"></div>
    =20
      <div class=3D"st">
      <em>Tip:</em> Looking for a label? Just start typing.
      </div>
    =20
     </td><td valign=3D"top" width=3D"50%">
    =20
      <div id=3D"suggestedLabelsSpan"></div>
    =20
     </td></tr></tbody></table>
     </div>
    </div>
   </form>
   <script type=3D"text/javascript">
   // if there is javascript support, enable the [Edit] link that enables A=
JAX label adding/removing functionality
   if (document.getElementById('editLabelsLink'))
   {
   document.getElementById('editLabelsLink').style.display =3D 'inline';
   }
   </script>
   </div>
  </div>
 <br clear=3D"all">
=20
=20
=20
  <div class=3D"wiki-content" style=3D"margin-right:10px;">
 =20
  <p>This breaks down into two logical parts.  First you have to declare th=
e<br>
  DataSource in JNDI in Tomcat.  Then you have to tell iBATIS to use that<b=
r>
  object via its JNDI name.</p>
 =20
  <p>Putting a DataSource into JNDI in Tomcat depends on the version of Tom=
cat<br>
  you have.  We&#x27;ll use Tomcat 5.5 as an example here.  Take a look at =
the<br>
  Tomcat docs for specifics on your version or more details in general.</p>
 =20
  <p>You declare JNDI DataSource objects in Tomcat using the Resource xml<b=
r>
  element.  Here&#x27;s an example:</p>
 =20
 =20
   <div class=3D"code" style=3D"border-style: solid; ">
    <div class=3D"codeContent">
    <pre class=3D"code-xml">&lt;Resource name=3D<span class=3D"code-quote">=
&quot;jdbc/AS400B&quot;</span>
    type=3D<span class=3D"code-quote">&quot;javax.sql.DataSource&quot;</spa=
n>
    password=3D<span class=3D"code-quote">&quot;password&quot;</span>
    driverClassName=3D<span class=3D"code-quote">&quot;com.ibm.as400.access=
.AS400JDBCDriver&quot;</span>
    maxIdle=3D<span class=3D"code-quote">&quot;2&quot;</span>
    maxWait=3D<span class=3D"code-quote">&quot;5000&quot;</span>
    validationQuery=3D<span class=3D"code-quote">&quot;select * from PODATA=
&quot;</span>
    username=3D<span class=3D"code-quote">&quot;userid&quot;</span>
    url=3D<span class=3D"code-quote">&quot;jdbc:as400:AS400B/RPTSTEXTDB;nam=
ing=3Dsystem;date format=3Diso;time format=3Dhms;prompt=3Dfalse&quot;</span>
    maxActive=3D<span class=3D"code-quote">&quot;4&quot;</span>/&gt;</pre>
    </div></div>
  <p>The Resource element either goes in your global JNDI context or in a w=
ebapp<br>
  specific context.  To put it in your global JNDI context, put your<br>
  DataSource Resource element as a child of the GlobalNamingResources eleme=
nt<br>
  in conf/server.xml.  If you put it in the global JNDI context, you need t=
o<br>
  use a ResourceLink in either your webapp&#x27;s context or in the<br>
  conf/context.xml (which is shared by all webapps).</p>
 =20
  <p>Here&#x27;s a ResourceLink<br>
  example:</p>
 =20
 =20
   <div class=3D"code" style=3D"border-style: solid; ">
    <div class=3D"codeContent">
    <pre class=3D"code-xml"><span class=3D"code-tag">&lt;ResourceLink name=
=3D<span class=3D"code-quote">&quot;jdbc/AS400B&quot;</span> global=3D<span=
 class=3D"code-quote">&quot;jdbc/AS400B&quot;</span> type=3D<span class=3D"=
code-quote">&quot;javax.sql.DataSource&quot;</span>/&gt;</span></pre>
    </div></div>
 =20
  <p>To put it in a webapp specific context depends on how your webapps are=
 set<br>
  up. If you have a context file for your webapp, you can put the Resource =
as<br>
  a child of the Context element.  If you don&#x27;t have a context file fo=
r you<br>
  webapp, you can put the Resource element as a child of the webapp&#x27;s =
Context<br>
  element in conf/server.xml.</p>
 =20
  <p>Another place for the Resource element could be in the conf/context.xm=
l<br>
  file, which is shared by all webapps.</p>
 =20
  <p>Once the DataSource is bound in JNDI, you need to tell iBATIS to use i=
t.<br>
  NOTE: that Tomcat helpfully prepends the string &quot;java:/comp/env/&quo=
t; to your<br>
  names, which is needed to do the lookups.</p>
 =20
  <p>If you&#x27;re using the iBATIS sqlmap xml config files, you need this=
:</p>
 =20
 =20
   <div class=3D"code" style=3D"border-style: solid; ">
    <div class=3D"codeContent">
    <pre class=3D"code-xml"><span class=3D"code-tag">&lt;transactionManager=
 type=3D<span class=3D"code-quote">&quot;JDBC&quot;</span>&gt;</span>
    <span class=3D"code-tag">&lt;dataSource type=3D<span class=3D"code-quot=
e">&quot;JNDI&quot;</span>&gt;</span>
    <span class=3D"code-tag">&lt;property name=3D<span class=3D"code-quote"=
>&quot;DataSource&quot;</span> value=3D<span class=3D"code-quote">&quot;jav=
a:/comp/env/jdbc/AS400B&quot;</span>/&gt;</span>
    <span class=3D"code-tag">&lt;/dataSource&gt;</span>
    <span class=3D"code-tag">&lt;/transactionManager&gt;</span></pre>
    </div></div>
 =20
  <p>If you&#x27;re using Spring, you need to reference the JNDI DataSource=
 object as<br>
  a JndiObjectFactoryBean and then set that as the DataSource on your<br>
  SqlMapClientFactoryBean.  Here&#x27;s an example:</p>
 =20
 =20
   <div class=3D"code" style=3D"border-style: solid; ">
    <div class=3D"codeContent">
    <pre class=3D"code-xml"><span class=3D"code-tag">&lt;bean id=3D<span cl=
ass=3D"code-quote">&quot;dataSource&quot;</span> class=3D<span class=3D"cod=
e-quote">&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;</span>&=
gt;</span>
    <span class=3D"code-tag">&lt;property name=3D<span class=3D"code-quote"=
>&quot;jndiName&quot;</span>&gt;</span>
    <span class=3D"code-tag">&lt;value&gt;</span>java:/comp/env/jdbc/AS400B=
<span class=3D"code-tag">&lt;/value&gt;</span>
    <span class=3D"code-tag">&lt;/property&gt;</span>
    <span class=3D"code-tag">&lt;/bean&gt;</span>
   =20
    <span class=3D"code-tag">&lt;bean id=3D<span class=3D"code-quote">&quot=
;sqlMapClient&quot;</span> class=3D<span class=3D"code-quote">&quot;org.spr=
ingframework.orm.ibatis.SqlMapClientFactoryBean&quot;</span>&gt;</span>
    <span class=3D"code-tag">&lt;property name=3D<span class=3D"code-quote"=
>&quot;configLocation&quot;</span> value=3D<span class=3D"code-quote">&quot=
;classpath:sqlmap-config.xml&quot;</span>/&gt;</span>
    <span class=3D"code-tag">&lt;property name=3D<span class=3D"code-quote"=
>&quot;dataSource&quot;</span> ref=3D<span class=3D"code-quote">&quot;dataS=
ource&quot;</span>/&gt;</span>
    <span class=3D"code-tag">&lt;/bean&gt;</span></pre>
    </div></div>
  </div>
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
=20
  <div class=3D"wiki-content" style=3D"margin-right:10px;">
  <br></div></div></td></tr></tbody></table>


</td></tr></tbody></table>
</div>

<div class=3D"license license-opensource">
Site running on a free <b>Atlassian Confluence Open Source Project License<=
/b> granted to OSS. <a href=3D"http://www.atlassian.com/c/conf/11461" rel=
=3D"nofollow">Evaluate Confluence today</a>.<br>
</div>

<div class=3D"bottomshadow"></div>

<div class=3D"st" id=3D"poweredby">
Powered by <a class=3D"st" href=3D"http://www.atlassian.com/wiki/?clicked=
=3Dfooter" rel=3D"nofollow">Atlassian Confluence</a>, the <a class=3D"st" h=
ref=3D"http://www.atlassian.com/wiki/?clicked=3Dfooter" rel=3D"nofollow">En=
terprise Wiki</a>. (Version: 2.5.5 Build:#811 Jul 25, 2007)
-
<a class=3D"st" href=3D"http://jira.atlassian.com/secure/BrowseProject.jspa=
?id=3D10470" rel=3D"nofollow">Bug/feature request</a>
-
<a href=3D"http://www.apachebookstore.com/confluence/oss/administrators.act=
ion">Contact Administrators</a>
<br>
</div>


<span style=3D"display: none">
<script language=3D"JavaScript" type=3D"text/javascript">var domainName =3D=
 'http://opensource.atlassian.com/confluence/oss'; var entityId =3D '125829=
97'; var spaceKey =3D 'IBATIS'</script>
<script language=3D"JavaScript" src=3D"http://www.apachebookstore.com/confl=
uence/oss/s/811/1/_/labels-javascript" type=3D"text/javascript"></script>
<script>new Ajax.Autocompleter('labelName', 'labelsAutocompleteList', '1258=
2997', { tokens: new Array(',', ' '), dwrFunction: GenerateAutocompleteLabe=
lsListForEntity.autocompleteLabels});</script>
</span>



</body></html>
------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/s/811/1/1/_/styles/main-action.css?spaceKey=IBATIS
Content-Transfer-Encoding: quoted-printable
Content-Type: text/css


body, p, td, table, tr, .bodytext, .stepfield {
font-family: Verdana, arial, sans-serif;
font-size: 11px;
line-height: 16px;
color: #000000;
font-weight: normal;
}
#PageContent {
text-align: left;
background-color: #fff;
padding: 0px;
margin: 0px;
padding-bottom:20px;
}
body {
margin: 0px;
padding: 0px;
text-align: center;
background-color: #f0f0f0;
}

@media print {

body {
background-color: #fff;
}

}

.monospaceInput {
font:12px monospace
}

.wiki-content p, .cmbl p {
margin: 16px 0px 16px 0px;
padding: 0px;
}

.wiki-content-preview {
padding: 5px;
border-left: 1px solid #3c78b5;
border-right: 1px solid #3c78b5;
}

ul, ol {
margin-top: 2px;
margin-bottom: 2px;
padding-top: 0px;
padding-bottom: 0px;
}

pre {
padding: 0px;
margin-top: 5px;
margin-left: 15px;
margin-bottom: 5px;
margin-right: 5px;
text-align: left;
overflow: auto;
}

.helpheading {
font-weight: bold;
background-color: #D0D9BD;
border-bottom: 1px solid #3c78b5;
padding: 4px 4px 4px 4px;
margin: 0px;
margin-top: 10px;
}
.helpcontent {
padding: 4px 4px 20px 4px;
background-color: #f5f7f1;
}

.code {
border: 1px dashed #3c78b5;
font-size: 11px;
font-family: Courier;
margin: 10px;
line-height: 13px;
overflow: auto;
}

.focusedComment {
background: #ffffce;
}

.cmb, .focusedComment {
padding: 10px;
margin: 5px 0 5px 0;
border: 1px #bbb solid;
overflow: auto;
}

.codeHeader {
background-color: #f0f0f0;
border-bottom: 1px dashed #3c78b5;
padding: 3px;
text-align: center;
}

.codeContent {
text-align: left;
background-color: #f0f0f0;
padding: 3px;
}

.preformatted {
border: 1px dashed #3c78b5;
font-size: 11px;
font-family: Courier;
margin: 10px;
line-height: 13px;
}

.preformattedHeader {
background-color: #f0f0f0;
border-bottom: 1px dashed #3c78b5;
padding: 3px;
text-align: center;
}

.preformattedContent {
background-color: #f0f0f0;
padding: 3px;
}

.panel {
border: 1px dashed #3c78b5;
margin: 10px;
margin-top: 0px;
}

.panelHeader {
background-color: #f0f0f0;
border-bottom: 1px dashed #3c78b5;
padding: 3px;
text-align: center;
}

.panelContent {
background-color: #f0f0f0;
padding: 5px;
}

.anonymousAlert {
background-color: #f0f0f0;
border: 1px dashed red;
font-size: 11px;
padding: 10px 5px 10px 5px;
margin: 4px;
line-height: 13px;
}

.lockAlert {
background-color: #f0f0f0;
width: 50%;
border: 1px dashed red;
font-size: 11px;
padding: 10px 5px 10px 5px;
margin: 4px;
line-height: 13px;
}


.code-keyword {
color: #000091;
background-color: inherit;
}

.code-object {
color: #910091;
background-color: inherit;
}

.code-quote {
color: #009100;
background-color: inherit;
}

.code-comment {
color: #808080;
background-color: inherit;
}


.code-xml .code-keyword {
color: inherit;
font-weight: bold;
}

.code-tag {
color: #000091;
background-color: inherit;
}

.breadcrumbs {
background-color: #f0f0f0;
border-color: #3c78b5;
border-width: 1px 0px 1px 0px;
border-style: solid;
font-size: 11px;
padding: 3px 0px 3px 0px;
}

.navmenu {
border: 1px solid #ccc;
}

.menuheading {
font-weight: bold;
background-color: #f0f0f0;
border-bottom: 1px solid #3c78b5;
padding: 4px 4px 2px 4px;
}

.menuitems {
padding: 4px 4px 20px 4px;
}

.rightpanel {
border-left: 1px solid #ccc;
border-bottom: 1px solid #ccc;
}

#helpheading {
text-align: left;
font-weight: bold;
background-color: #D0D9BD;
border-bottom: 1px solid #3c78b5;
padding: 4px 4px 4px 4px;
margin: 0px;
}
#helpcontent {
padding: 4px 4px 4px 4px;
background-color: #f5f7f1;
}
.helptab-unselected {
font-weight: bold;
padding: 5px;
background-color: #f5f7f1;
}
.helptab-selected {
font-weight: bold;
background-color: #D0D9BD;
padding: 5px;
}
.helptabs {
margin: 0px;
background-color: #f5f7f1;
padding: 5px;
}
.infopanel-heading {
font-weight: bold;
padding: 4px 0px 2px 0px;
}

#profileSummary h3 {
font-weight: bold;
font-size: 8pt;
margin: 1em 0 .5em 0;
padding: 0;
}
#profileSummary ul {
list-style-type: none;
margin: 0;
padding: 0;
}

.pagebody {
}

.pageheader {
padding: 5px 5px 5px 0px;
border-bottom: 1px solid #3c78b5;
}

.p_t {
font-size: 22px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
}

.newp_t {
color: #ccc !important;
}

.steptitle {
font-size: 18px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
margin-bottom: 7px;
}

.substeptitle {
font-size: 12px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
margin: 2px 4px 4px 4px;
padding: 2px 4px 1px 4px;
}

.stepdesc {
font-family: Verdana, arial, sans-serif;
font-size: 11px;
line-height: 16px;
font-weight: normal;
color: #666666;
margin-top: 7px;
margin-bottom: 7px;
}

.steplabel {
font-weight: bold;
margin-right: 4px;
color: black;
float: left;
width: 15%;
text-align: right;
}

.stepfield {
background: #f0f0f0;
padding: 5px;
}

.submitButtons{
margin-top:5px;
text-align:right;
}

.formtitle {
font-size: 12px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
}

.sectionbottom {
border-bottom: 1px solid #3c78b5;
}

.topRow {
border-top: 2px solid #3c78b5;
}

.tabletitle {
font-size: 14px;
font-weight: bold;
font-family: Arial, sans-serif;
padding: 3px 0px 2px 0px;
margin: 8px 4px 2px 0px;
color: #003366;
border-bottom: 2px solid #3c78b5;
}
.pagesubheading {
color: #666666;
font-size: 10px;
padding: 0px 0px 5px 0px;
}

HR {
color: 3c78b5;
height: 1;
}

A:link, A:visited, A:active, A:hover {
color: #003366;
}

h1 A:link, h1 A:visited, h1 A:active {
text-decoration: none;
}

h1 A:hover {
border-bottom: 1px dotted #003366;
}

.wiki-content > :first-child, .cmbl > :first-child {
margin-top: 3px;
}

.logocell {
padding: 10px;
}

input {
font-family: verdana, geneva, arial, sans-serif;
font-size: 11px;
color: #000000;
}

textarea, textarea.editor {
font-family: verdana, geneva, arial, sans-serif;
font-size: 11px;
color: #333333;
}

/* use lslink instead.
.spacenametitle {
font: 21px/31px Impact, Arial, Helvetica;
font-weight: 100;
color: #999999;
margin: 0px;
}
.spacenametitle img {
margin: 0 0 -4px 0;
}
.spacenametitle a {
text-decoration: none;
color: #999999;
}
.spacenametitle a:visited {
text-decoration: none;
color: #999999;
}*/

.spacenametitle-printable {
font: 20px/25px Impact, Arial, Helvetica;
font-weight: 100;
color: #999999;
margin: 0px;
}
.spacenametitle-printable a {
text-decoration: none;
color: #999999;
}
.spacenametitle-printable a:visited {
text-decoration: none;
color: #999999;
}

.blogDate {
font-weight: bold;
text-decoration: none;
color: black;
}

.blogSurtitle {
background: #f0f0f0;
border: 1px solid #ddd;
padding: 3px;
margin: 1px 1px 10px 1px;
}

.blogHeading {
font-size: 20px;
line-height: normal;
font-weight: bold;
padding: 0px;
margin: 0px;
}

.blogHeading a {
text-decoration: none;
color: black;
}

.blogHeading a:hover {
text-decoration: underline;
}

.endsection {
align: right;
color: #666666;
margin-top: 10px;
}
.endsectionleftnav {
align: right;
color: #666666;
margin-top: 10px;
}

h1 {
font-size: 24px;
line-height: normal;
font-weight: bold;
background-color: #f0f0f0;
color: #003366;
border-bottom: 1px solid #3c78b5;
padding: 2px;
margin: 36px 0px 4px 0px;
}

h2 {
font-size: 18px;
line-height: normal;
font-weight: bold;
background-color: #f0f0f0;
border-bottom: 1px solid #3c78b5;
padding: 2px;
margin: 27px 0px 4px 0px;
}

h3 {
font-size: 14px;
line-height: normal;
font-weight: bold;
background-color: #f0f0f0;
padding: 2px;
margin: 21px 0px 4px 0px;
}

h4 {
font-size: 12px;
line-height: normal;
font-weight: bold;
background-color: #f0f0f0;
padding: 2px;
margin: 18px 0px 4px 0px;
}

h4.search {
font-size: 12px;
line-height: normal;
font-weight: normal;
background-color: #f0f0f0;
padding: 4px;
margin: 18px 0px 4px 0px;
}

h5 {
font-size: 10px;
line-height: normal;
font-weight: bold;
background-color: #f0f0f0;
padding: 2px;
margin: 14px 0px 4px 0px;
}

h6 {
font-size: 8px;
line-height: normal;
font-weight: bold;
background-color: #f0f0f0;
padding: 2px;
margin: 14px 0px 4px 0px;
}

.smft {
font-size: 10px;
}
.descfont {
font-size: 10px;
color: #666666;
}
.smallerfont {
font-size: 9px;
}
.st {
color: #666666;
font-size: 10px;
}
.st a {
color: #666666;
}
.greyText
{
color: #666666;
}
.st-blue {
color: #3c78b5;
font-size: 10px;
}
.surtitle {
margin-left: 1px;
margin-bottom: 5px;
font-size: 14px;
color: #666666;
}

/* css hack found here:  http://www.fo3nix.pwp.blueyonder.co.uk/tutorials/c=
ss/hacks/ */
.navItemOver { font-size: 10px; font-weight: bold; color: #ffffff; backgrou=
nd-color: #003366; cursor: hand; voice-family: '\'}\''; voice-family:inheri=
t; cursor: pointer;}
.navItemOver a { color: #ffffff; background-color:#003366; text-decoration:=
 none; }
.navItemOver a:visited { color: #ffffff; background-color:#003366; text-dec=
oration: none; }
.navItemOver a:hover { color: #ffffff; background-color:#003366; text-decor=
ation: none; }
.navItem { font-size: 10px; font-weight: bold; color: #ffffff; background-c=
olor: #3c78b5; }
.navItem a { color: #ffffff; text-decoration: none; }
.navItem a:hover { color: #ffffff; text-decoration: none; }
.navItem a:visited { color: #ffffff; text-decoration: none; }

div.padded { padding: 4px; }
div.thickPadded { padding: 10px; }
h3.macrolibrariestitle {
margin: 0px 0px 0px 0px;
}

div.centered { text-align: center; margin: 10px; }
div.centered table {margin: 0px auto; text-align: left; }

.tableview table {
margin: 0;
}

.tableview th {
text-align: left;
color: #003366;
font-size: 12px;
padding: 5px 0px 0px 5px;
border-bottom: 2px solid #3c78b5;
}
.tableview td {
text-align: left;
border-color: #ccc;
border-width: 0px 0px 1px 0px;
border-style: solid;
margin: 0;
padding: 4px 10px 4px 5px;
}

.grid {
margin: 2px 0px 5px 0px;
border-collapse: collapse;
}
.grid th  {
border: 1px solid #ccc;
padding: 2px 4px 2px 4px;
background: #f0f0f0;
text-align: center;
}
.grid td  {
border: 1px solid #ccc;
padding: 3px 4px 3px 4px;
}
.gridHover {
background-color: #f9f9f9;
}

td.infocell {
background-color: #f0f0f0;
}
.label {
font-weight: bold;
color: #003366;
}

label {
font-weight: bold;
color: #003366;
}

.error {
background-color: #fcc;
}

.errorBox {
background-color: #fcc;
border: 1px solid #c00;
padding: 5px;
margin-top:5px;
margin-bottom:5px;
}

.errorMessage {
color: #c00;
}

.success {
background-color: #dfd;
}

.successBox {
background-color: #dfd;
border: 1px solid #090;
padding: 5px;
margin-top:5px;
margin-bottom:5px;
}

blockquote {
padding-left: 10px;
padding-right: 10px;
margin-left: 5px;
margin-right: 0px;
border-left: 1px solid #3c78b5;
}

table.t_conf, table.admin
{
margin: 5px;
border-collapse: collapse;
}

td.conftd, table.t_conf td.conftd, table.admin td
{
border-width: 1px;
border-style: solid;
border-color: #ccc;
padding: 3px 4px 3px 4px;
vertical-align: top;
}

th.confluenceTh, table.t_conf th.confluenceTh, table.admin th
{
border-width: 1px;
border-style: solid;
border-color: #ccc;
padding: 3px 4px 3px 4px;
background-color: #f0f0f0;
text-align: center;
vertical-align: top;
}

table.admin
{
width: 100%;
}
table.admin td, table.admin th
{
width: 50%;
}
table.admin th
{
text-align: right;
font-weight: bold;
}
table.admin td.controls
{
text-align: center;
}

DIV.small {
font-size: 9px;
}

H1.pagename {
margin-top: 0px;
}

IMG.inline  {}

.loginform {
margin: 5px;
border: 1px solid #ccc;
}

/* The text how the "This is a preview" comment should be shown. */
.previewnote { text-align: center;
font-size: 11px;
color: red; }

/* How the preview content should be shown */
.previewcontent { background: #E0E0E0; }

/* How the system messages should be shown (DisplayMessage.jsp) */
.messagecontent { background: #E0E0E0; }

/* How the "This page has been modified..." -comment should be shown. */
.conflictnote { }

.createlink {
color: maroon;
}
a.createlink {
color: maroon;
}
.templateparameter {
font-size: 9px;
color: darkblue;
}

.diffadded {
background: #ddffdd;
padding: 1px 1px 1px 4px;
border-left: 4px solid darkgreen;
}
.diffdeleted {
color: #999;
background: #ffdddd;
padding: 1px 1px 1px 4px;
border-left: 4px solid darkred;
}
.diffnochange {
padding: 1px 1px 1px 4px;
border-left: 4px solid lightgrey;
}
.differror {
background: brown;
}
.diff {
font-family: lucida console, courier new, fixed-width;
font-size: 12px;
line-height: 14px;
}
.diffaddedchars {
background-color:#99ff99;
font-weight:bolder;
}
.diffremovedchars {
background-color:#ff9999;
text-decoration: line-through;
font-weight:bolder;
}

.greybackground {
background: #f0f0f0
}

.greybox {
border: 1px solid #ddd;
padding: 3px;
margin: 1px 1px 10px 1px;
}

.borderedGreyBox {
border: 1px solid #cccccc;
background-color: #f0f0f0;
padding: 10px;
}

.greyboxfilled {
border: 1px solid #ddd;
background: #f0f0f0;
padding: 3px;
margin: 1px 1px 10px 1px;
}

.lightGreyBox
{
background: #fafafa;
}

.navBackgroundBox {
padding: 5px 5px 5px 5px;
font-size: 22px;
font-weight: bold;
font-family: Arial, sans-serif;
color: white;
background: #3c78b5;
text-decoration: none;
}

.previewBoxTop {
background-color: #f0f0f0;
border-width: 1px 1px 0px 1px;
border-style: solid;
border-color: #3c78b5;
padding: 5px;
margin: 5px 0px 0px 0px;
text-align: center;
}
.previewContent {
background-color: #fff;
border-color: #3c78b5;
border-width: 0px 1px 0px 1px;
border-style: solid;
padding: 10px;
margin: 0px;
}
.previewBoxBottom {
background-color: #f0f0f0;
border-width: 0px 1px 1px 1px;
border-style: solid;
border-color: #3c78b5;
padding: 5px;
margin: 0px 0px 5px 0px;
text-align: center;
}

.functionbox {
background-color: #f0f0f0;
border: 1px solid #3c78b5;
padding: 3px;
margin: 1px 1px 10px 1px;
}

.functionbox-greyborder {
background-color: #f0f0f0;
border: 1px solid #ddd;
padding: 3px;
margin: 1px 1px 10px 1px;
}

.search-highlight {
background-color: #ffffcc;
}

/* normal (white) background */
.rowNormal {
background-color: #ffffff;
}

/* alternate (pale yellow) background */
.rowAlternate {
background-color: #f7f7f7;
}

/* used in the list attachments table */
.rowAlternateNoBottomColor {
background-color: #f7f7f7;
}

.rowAlternateNoBottomNoColor {
}

.rowAlternateNoBottomColor td {
border-bottom: 0px;
}

.rowAlternateNoBottomNoColor td {
border-bottom: 0px;
}

/* row highlight (grey) background */
.rowHighlight {
background-color: #f0f0f0;

}

TD.greenbar {FONT-SIZE: 2px; BACKGROUND: #00df00; BORDER: 1px solid #9c9c9c=
; PADDING: 0px; }
TD.graybar {FONT-SIZE: 2px; BACKGROUND: #808080; BORDER: 1px solid #9c9c9c;=
 PADDING: 0px; }
TD.redbar {FONT-SIZE: 2px; BACKGROUND: #df0000; BORDER: 1px solid #9c9c9c; =
PADDING: 0px; }
TD.darkredbar {FONT-SIZE: 2px; BACKGROUND: #af0000; BORDER: 1px solid #9c9c=
9c; PADDING: 0px; }

TR.testpassed {FONT-SIZE: 2px; BACKGROUND: #ddffdd; PADDING: 0px; }
TR.testfailed {FONT-SIZE: 2px; BACKGROUND: #ffdddd; PADDING: 0px; }

.toolbar  {
margin: 0px;
border-collapse: collapse;
}

.toolbar td  {
border: 1px solid #ccc;
padding: 2px 2px 2px 2px;
color: #ccc;
}

td.noformatting {
border-width: 0px;
border-style: none;
text-align: center;
padding: 0px;
}

.cmbl {
margin: 12px 0 12px 0;
}

/*
* Divs displaying the license information, if necessary.
*/
.license {
border-top: 1px solid #bbbbbb;
text-align: center;
font-size: 10px;
font-family: Verdana, Arial, Helvetica, sans-serif;
background-color: lightyellow;
}

.license-eval, .license-none {
background-color: #ffcccc;
}

.license-eval b, .license-none b {
color: #990000;
}

.license-nonprofit {
background-color: #ffffff;
}

/*
* The shadow at the bottom of the page between the main content and the
* "powered by" section.
*/
.bottomshadow {
height: 12px;
background-image: url("/confluence/oss/images/border/border_bottom.gif");
background-repeat: repeat-x;
}

/*
* Styling of the operations box
*/
.navmenu .operations li, .navmenu .operations ul {
list-style: none;
margin-left: 0;
padding-left: 0;
}

.navmenu .operations ul {
margin-bottom: 9px;
}

.navmenu .label {
font-weight: inherit;
}

/*
* Styling of ops as a toolbar
*/
.toolbar div {
display: none;
}

.toolbar .label {
display: none;
}

.toolbar .operations {
display: block;
}

.toolbar .operations ul {
display: inline;
list-style: none;
margin-left: 10px;
padding-left: 0;
}

.toolbar .operations li {
list-style: none;
display: inline;
}

/* list page navigational tabs */
#foldertab {
padding: 3px 0px 3px 8px;
margin-left: 0;
border-bottom: 1px solid #3c78b5;
font: bold 11px Verdana, sans-serif;
}

#foldertab li {
list-style: none;
margin: 0;
display: inline;
}

#foldertab li a {
padding: 3px 0.5em;
margin-left: 3px;
border: 1px solid #3c78b5;
border-bottom: none;
background: #3c78b5;
text-decoration: none;
}

#foldertab li a:link { color: #ffffff; }
#foldertab li a:visited { color: #ffffff; }

#foldertab li a:hover {
color: #ffffff;
background: #003366;
border-color: #003366;
}

#foldertab li a.current {
background: white;
border-bottom: 1px solid white;
color: black;
}

#foldertab li a.current:link { color: black; }
#foldertab li a.current:visited { color: black; }
#foldertab li a.current:hover {
background: white;
border-bottom: 1px solid white;
color: black;
}

.foldertab-box { border-left: 1px solid #3c78b5; border-right: 1px solid #3=
c78b5; border-bottom: 1px solid #3c78b5; padding: 8px }

/* alphabet list */
ul#squaretab {
margin-left: 0;
padding-left: 0;
white-space: nowrap;
font: bold 8px Verdana, sans-serif;
}

#squaretab li {
display: inline;
list-style-type: none;
}

#squaretab a {
padding: 2px 6px;
border: 1px solid #3c78b5;
}

#squaretab a:link, #squaretab a:visited {
color: #fff;
background-color: #3c78b5;
text-decoration: none;
}

#squaretab a:hover {
color: #ffffff;
background-color: #003366;
border-color: #003366;
text-decoration: none;
}

#squaretab li a#current {
background: white;
color: black;
}

.blogcalendar * {
font-family:verdana, arial, sans-serif;
font-size:x-small;
font-weight:normal;
line-height:140%;
padding:2px;
}


table.blogcalendar {
border: 1px solid #3c78b5;
}

.blogcalendar th.calendarhead, a.calendarhead {
font-size:x-small;
font-weight:bold;
padding:2px;
text-transform:uppercase;
background-color: #3c78b5;
color: #ffffff;
letter-spacing: .3em;
text-transform: uppercase;
}

.calendarhead:visited {color: white;}
.calendarhead:active {color: white;}
.calendarhead:hover {color: white;}

.blogcalendar th {
font-size:x-small;
font-weight:bold;
padding:2px;
background-color:#f0f0f0;
}

.blogcalendar td {
font-size:x-small;
font-weight:normal;
}

.searchGroup { padding: 0 0 10px 0; background: #f0f0f0; }
.searchGroupHeading { font-size: 10px; font-weight: bold; color: #ffffff; b=
ackground-color: #3c78b5; padding: 2px 4px 1px 4px; }
.searchItem { padding: 1px 4px 1px 4px; }
.searchItemSelected { padding: 1px 4px 1px 4px; font-weight: bold; backgrou=
nd: #ddd; }

/* permissions page styles */
.permissionHeading {
border-bottom: #bbb; border-width: 0 0 1px 0; border-style: solid; font-siz=
e: 16px; text-align: left;
}
.permissionTab {
border-width: 0 0 0 1px; border-style: solid; background: #3c78b5; color: #=
ffffff; font-size: 10px;
}
.permissionSuperTab {
border-width: 0 0 0 1px; border-style: solid; background: #003366; color: #=
ffffff;
}
.permissionCell {
border-left: #bbb; border-width: 0 0 0 1px; border-style: solid;
}

/* warning panel */
.warningPanel { background: #FFFFCE; border:#F0C000 1px solid; padding: 8px=
; margin: 10px; }
/* alert panel */
.alertPanel { background: #FFCCCC; border:#C00 1px solid; padding: 8px; mar=
gin: 10px; }
/* info panel */
.infoPanel { background: #D8E4F1; border:#3c78b5 1px solid; padding: 8px; m=
argin: 10px; }

/* side menu highlighting (e.g. space content screen) */
.optionPadded { padding: 2px; }
.optionSelected { background-color: #ffffcc; padding: 2px; border: 1px soli=
d #ddd; margin: -1px; }
.optionSelected a { font-weight: bold; text-decoration: none; color: black;=
 }

/* information macros */
.noteMacro { border-style: solid; border-width: 1px; border-color: #F0C000;=
 background-color: #FFFFCE; text-align:left; margin-top: 5px; margin-bottom=
: 5px}
.warningMacro { border-style: solid; border-width: 1px; border-color: #c00;=
 background-color: #fcc; text-align:left; margin-top: 5px; margin-bottom: 5=
px}
.infoMacro { border-style: solid; border-width: 1px; border-color: #3c78b5;=
 background-color: #D8E4F1; text-align:left; margin-top: 5px; margin-bottom=
: 5px}
.tipMacro { border-style: solid; border-width: 1px; border-color: #090; bac=
kground-color: #dfd; text-align:left; margin-top: 5px; margin-bottom: 5px}
.informationMacroPadding { padding: 5px 0 0 5px; }


/* Global Message styles */
.noteMessage { border-style: solid; border-width: 1px; border-color: #F0C00=
0; background-color: #FFFFCE; text-align:center; padding:5px;}
.warningMessage { border-style: solid; border-width: 1px; border-color: #c0=
0; background-color: #fcc; text-align:center; padding:5px;}
.infoMessage { border-style: solid; border-width: 1px; border-color: #3c78b=
5; background-color: #D8E4F1; text-align:center; padding:5px;}
.tipMessage { border-style: solid; border-width: 1px; border-color: #090; b=
ackground-color: #dfd; text-align:center; padding:5px;}


table.infoMacro td, table.warningMacro td, table.tipMacro td, table.noteMac=
ro td, table.sectionMacro td {
border: none;
}

table.sectionMacroWithBorder td.columnMacro { border-style: dashed; border-=
width: 1px; border-color: #cccccc;}

.pagecontent
{
padding: 10px;
text-align: left;
}

/* styles for links in the top bar */
.topBarDiv a:link {color: #ffffff;}
.topBarDiv a:visited {color: #ffffff;}
.topBarDiv a:active {color: #ffffff;}
.topBarDiv a:hover {color: #ffffff;}
.topBarDiv {color: #ffffff;}

.topBar {
background-color: #003366;
}


/* styles for extended operations */
.greyLinks a:link {color: #666666; text-decoration:underline;}
.greyLinks a:visited {color: #666666; text-decoration:underline;}
.greyLinks a:active {color: #666666; text-decoration:underline;}
.greyLinks a:hover {color: #666666; text-decoration:underline;}
.greyLinks {color: #666666; display:block; padding: 10px}

.lslink {color: #999999; text-decoration: none}
.lslink a:link {color: #999999; text-decoration: none}
.lslink a:visited {color: #999999; text-decoration: none}
.lslink a:active {color: #999999; text-decoration: none}
.lslink a:hover {color: #003366; text-decoration: none}

/* basic panel (basicpanel.vmd) style */
.basicPanelContainer {border: 1px solid #3c78b5; margin-top: 2px; margin-bo=
ttom: 8px; width: 100%}
.basicPanelTitle {padding: 5px; margin: 0px; background-color: #f0f0f0; col=
or: black; font-weight: bold;}
.basicPanelBody {padding: 5px; margin: 0px}

.separatorLinks a:link {color: white}
.separatorLinks a:visited {color: white}
.separatorLinks a:active {color: white}

.greynavbar {background-color: #f0f0f0; border-top: 1px solid #3c78b5; marg=
in-top: 2px}

div.headerField {
float: left;
width: auto;
height: 100%;
}

.headerFloat {
margin-left: auto;
width: 50%;
}

.headerFloatLeft {
float: left;
margin-right: 20px;
margin-bottom: 10px;
}

#headerRow {
padding: 10px;
}

div.license-personal {
background-color: #003366;
color: #ffffff;
}

div.license-personal a {
color: #ffffff;
}

.greyFormBox {
border: 1px solid #cccccc;
padding: 5px;
}

/* IE automatically adds a margin before and after form tags. Use this styl=
e to remove that */
.marginlessForm {
margin: 0px;
}

.openPageHighlight {
background-color: #ffffcc;
padding: 2px;
border: 1px solid #ddd;
}

.editPageInsertLinks, .editPageInsertLinks a
{
color: #666666;
font-weight: bold;
font-size: 10px;
}

/* Style for label heatmap. */
.top10 a {
font-weight: bold;
font-size: 2em;
color: #003366;
}
.top25 a {
font-weight: bold;
font-size: 1.6em;
color: #003366;
}
.top50 a {
font-size: 1.4em;
color: #003366;
}
.top100 a {
font-size: 1.2em;
color: #003366;
}

.heatmap {
list-style:none;
width: 95%;
margin: 0px auto;
}

.heatmap a {
text-decoration:none;
}

.heatmap a:hover {
text-decoration:underline;
}

.heatmap li {
display: inline;
}

.minitab {
padding: 3px 0px 3px 8px;
margin-left: 0;
margin-top: 1px;
margin-bottom: 0px;
border-bottom: 1px solid #3c78b5;
font: bold 9px Verdana, sans-serif;
text-decoration: none;
float:none;
}
.selectedminitab {
padding: 3px 0.5em;
margin-left: 3px;
margin-top: 1px;
border: 1px solid #3c78b5;
background: white;
border-bottom: 1px solid white;
color: #000000;
text-decoration: none;
}
.unselectedminitab {
padding: 3px 0.5em;
margin-left: 3px;
margin-top: 1px;
border: 1px solid #3c78b5;
border-bottom: none;
background: #3c78b5;
color: #ffffff;
text-decoration: none;
}


a.unselectedminitab:hover {
color: #ffffff;
background: #003366;
border-color: #003366;
}
a.unselectedminitab:link { color: white; }
a.unselectedminitab:visited { color: white; }

a.selectedminitab:link { color: black; }
a.selectedminitab:visited { color: black; }

.linkerror { background-color: #fcc;}

a.labelOperationLink:link {text-decoration: underline}
a.labelOperationLink:active {text-decoration: underline}
a.labelOperationLink:visited {text-decoration: underline}
a.labelOperationLink:hover {text-decoration: underline}

a.newLabel:link {background-color: #ddffdd}
a.newLabel:active {background-color: #ddffdd}
a.newLabel:visited {background-color: #ddffdd}
a.newLabel:hover {background-color: #ddffdd}

ul.square {list-style-type: square}

.inline-control-link {
background: #ffc;
font-size: 9px;
color: #666;
padding: 2px;
text-transform: uppercase;
text-decoration: none;
}


.inline-control-link a:link {text-decoration: none}
.inline-control-link a:active {text-decoration: none}
.inline-control-link a:visited {text-decoration: none}
.inline-control-link a:hover {text-decoration: none}

.inline-control-link {
background: #ffc;
font-size: 9px;
color: #666;
padding: 2px;
text-transform: uppercase;
text-decoration: none;
cursor: pointer;
}

div.auto_complete {
width: 350px;
background: #fff;
}
div.auto_complete ul {
border: 1px solid #888;
margin: 0;
padding: 0;
width: 100%;
list-style-type: none;
}
div.auto_complete ul li {
margin: 0;
padding: 3px;
}
div.auto_complete ul li.selected {
background-color: #ffb;
}
div.auto_complete ul strong.highlight {
color: #800;
margin: 0;
padding: 0;
}

/******* Edit Page Styles *******/
.toggleFormDiv{
border:1px solid #A7A6AA;
background-color:white;
margin-top: 5px;
}

.toogleInfoDiv{
border:1px solid #A7A6AA;
background-color:white;
display:none;
padding:5px;
margin-top: 10px;
}

.inputSection{
margin-bottom:20px;
}

#editBox{
border:1px solid lightgray;
background-color:#F0F0F0;
}

/******* Left Navigation Theme Styles ********/
.leftnav li a {
text-decoration:none;
color:white;
margin:0px;
display:block;
padding:2px;
padding-left:5px;
background-color: #3c78b5;
border-top:1px solid #3c78b5;
}

.leftnav li a:active {color:white;}
.leftnav li a:visited {color:white;}
.leftnav li a:hover {background-color: #003366; color:white;}

/* Added by Shaun during i18n */
.replaced
{
background-color: #33CC66;
}

.topPadding
{
margin-top: 20px;
}

/* new form style */
.form-block {
padding: 6px;
}
.form-error-block {
padding: 6px;
background: #fcc;
border-top: #f0f0f0 1px solid;
border-bottom: #f0f0f0 1px solid;
margin-bottom: 6px;
padding: 0 12px 0 12px;
}
.form-element-large {
font-size: 16px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
}

.form-element-small {
font-size: 12px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
}

.form-header {
background: lightyellow;
border-top: #f0f0f0 1px solid;
border-bottom: #f0f0f0 1px solid;
margin-bottom: 6px;
padding: 0 12px 0 12px;
}
.form-header p, .form-block p, .form-error-block p {
line-height: normal;
margin: 12px 0 12px 0;
}
.form-example {
color: #888;
font-size: 11px;
}
.form-divider {
border-bottom: #ccc 1px solid;
margin-bottom: 6px;
}
.form-buttons {
margin-top: 6px;
border-top: #ccc 1px solid;
border-bottom: #ccc 1px solid;
background: #f0f0f0;
padding: 10px;
text-align: center;
}
.form-buttons input {
width: 100px;
}
.form-block .error {
padding: 6px;
margin-bottom: 6px;
}

.status-red
{
color: #800;
font-weight: bold;
}
.status-green
{
color: #080;
font-weight: bold;
}

.person
{
background-color: white;
width: 200px;
float: left;
}
.person td
{
white-space: nowrap;
}
#viewAttachmentsDiv input.commentTextField
{
width: 300px;
}
#blogcalendar span.fwdArrow
{
float: right;
display: block;
width: 16px;
height: 16px;
background-repeat: no-repeat;
background-image: url(/images/icons/forwd_16.gif);
}
#blogcalendar span.fwdArrow span
{
display: none;
}
#blogcalendar span.backArrow
{
float: left;
display: block;
width: 16px;
height: 16px;
background-repeat: no-repeat;
background-image: url(/images/icons/back_16.gif);
}
#blogcalendar span.backArrow span
{
display: none;
}
.pageInfoTable {
padding: 0px;
margin: 0px;
border: 0px;
width: 100%;
border-collapse: collapse;
}
.pageInfoTable td
{
padding: 3px;
}
.pageInfoTable tr.alternateRow
{
background: #f0f0f0;
}
.pageInfoLayoutTable
{
width: 100%;
border-collapse: collapse;
}
.pageInfoLayoutTable td
{
padding: 5px;
}
.searchMacro .result
{
margin-bottom: 3px;
padding: 0 5px 5px 5px;
border-bottom: 1px solid #ddd;
}

.rssMacro table
{
width: 100%;
border-collapse: collapse;
}
.rssMacro table th  {
border: 1px solid #ccc;
padding: 4px;
background: #f0f0f0;
}
.rssMacro table td
{
border: 1px solid #ccc;
padding: 4px;
}

.memoryusagebar { width: 100%; }
.memoryusagebar td
{
border: none !important;
vertical-align: middle !important;
}

input.alignedCheckbox { margin: 0px; }

div.spacer {clear: both}
span.left {float: left; text-align: left}
span.right {float: right; text-align: right}


#permissionsDiv label {
font-weight: bold;
color: black;
}

.pagePermissionsTable
{
border-collapse: collapse; padding: 2px; border-top: 1px solid #cccccc; bor=
der-bottom: 1px solid #cccccc; width: 100%;
}

.pagePermissionsTable tr td {padding: 4px}

.pagePermissionsErrorDiv {margin: 6px 0 6px 0; background-color: #fcc; bord=
er-top: 1px solid #c00; border-bottom: 1px solid #c00; padding: 3px;}

.pagePermissionsInput {background-color: #FFFFCE; padding: 4px; margin-top:=
 4px;}

#inheritedPermissionsBox
{
margin: 8px 8px 0 8px;
padding: 8px;
}

#currentPermissionsBox
{
margin: 8px;
padding: 8px;
}

.nobr {
white-space: nowrap;
}

label.normal {
font-weight: normal;
color: black
}

div.leftFloatMargined {
float: left;
margin-right: 2px
}

table#entitySearchResults {
border-collapse: collapse;
background-color: #fafafa;
text-align: left;
width: 100%;
}

table#entitySearchResults td {
border-top: 1px solid #cccccc;
padding: 3px;
background-color: white;
vertical-align: top;
}

table#entitySearchResults th {
color: #666666;
padding: 3px;
white-space:nowrap;
}

table#entitySearchResults .firstColumn {
width: 2%;
text-align: right;
}

table#entitySearchResults .secondColumn {
width: 1px;
text-align: right;
}
------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/styles/main-action.css?pluginCompleteKey=com.atlassian.confluence.themes.leftnavigation%3Amain&stylesheetName=leftnav.css
Content-Transfer-Encoding: quoted-printable
Content-Type: text/css


.sbr {
/*background-image: url(/confluence/oss/download/resources/com.atlassian.co=
nfluence.themes.leftnavigation:leftnavigation/leftnav_bg.jpg);*/
/*background-repeat: repeat-y;*/
background-color: #F0F0F0;
/*border-bottom:1px solid #F0F0F0;*/
}

#logodiv {
text-align:center;
padding:10px;
padding-right:15px;
}

#menu{
width:150px;
}

.leftnav h1
{
margin: 0px;
padding: 4px;
font-size: 11px;
font-weight:bold;
border-bottom:1px solid #CCC;
border-top:1px solid white;
}

.leftnav h5
{
margin: 0px;
padding: 0px;
font-size: 11px;
font-weight:bold;
border-bottom:1px solid #CCC;
border-top:1px solid white;
}

.leftnav h5 a{text-decoration:none; display:block; border:0; padding:5px;}
.leftnav h5 a:hover {text-decoration:none; display:block; border:0; backgro=
und-color: white;}

.leftnav ul
{
display:inline;
margin: 0px;
padding: 0px;
list-style: none;
}

.leftnav li
{
display:inline;
margin: 0px;
padding: 0px;
}

.leftnav li a {
text-decoration:none;
color:white;
margin:0px;
display:block;
padding:2px;
padding-left:5px;
background-color: background: #3c78b5;
border-top:1px solid background: #3c78b5;

}

.leftnav li a.current {
background-color: #003366; color:white;}
}

.leftnav li a:active {color:white;}
.leftnav li a:visited {color:white;}
.leftnav li a:hover {background-color: #003366; color:white;}

.leftnav li.current
{
background-color: #487bb7
}

.leftnav li.current a
{
color: #3c78b5;
}

/*Overwritten styles in the main.css*/

#PageContent {
text-align: left;
background-color: #fff;
padding: 0px;
margin: 0px;
padding-bottom: 0px;
}

h1 {
font-size: 22px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
background-color: #fff;
border-bottom: 0px;
padding: 0px;
margin: 27px 0px 4px 0px;
}

h2 {
font-size: 18px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
background-color: #fff;
border-bottom: 0px;
padding: 0px;
margin: 27px 0px 4px 0px;
}

h3 {
font-size: 16px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
background-color: #fff;
border-bottom: 0px;
padding: 0px;
margin: 27px 0px 4px 0px;
}

h4 {
font-size: 14px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
background-color: #fff;
border-bottom: 0px;
padding: 0px;
margin: 27px 0px 4px 0px;
}

h5 {
font-size: 12px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
background-color: #fff;
border-bottom: 0px;
padding: 0px;
margin: 27px 0px 4px 0px;
}

h6 {
font-size: 10px;
font-weight: bold;
font-family: Arial, sans-serif;
color: #003366;
background-color: #fff;
border-bottom: 0px;
padding: 0px;
margin: 27px 0px 4px 0px;
}
------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/images/icons/favicon.ico
Content-Transfer-Encoding: base64
Content-Type: text/html

CgEAAQAgIAAAAAAAAKgAABYAAAAoAAAAIAAAAEAAAAABAAAAAAAAgAQAAAAAAAAAAAAAAAEAAAAA
AABmMwAA7OXfAJ9/XwDPv68Ag1kwALyljwBwQBAA////ALKZfwDi2c8AimM8AKmMbwB5TSAAxbKf
APXy7wCWc1AA2cy/AOPZ0AD39+8AvaWUAI1nQQCggGAAqY1wALOZgAChgWIAjGZAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
BwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHEAMBCQcJCQcHBwcHCQkJAQMQ
BwcHBwcHBwcHBw4FFQsJBwcHBwcHBwcHBwcHBwcHBwkLFQUOBwcHBw4VBhkOBwcHBwcHBwcHBwcH
BwcHBwcHBwcOGQYWDgcRBgAZBwcHBwwAAAAGDQcHBwcNBgAAAAwHBwcHGQAGEQwAABcHBwcHBQAA
AAAAEQcHEQAAAAAABQcHBwcXAAAMBgAAGQcHBwcHGQAAAAAEBwcEAAAAABkHBwcHBxkAAAYXAAAA
FQ4HBwcBBgAAAAAWFgAAAAAGAQcHBw4VAAAAFwcFBgAADA0OBwcFAAAAAAAAAAAAAAUHBw4NDAAA
BgUHBwcODAAAABkXAwoZAxcZAAAADA4HBwcHBwcHCQUPDAAAGAYAAAAAAAAGFgAADA8FCQcHBwcH
BwcHBwcHBwcHBwkQBQAAAAAAAAUQCQcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHAAAAAAAABwcHBwcH
BwcHBwcHBwcHBwcHBwcHBwcHBxcAAAAAAAAXBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcRAAAAAAAA
AAARBwcHBwcHBwcHBwcHBwcHBwcHBwcHEQYAAAAAAAAAAAYRBwcHBwcHBwcHBwcHBwcHBwcHBxEG
AAAAAAAAAAAAAAYRBwcHBwcHBwcHBwcHBwcHBwcRBgAAAAAAAAAAAAAAAAYRBwcHBwcHBwcHBwcH
BwcHDgQAAAAAFAAAAAAUAAAAAAQOBwcHBwcHBwcHBwcHBw4EAAAABg0PAAAAAA8NBgAAAAQOBwcH
BwcHBwcHBwcHBAAAAAQJBwAAAAAAAAcJBAAAAAQHBwcHBwcHBwcHBxUAAAAVDgcHAAAAAAAABwcO
FQAAABUHBwcHBwcHBwcVAAAGDQcHBwcWAAAAABYHBwcHDQYAABUHBwcHBwcHAwIFEAcHBwcHBw4L
BgYLDgcHBwcHBxAFAgMHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcH
BwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcH
BwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcH
BwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcH
BwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcH

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/images/icons/favicon.png
Content-Transfer-Encoding: base64
Content-Type: text/html

iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAA3NCSVQICAjb4U/gAAAASFBMVEUA
M2bf5exZepuwwNAgTXmAmbP///9AZozP2eIQQHDv8vVph6WfssXAzdkwWYNQc5aPpbxvjKlggKDv
9/fQ2eNwjalff5+Upb0q1PKgAAAACXBIWXMAAAsSAAALEgHS3X78AAAAIHRFWHRTb2Z0d2FyZQBN
YWNyb21lZGlhIEZpcmV3b3JrcyBNWLuRKiQAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDkvMjIvMDRc
4f1BAAAAiElEQVR4nG2P2w7DMAhDTUlJoLk1Svv/n7pk07qpm58A4WOA3ITfgZVqQs6RWC02NxiZ
VmClDH5ZKvQADkV9MxqeahfU8uyzfVJMAbXv2Mm47qC4L3Nj2SONgZ1ovE3Gxg2nIWsXAkoBgnTN
cF7EQ4kUs3LoPkpKw0wpSfR9QDsHGpFGgfufbx9+eQbOXFVzfwAAAABJRU5ErkJggg==

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/s/811/1/_/decorators/effects.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript


// Provide hover and click effect to entire table rows.
// (removed click effect - it was annoying - mike 1/10/03)
// Usage:
// <table class=3D"grid">
//   <tr href=3D"somelink.jsp" onmouseover=3D"rowHover(this)">
//   ...
var oFCKeditor;

function rowHover(row)
{
if (!row.href && row.getAttribute) row.href =3D row.getAttribute("href");
row.oldClassName =3D row.className;
row.className =3D 'gridHover';
row.onmouseout =3D function()
{
this.className =3D this.oldClassName;
}
//	row.onclick =3D function() {
//		document.location.href =3D this.href;
//  }
}

function placeFocus()
{
// If the page has been loaded with an #anchor, don't place focus because i=
t breaks the anchor
// If the page contains a page-edit form, don't place focus because it piss=
es people off too frequently
if (document.location.hash || document.getElementById("editpageform") || do=
cument.getElementById("createpageform"))
{
return;
}

// allow ability to customize which textfield the focus goes to (by specify=
ing "?autofocus=3D<id of element>")
var autoFocusElementId =3D "";
var queryString =3D window.location.search.substring(1);
// substring to remove the leading "?"
var parameterPairs =3D queryString.split("&");
for (var i =3D 0; i < parameterPairs.length; i++)
{
var key =3D parameterPairs[i].split("=3D")[0];
var value =3D parameterPairs[i].split("=3D")[1];
if (key =3D=3D "autofocus" && (value !=3D null && value.length > 0))
{
autoFocusElementId =3D "'" + value + "'";
// necessary single quotes as element ids returned by element.id contain th=
em
}
}

var stopNow =3D false;
for (var i =3D 0; i < document.forms.length; i++)
{
var currSet =3D document.forms[i].elements;
if (document.forms[i].name !=3D 'searchForm' && document.forms[i].name !=3D=
 'inlinecommentform')
{
for (var j =3D 0; j < currSet.length; j++)
{
if (
(currSet[j].type =3D=3D 'text' || currSet[j].type =3D=3D 'password' || curr=
Set[j].type =3D=3D 'textarea')
&& !currSet[j].disabled
&& !(currSet[j].style.display =3D=3D 'none')
)
{
try
{
if (autoFocusElementId !=3D null && autoFocusElementId.length > 0)
{
if (currSet[j].id =3D=3D autoFocusElementId)
{
currSet[j].focus();
stopNow =3D true;
break;
}
}
else
{
currSet[j].focus();
stopNow =3D true;
break;
}
}
catch (e)
{
// ignore
// setting focus to input elements inside hidden div's causes an exception =
on IE
}
}
}
}
if (stopNow)
break;
}
}

function checkAllCheckBoxes(field)
{
for (i =3D 0; i < field.length; i++)
field[i].checked =3D true;
}

function clearAllCheckBoxes(field)
{
for (i =3D 0; i < field.length; i++)
field[i].checked =3D false;
}

function openUserPickerWindow(formName, element)
{
var vWinUsers =3D window.open('openuserpicker.action?key=3D$key&formName=3D=
' + formName + '&elementName=3D' + element + '&startIndex=3D0&usersPerPage=
=3D10', 'UserPicker2', 'status=3Dyes,resizable=3Dyes,top=3D100,left=3D200,w=
idth=3D580,height=3D550,scrollbars=3Dyes');
vWinUsers.opener =3D self;
vWinUsers.focus();
}

function getCurrentFormContent(form)
{
var newContent;
if (useWysiwyg && form.xhtml.value =3D=3D 'true')
{
return getEditorHTML();
}
if (form.markupTextarea)
{
return form.markupTextarea.value;
}
}

function saveDraftOnPageChange(anchorElement)
{
var gotoNewPage =3D function()
{
window.location =3D anchorElement.href
};
if (hasContentChanged())
saveDraft(gotoNewPage);
else
gotoNewPage();
}

function toggleVisibility(elementId)
{
var element =3D document.getElementById(elementId);
if (element.style.display =3D=3D 'none')
{
element.style.display =3D 'block';
return true;
}
else
{
element.style.display =3D 'none';
return false;
}
}


/**
* Only the parameters name and value are required. If no expiration is spec=
ific, the cookie will be valid until the end of the session.
*
*/
function setCookie(name, value, exp_y, exp_m, exp_d, path, domain, secure)
{
var cookie_string =3D name + "=3D" + escape(value);

if (exp_y)
{
var expires =3D new Date(exp_y, exp_m, exp_d);
cookie_string +=3D "; expires=3D" + expires.toGMTString();
}

if (path)
cookie_string +=3D "; path=3D" + escape(path);
else
cookie_string +=3D "; path=3D/";

if (domain)
cookie_string +=3D "; domain=3D" + escape(domain);

if (secure)
cookie_string +=3D "; secure";

document.cookie =3D cookie_string;
}

function getCookie(cookie_name)
{
var results =3D document.cookie.match(cookie_name + '=3D(.*?)(;|$)');

if (results)
return ( unescape(results[1]) );
else
return null;
}
------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/images/confluence_logo.gif
Content-Transfer-Encoding: base64
Content-Type: text/html

R0lGODlhKgAeAMQAAAAzZlBzlq+/zyBNeX+Zss/Z4hBAcGCAoJ+yxUBmjN/l7L/M2Y+lvDBZg2+M
qV9/n9DZ45SlvXCNqZarwISdtf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAUU
ABUALAAAAAAqAB4AAAX/YCVWhYMsYzoWAQAEhaouiBPL4uECjSAXhh3AcEsJGrsDLtVKKphCVyCl
0O2myxRy1yhGd6utq5GViV0M0dclYkTJZdkgGlA0hQl7dBDHQYJCAwiALgYIc0IGEH1+hDuOjoWL
jI1rlkOTlDgIl2sImmWcnTufoKGjAKWmZW6Xaat9CZYJsIwKlk+1cbdruboqCgs0d3QnC76gCgIO
CYQUnc+FCQ4CyDgKCGdDCRORUQYTzW8I1hUKD28MucSWWAoM2g++Ao4HyAKoLj4jVYk++I9QUPHG
oFUiawscCUCESQY7ALQqPMSS4s8OhgAkyACYKIW3fSkkCBHpQuPALyArQ3B8ZI1kxgqyhiBzucNk
yC82zQGKWIFBkC6/fiAx8CpFNgMEyq1SQMBAA1XXGAQgUG2pAAIB1CVbUC2GUnMklB0rEwIAOw==

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/images/icons/docs_16.gif
Content-Transfer-Encoding: base64
Content-Type: text/html

R0lGODlhEAAQAOZFAP///2VlZaGhoGmu4MbGxry8vOPk5M3OztXW1fT09OPj4yR6utDR0dTU1dTV
1ZnM//P09Lu7u9XV1aSko9PV1N7//8rLy4+PjoODguPj5GhoaGxsbMbHxq6ura6urru6utDR0OPj
4rq7u66vrpWVlPz9/ImJienp6XFxccbGx6Slo319fMfHxru7uuLi4u7u76+urcbGxa+urvj5+d3f
3tnZ2XFycaSlpNja2dPU1dTV1H18fXd3dnd3d/j4+JqamfTz9J6enePk4+7v797e3////wAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5
BAEAAEUALAAAAAAQABAAAAfDgEUCg4SEAwNFiYkCAI2OjQMViIqMj44DD5KKQQAlMQSgBCWYmZM/
AD4hCqouMwMLsAuJJAAJtkAJELoWvCSJFwAvLSIRIh8Rx0MAF4kmACcICA4SCBLUJwAmiRgABgoZ
BgYZCgZCBgAYiSsARDIeMCMdHvE0ADuJPAA1HCmhLBwEcADokcgGAAoUHDhokKMBBR0NAKBItAEA
gwkYVdxgwAAECAAbEmkAcKCASZMHUh4AoCFRAEswAQRwGaCmzZs2iwQCADs=

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/images/icons/browse_space.gif
Content-Transfer-Encoding: base64
Content-Type: text/html

R0lGODlhEAAQAPcAAFBIWUt41FqxLiNQrKe53XxkdYe3gE+sKBREpnm154HMT+T2/5HGmbuMjGCM
uFulimym4D9wpa7T909zvLnve3Q8PIK3wmfAXGaT3Fqbc5yx3Et6qp/eZnl9nLXYxaXF+sjU7GuM
tShdk5G5+YRhYTZvhIWj4LDO7H21+Wy5mmm8PGOOmMihoV6EqUZ50G6qwW7Gcq95dqzncV2XnmmZ
6p58fJa+7C9fwWNhcFesU15/wo+4knDEU9zQ0FKE3cnc/HKm95jX/He8w47F8HGPzFuBqIOk6JPX
XX283n9yXE6DyK2/5MHX/GtUZ/T3/ZvD5l2xRXim8rvN8nGV33ZBQWGrfY/GjWqjnXK+QqPQqbLO
+1qUtWaK1FB60ILKxM3f8ZLH+nic5tLi/Mf6hmS2ODBduXGp76PhalOrPYC155m06zNmmVJ5yXO2
ZX+6mneEkoi+qIyq5zhsvo+4+bPsdqq/2Yii2WWdpWOH0f///3ac543RWL2UlHnGSdLe9ou4jp3B
+l+si2KTwbPZ/6LQ/fH0+pm91LXH7Gq6P3ewwnur+H2Yz4Cw64LD3nyw5MTQ6XiW03NKSo+q4XTE
RUt73b7c+6jkbWuS4kyCzZbYX2u1Ok6Fr8ylpWK3NKK7331rdYe1jVKrNIPKXF2qi67W/r3yfoK1
0HK7XJzeay1fk5O6+YtfX4ay+GKGqZXD8jNjxc/g/IvH+qzB7GW3Q2ute12SvM7e99Xk/Yq45FWH
yXe9YnGe63nFT////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAUUAL0ALAAAAAAQABAA
AAj/AHsJ7OXHiA9KCMNIGchQTS0GonjQ4WVIzyUnDOPckXEExoVJWcQwsYixl6wZHGRwUDDmlAdY
TOBcmdLLSQBdHCzRoVDKyq0fTNwc2fTlUK4+Ks6cAVVERIs6Wj7Q2mJCEoYDaDL9cfCkEi4HngDN
idKFyy5TNqAUeZLni6s0IVRVmfUKDw1WIyykknDCFaFBERJh2XPDjg9FjEK1cgSG0IInG15MasNm
iQsgD7DscJCG1BNBON4gygCpUBkzoxBhMbCixAYAMVgkWQOilwZMSEKRQUQmEIoOVBpwKjCQCKZG
KQR0EhJryKcKfDjVGLhIDoQcKrwESaCkSYUGqxg+DdIxAIH5CQR6kYjUIyAAOw==

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/images/icons/print_16.gif
Content-Transfer-Encoding: base64
Content-Type: text/html

R0lGODlhEAAQANUxACIiIv///5GRkVRUVDs+QAseQ5eXl9DQ0KHK6ezs7NLR0vf393uJlN/f32pq
ajpXkJHB5N/e39LS0n+Zy9Hb7bnE2KDL6Z+fn5mt1qDK6XePv8nU6cfGx4aYvqO11zxYkWmDs5rC
46vM6cfFxqHK6sbFxuzs7ff4+KHL6ff3+HijzMbGxpHB5cbGx5nC43mizarL6f///wAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADEALAAAAAAQABAAAAaRwJgw
Jigai8MkMcBsCpTCgWBxWqQWC8EAKk2YEuCEliuIRBroxlgplSjeCslauMFIW6NVicPRYjYxFBMM
AASGh4YADBMUHoQAkJGSih4aME2YmSIaIC4IFggZCCifoiQPISAdLxAsBa+wrxAQKh0VHw8ABru8
uwAPHxUxDhcAB8fIxwAXDkMOAJlNAM1Jk5NDQQA7

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/images/icons/wait.gif
Content-Transfer-Encoding: base64
Content-Type: text/html

R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQAR
AAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05F
VFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGs
CjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAK
dgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAA
AAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBC
AoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAA
AAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+Fo
gNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAA
LAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMgg
NZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkE
BQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjF
SAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO
0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5l
UiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkE
BQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjA
CYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEA
IfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKO
DK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIh
ACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFM
ogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4Obwsi
dEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgY
ETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZ
MAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRk
IoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVM
IgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUK
jkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQH
fySDhGYQdDWGQyUhADs=

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/images/border/border_bottom.gif
Content-Transfer-Encoding: base64
Content-Type: text/html

R0lGODlhCwAMALMAAAAAAOnp6bKyspmZmXl5ed3d3czMzPDw8P4BAgAAAAAAAAAAAAAAAAAAAAAA
AAAAACH5BAQUAP8ALAAAAAALAAwAAAQiEMhJAbk4k8G7H0IojoJhnqhRrGxbBHAsB0dt33iu73wf
AQA7

------=_Part_8ACADCFC_A9883FD4.14B322D279E
Content-Location: http://www.apachebookstore.com/confluence/oss/s/811/1/_/labels-javascript
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript



function AddLabelToEntity() { }
AddLabelToEntity._path =3D '/confluence/oss/dwr';

AddLabelToEntity.addLabel =3D function(p0, p1, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'addLabel', =
p0, p1, callback);
}

AddLabelToEntity.isPermitted =3D function(p0, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'isPermitted=
', p0, callback);
}

AddLabelToEntity.setPermissionManager =3D function(p0, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'setPermissi=
onManager', p0, callback);
}

AddLabelToEntity.setLabelManager =3D function(p0, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'setLabelMan=
ager', p0, callback);
}

AddLabelToEntity.setPageManager =3D function(p0, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'setPageMana=
ger', p0, callback);
}

AddLabelToEntity.isPersonalLabel =3D function(p0, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'isPersonalL=
abel', p0, callback);
}

AddLabelToEntity.getText =3D function(p0, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'getText', p=
0, callback);
}

AddLabelToEntity.getText =3D function(p0, p1, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'getText', p=
0, p1, callback);
}

AddLabelToEntity.getText =3D function(p0, p1, callback) {
DWREngine._execute(AddLabelToEntity._path, 'AddLabelToEntity', 'getText', p=
0, p1, callback);
}

function RemoveLabelFromEntity() { }
RemoveLabelFromEntity._path =3D '/confluence/oss/dwr';

RemoveLabelFromEntity.isPermitted =3D function(p0, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 'i=
sPermitted', p0, callback);
}

RemoveLabelFromEntity.setPermissionManager =3D function(p0, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 's=
etPermissionManager', p0, callback);
}

RemoveLabelFromEntity.setLabelManager =3D function(p0, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 's=
etLabelManager', p0, callback);
}

RemoveLabelFromEntity.setPageManager =3D function(p0, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 's=
etPageManager', p0, callback);
}

RemoveLabelFromEntity.removeLabel =3D function(p0, p1, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 'r=
emoveLabel', p0, p1, callback);
}

RemoveLabelFromEntity.isPersonalLabel =3D function(p0, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 'i=
sPersonalLabel', p0, callback);
}

RemoveLabelFromEntity.getText =3D function(p0, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 'g=
etText', p0, callback);
}

RemoveLabelFromEntity.getText =3D function(p0, p1, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 'g=
etText', p0, p1, callback);
}

RemoveLabelFromEntity.getText =3D function(p0, p1, callback) {
DWREngine._execute(RemoveLabelFromEntity._path, 'RemoveLabelFromEntity', 'g=
etText', p0, p1, callback);
}

function ViewLabelsForEntity() { }
ViewLabelsForEntity._path =3D '/confluence/oss/dwr';

ViewLabelsForEntity.isPermitted =3D function(p0, callback) {
DWREngine._execute(ViewLabelsForEntity._path, 'ViewLabelsForEntity', 'isPer=
mitted', p0, callback);
}

ViewLabelsForEntity.setPermissionManager =3D function(p0, callback) {
DWREngine._execute(ViewLabelsForEntity._path, 'ViewLabelsForEntity', 'setPe=
rmissionManager', p0, callback);
}

ViewLabelsForEntity.setPageManager =3D function(p0, callback) {
DWREngine._execute(ViewLabelsForEntity._path, 'ViewLabelsForEntity', 'setPa=
geManager', p0, callback);
}

ViewLabelsForEntity.isPersonalLabel =3D function(p0, callback) {
DWREngine._execute(ViewLabelsForEntity._path, 'ViewLabelsForEntity', 'isPer=
sonalLabel', p0, callback);
}

ViewLabelsForEntity.viewLabels =3D function(p0, callback) {
DWREngine._execute(ViewLabelsForEntity._path, 'ViewLabelsForEntity', 'viewL=
abels', p0, callback);
}

ViewLabelsForEntity.getText =3D function(p0, callback) {
DWREngine._execute(ViewLabelsForEntity._path, 'ViewLabelsForEntity', 'getTe=
xt', p0, callback);
}

ViewLabelsForEntity.getText =3D function(p0, p1, callback) {
DWREngine._execute(ViewLabelsForEntity._path, 'ViewLabelsForEntity', 'getTe=
xt', p0, p1, callback);
}

ViewLabelsForEntity.getText =3D function(p0, p1, callback) {
DWREngine._execute(ViewLabelsForEntity._path, 'ViewLabelsForEntity', 'getTe=
xt', p0, p1, callback);
}

function ViewLabelsForEntityWithoutDeleteLinks() { }
ViewLabelsForEntityWithoutDeleteLinks._path =3D '/confluence/oss/dwr';

ViewLabelsForEntityWithoutDeleteLinks.setPageManager =3D function(p0, callb=
ack) {
DWREngine._execute(ViewLabelsForEntityWithoutDeleteLinks._path, 'ViewLabels=
ForEntityWithoutDeleteLinks', 'setPageManager', p0, callback);
}

ViewLabelsForEntityWithoutDeleteLinks.viewLabels =3D function(p0, p1, callb=
ack) {
DWREngine._execute(ViewLabelsForEntityWithoutDeleteLinks._path, 'ViewLabels=
ForEntityWithoutDeleteLinks', 'viewLabels', p0, p1, callback);
}

ViewLabelsForEntityWithoutDeleteLinks.getText =3D function(p0, callback) {
DWREngine._execute(ViewLabelsForEntityWithoutDeleteLinks._path, 'ViewLabels=
ForEntityWithoutDeleteLinks', 'getText', p0, callback);
}

ViewLabelsForEntityWithoutDeleteLinks.getText =3D function(p0, p1, callback=
) {
DWREngine._execute(ViewLabelsForEntityWithoutDeleteLinks._path, 'ViewLabels=
ForEntityWithoutDeleteLinks', 'getText', p0, p1, callback);
}

ViewLabelsForEntityWithoutDeleteLinks.getText =3D function(p0, p1, callback=
) {
DWREngine._execute(ViewLabelsForEntityWithoutDeleteLinks._path, 'ViewLabels=
ForEntityWithoutDeleteLinks', 'getText', p0, p1, callback);
}

function SuggestedLabelsForEntity() { }
SuggestedLabelsForEntity._path =3D '/confluence/oss/dwr';

SuggestedLabelsForEntity.setLabelManager =3D function(p0, callback) {
DWREngine._execute(SuggestedLabelsForEntity._path, 'SuggestedLabelsForEntit=
y', 'setLabelManager', p0, callback);
}

SuggestedLabelsForEntity.setPageManager =3D function(p0, callback) {
DWREngine._execute(SuggestedLabelsForEntity._path, 'SuggestedLabelsForEntit=
y', 'setPageManager', p0, callback);
}

SuggestedLabelsForEntity.viewLabels =3D function(p0, p1, callback) {
DWREngine._execute(SuggestedLabelsForEntity._path, 'SuggestedLabelsForEntit=
y', 'viewLabels', p0, p1, callback);
}

SuggestedLabelsForEntity.getText =3D function(p0, callback) {
DWREngine._execute(SuggestedLabelsForEntity._path, 'SuggestedLabelsForEntit=
y', 'getText', p0, callback);
}

SuggestedLabelsForEntity.getText =3D function(p0, p1, callback) {
DWREngine._execute(SuggestedLabelsForEntity._path, 'SuggestedLabelsForEntit=
y', 'getText', p0, p1, callback);
}

SuggestedLabelsForEntity.getText =3D function(p0, p1, callback) {
DWREngine._execute(SuggestedLabelsForEntity._path, 'SuggestedLabelsForEntit=
y', 'getText', p0, p1, callback);
}

function GenerateAutocompleteLabelsListForEntity() { }
GenerateAutocompleteLabelsListForEntity._path =3D '/confluence/oss/dwr';

GenerateAutocompleteLabelsListForEntity.setLabelManager =3D function(p0, ca=
llback) {
DWREngine._execute(GenerateAutocompleteLabelsListForEntity._path, 'Generate=
AutocompleteLabelsListForEntity', 'setLabelManager', p0, callback);
}

GenerateAutocompleteLabelsListForEntity.setPageManager =3D function(p0, cal=
lback) {
DWREngine._execute(GenerateAutocompleteLabelsListForEntity._path, 'Generate=
AutocompleteLabelsListForEntity', 'setPageManager', p0, callback);
}

GenerateAutocompleteLabelsListForEntity.autocompleteLabels =3D function(p0,=
 p1, callback) {
DWREngine._execute(GenerateAutocompleteLabelsListForEntity._path, 'Generate=
AutocompleteLabelsListForEntity', 'autocompleteLabels', p0, p1, callback);
}

GenerateAutocompleteLabelsListForEntity.getText =3D function(p0, callback) {
DWREngine._execute(GenerateAutocompleteLabelsListForEntity._path, 'Generate=
AutocompleteLabelsListForEntity', 'getText', p0, callback);
}

GenerateAutocompleteLabelsListForEntity.getText =3D function(p0, p1, callba=
ck) {
DWREngine._execute(GenerateAutocompleteLabelsListForEntity._path, 'Generate=
AutocompleteLabelsListForEntity', 'getText', p0, p1, callback);
}

GenerateAutocompleteLabelsListForEntity.getText =3D function(p0, p1, callba=
ck) {
DWREngine._execute(GenerateAutocompleteLabelsListForEntity._path, 'Generate=
AutocompleteLabelsListForEntity', 'getText', p0, p1, callback);
}



















if (DWREngine =3D=3D null) var DWREngine =3D {};





DWREngine.setErrorHandler =3D function(handler) {
DWREngine._errorHandler =3D handler;
};





DWREngine.setWarningHandler =3D function(handler) {
DWREngine._warningHandler =3D handler;
};





DWREngine.setTimeout =3D function(timeout) {
DWREngine._timeout =3D timeout;
};





DWREngine.setPreHook =3D function(handler) {
DWREngine._preHook =3D handler;
};





DWREngine.setPostHook =3D function(handler) {
DWREngine._postHook =3D handler;
};


DWREngine.XMLHttpRequest =3D 1;


DWREngine.IFrame =3D 2;






DWREngine.setMethod =3D function(newMethod) {
if (newMethod !=3D DWREngine.XMLHttpRequest && newMethod !=3D DWREngine.IFr=
ame) {
DWREngine._handleError("Remoting method must be one of DWREngine.XMLHttpReq=
uest or DWREngine.IFrame");
return;
}
DWREngine._method =3D newMethod;
};





DWREngine.setVerb =3D function(verb) {
if (verb !=3D "GET" && verb !=3D "POST") {
DWREngine._handleError("Remoting verb must be one of GET or POST");
return;
}
DWREngine._verb =3D verb;
};





DWREngine.setOrdered =3D function(ordered) {
DWREngine._ordered =3D ordered;
};





DWREngine.setAsync =3D function(async) {
DWREngine._async =3D async;
};





DWREngine.setTextHtmlHandler =3D function(handler) {
DWREngine._textHtmlHandler =3D handler;
}





DWREngine.defaultMessageHandler =3D function(message) {
if (typeof message =3D=3D "object" && message.name =3D=3D "Error" && messag=
e.description) {
alert("Error: " + message.description);
}
else {

if (message.toString().indexOf("0x80040111") =3D=3D -1) {
alert(message);
}
}
};





DWREngine.beginBatch =3D function() {
if (DWREngine._batch) {
DWREngine._handleError("Batch already started.");
return;
}

DWREngine._batch =3D {
map:{ callCount:0 },
paramCount:0,
ids:[],
preHooks:[],
postHooks:[]
};
};





DWREngine.endBatch =3D function(options) {
var batch =3D DWREngine._batch;
if (batch =3D=3D null) {
DWREngine._handleError("No batch in progress.");
return;
}

if (options && options.preHook) batch.preHooks.unshift(options.preHook);
if (options && options.postHook) batch.postHooks.push(options.postHook);
if (DWREngine._preHook) batch.preHooks.unshift(DWREngine._preHook);
if (DWREngine._postHook) batch.postHooks.push(DWREngine._postHook);

if (batch.method =3D=3D null) batch.method =3D DWREngine._method;
if (batch.verb =3D=3D null) batch.verb =3D DWREngine._verb;
if (batch.async =3D=3D null) batch.async =3D DWREngine._async;
if (batch.timeout =3D=3D null) batch.timeout =3D DWREngine._timeout;

batch.completed =3D false;


DWREngine._batch =3D null;



if (!DWREngine._ordered) {
DWREngine._sendData(batch);
DWREngine._batches[DWREngine._batches.length] =3D batch;
}
else {
if (DWREngine._batches.length =3D=3D 0) {

DWREngine._sendData(batch);
DWREngine._batches[DWREngine._batches.length] =3D batch;
}
else {

DWREngine._batchQueue[DWREngine._batchQueue.length] =3D batch;
}
}
};






DWREngine._errorHandler =3D DWREngine.defaultMessageHandler;


DWREngine._warningHandler =3D null;


DWREngine._preHook =3D null;


DWREngine._postHook =3D null;


DWREngine._batches =3D [];


DWREngine._batchQueue =3D [];


DWREngine._handlersMap =3D {};


DWREngine._method =3D DWREngine.XMLHttpRequest;


DWREngine._verb =3D "POST";


DWREngine._ordered =3D false;


DWREngine._async =3D true;


DWREngine._batch =3D null;


DWREngine._timeout =3D 0;


DWREngine._DOMDocument =3D ["Msxml2.DOMDocument.6.0", "Msxml2.DOMDocument.5=
.0", "Msxml2.DOMDocument.4.0", "Msxml2.DOMDocument.3.0", "MSXML2.DOMDocumen=
t", "MSXML.DOMDocument", "Microsoft.XMLDOM"];


DWREngine._XMLHTTP =3D ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.5.0", "Msxml2=
.XMLHTTP.4.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"];










DWREngine._execute =3D function(path, scriptName, methodName, vararg_params=
) {
var singleShot =3D false;
if (DWREngine._batch =3D=3D null) {
DWREngine.beginBatch();
singleShot =3D true;
}

var args =3D [];
for (var i =3D 0; i < arguments.length - 3; i++) {
args[i] =3D arguments[i + 3];
}

if (DWREngine._batch.path =3D=3D null) {
DWREngine._batch.path =3D path;
}
else {
if (DWREngine._batch.path !=3D path) {
DWREngine._handleError("Can't batch requests to multiple DWR Servlets.");
return;
}
}


var params;
var callData;
var firstArg =3D args[0];
var lastArg =3D args[args.length - 1];

if (typeof firstArg =3D=3D "function") {
callData =3D { callback:args.shift() };
params =3D args;
}
else if (typeof lastArg =3D=3D "function") {
callData =3D { callback:args.pop() };
params =3D args;
}
else if (lastArg !=3D null && typeof lastArg =3D=3D "object" && lastArg.cal=
lback !=3D null && typeof lastArg.callback =3D=3D "function") {
callData =3D args.pop();
params =3D args;
}
else if (firstArg =3D=3D null) {



if (lastArg =3D=3D null && args.length > 2) {
DWREngine._handleError("Ambiguous nulls at start and end of parameter list.=
 Which is the callback function?");
}
callData =3D { callback:args.shift() };
params =3D args;
}
else if (lastArg =3D=3D null) {
callData =3D { callback:args.pop() };
params =3D args;
}
else {
DWREngine._handleError("Missing callback function or metadata object.");
return;
}


var random =3D Math.floor(Math.random() * 10001);
var id =3D (random + "_" + new Date().getTime()).toString();
var prefix =3D "c" + DWREngine._batch.map.callCount + "-";
DWREngine._batch.ids.push(id);


if (callData.method !=3D null) {
DWREngine._batch.method =3D callData.method;
delete callData.method;
}
if (callData.verb !=3D null) {
DWREngine._batch.verb =3D callData.verb;
delete callData.verb;
}
if (callData.async !=3D null) {
DWREngine._batch.async =3D callData.async;
delete callData.async;
}
if (callData.timeout !=3D null) {
DWREngine._batch.timeout =3D callData.timeout;
delete callData.timeout;
}


if (callData.preHook !=3D null) {
DWREngine._batch.preHooks.unshift(callData.preHook);
delete callData.preHook;
}
if (callData.postHook !=3D null) {
DWREngine._batch.postHooks.push(callData.postHook);
delete callData.postHook;
}


if (callData.errorHandler =3D=3D null) callData.errorHandler =3D DWREngine.=
_errorHandler;
if (callData.warningHandler =3D=3D null) callData.warningHandler =3D DWREng=
ine._warningHandler;


DWREngine._handlersMap[id] =3D callData;

DWREngine._batch.map[prefix + "scriptName"] =3D scriptName;
DWREngine._batch.map[prefix + "methodName"] =3D methodName;
DWREngine._batch.map[prefix + "id"] =3D id;


for (i =3D 0; i < params.length; i++) {
DWREngine._serializeAll(DWREngine._batch, [], params[i], prefix + "param" +=
 i);
}


DWREngine._batch.map.callCount++;
if (singleShot) {
DWREngine.endBatch();
}
};


DWREngine._sendData =3D function(batch) {

if (batch.map.callCount =3D=3D 0) return;

for (var i =3D 0; i < batch.preHooks.length; i++) {
batch.preHooks[i]();
}
batch.preHooks =3D null;

if (batch.timeout && batch.timeout !=3D 0) {
batch.interval =3D setInterval(function() { DWREngine._abortRequest(batch);=
 }, batch.timeout);
}

var urlPostfix;
if (batch.map.callCount =3D=3D 1) {
urlPostfix =3D batch.map["c0-scriptName"] + "." + batch.map["c0-methodName"=
] + ".dwr";
}
else {
urlPostfix =3D "Multiple." + batch.map.callCount + ".dwr";
}


if (batch.method =3D=3D DWREngine.XMLHttpRequest) {
if (window.XMLHttpRequest) {
batch.req =3D new XMLHttpRequest();
}

else if (window.ActiveXObject && !(navigator.userAgent.indexOf("Mac") >=3D =
0 && navigator.userAgent.indexOf("MSIE") >=3D 0)) {
batch.req =3D DWREngine._newActiveXObject(DWREngine._XMLHTTP);
}
}

var query =3D "";
var prop;


if (batch.req) {
batch.map.xml =3D "true";

if (batch.async) {
batch.req.onreadystatechange =3D function() { DWREngine._stateChange(batch)=
; };
}

var indexSafari =3D navigator.userAgent.indexOf("Safari/");
if (indexSafari >=3D 0) {
var version =3D navigator.userAgent.substring(indexSafari + 7);
if (parseInt(version, 10) < 400) batch.verb =3D=3D "GET";
}
if (batch.verb =3D=3D "GET") {



batch.map.callCount =3D "" + batch.map.callCount;

for (prop in batch.map) {
var qkey =3D encodeURIComponent(prop);
var qval =3D encodeURIComponent(batch.map[prop]);
if (qval =3D=3D "") DWREngine._handleError("Found empty qval for qkey=3D" +=
 qkey);
query +=3D qkey + "=3D" + qval + "&";
}

try {
batch.req.open("GET", batch.path + "/exec/" + urlPostfix + "?" + query, bat=
ch.async);
batch.req.send(null);
if (!batch.async) DWREngine._stateChange(batch);
}
catch (ex) {
DWREngine._handleMetaDataError(null, ex);
}
}
else {
for (prop in batch.map) {
if (typeof batch.map[prop] !=3D "function") {
query +=3D prop + "=3D" + batch.map[prop] + "\n";
}
}

try {
batch.req.open("POST", batch.path + "/exec/" + urlPostfix, batch.async);
batch.req.setRequestHeader('Content-Type', 'text/plain');
batch.req.send(query);
if (!batch.async) DWREngine._stateChange(batch);
}
catch (ex) {
DWREngine._handleMetaDataError(null, ex);
}
}
}
else {
batch.map.xml =3D "false";
var idname =3D "dwr-if-" + batch.map["c0-id"];

batch.div =3D document.createElement("div");
batch.div.innerHTML =3D "<iframe src=3D'javascript:void(0)' frameborder=3D'=
0' width=3D'0' height=3D'0' id=3D'" + idname + "' name=3D'" + idname + "'><=
/iframe>";
document.body.appendChild(batch.div);
batch.iframe =3D document.getElementById(idname);
batch.iframe.setAttribute("style", "width:0px; height:0px; border:0px;");

if (batch.verb =3D=3D "GET") {
for (prop in batch.map) {
if (typeof batch.map[prop] !=3D "function") {
query +=3D encodeURIComponent(prop) + "=3D" + encodeURIComponent(batch.map[=
prop]) + "&";
}
}
query =3D query.substring(0, query.length - 1);

batch.iframe.setAttribute("src", batch.path + "/exec/" + urlPostfix + "?" +=
 query);
document.body.appendChild(batch.iframe);
}
else {
batch.form =3D document.createElement("form");
batch.form.setAttribute("id", "dwr-form");
batch.form.setAttribute("action", batch.path + "/exec" + urlPostfix);
batch.form.setAttribute("target", idname);
batch.form.target =3D idname;
batch.form.setAttribute("method", "POST");
for (prop in batch.map) {
var formInput =3D document.createElement("input");
formInput.setAttribute("type", "hidden");
formInput.setAttribute("name", prop);
formInput.setAttribute("value", batch.map[prop]);
batch.form.appendChild(formInput);
}
document.body.appendChild(batch.form);
batch.form.submit();
}
}
};


DWREngine._stateChange =3D function(batch) {
if (!batch.completed && batch.req.readyState =3D=3D 4) {
try {
var reply =3D batch.req.responseText;

if (reply =3D=3D null || reply =3D=3D "") {
DWREngine._handleMetaDataWarning(null, "No data received from server");
}
else {
var contentType =3D batch.req.getResponseHeader("Content-Type");
if (!contentType.match(/^text\/plain/) && !contentType.match(/^text\/javasc=
ript/)) {
if (DWREngine._textHtmlHandler && contentType.match(/^text\/html/)) {
DWREngine._textHtmlHandler();
}
else {
DWREngine._handleMetaDataWarning(null, "Invalid content type from server: '=
" + contentType + "'");
}
}
else {



if (reply.search("DWREngine._handle") =3D=3D -1) {
DWREngine._handleMetaDataWarning(null, "Invalid reply from server");
}
else {
eval(reply);
}
}
}


DWREngine._clearUp(batch);
}
catch (ex) {
if (ex =3D=3D null) ex =3D "Unknown error occured";
DWREngine._handleMetaDataWarning(null, ex);
}
finally {



if (DWREngine._batchQueue.length !=3D 0) {
var sendbatch =3D DWREngine._batchQueue.shift();
DWREngine._sendData(sendbatch);
DWREngine._batches[DWREngine._batches.length] =3D sendbatch;
}
}
}
};






DWREngine._handleResponse =3D function(id, reply) {

var handlers =3D DWREngine._handlersMap[id];
DWREngine._handlersMap[id] =3D null;

if (handlers) {


try {
if (handlers.callback) handlers.callback(reply);
}
catch (ex) {
DWREngine._handleMetaDataError(handlers, ex);
}
}


if (DWREngine._method =3D=3D DWREngine.IFrame) {
var responseBatch =3D DWREngine._batches[DWREngine._batches.length-1];

if (responseBatch.map["c"+(responseBatch.map.callCount-1)+"-id"] =3D=3D id)=
 {
DWREngine._clearUp(responseBatch);
}
}
};


DWREngine._handleServerError =3D function(id, error) {

var handlers =3D DWREngine._handlersMap[id];
DWREngine._handlersMap[id] =3D null;

if (error.message) DWREngine._handleMetaDataError(handlers, error.message, =
error);
else DWREngine._handleMetaDataError(handlers, error);
};


DWREngine._eval =3D function(script) {
return eval(script);
}


DWREngine._abortRequest =3D function(batch) {
if (batch && !batch.completed) {
clearInterval(batch.interval);
DWREngine._clearUp(batch);
if (batch.req) batch.req.abort();

var handlers;
for (var i =3D 0; i < batch.ids.length; i++) {
handlers =3D DWREngine._handlersMap[batch.ids[i]];
DWREngine._handleMetaDataError(handlers, "Timeout");
}
}
};


DWREngine._clearUp =3D function(batch) {
if (batch.completed) {
DWREngine._handleError("Double complete");
return;
}


if (batch.div) batch.div.parentNode.removeChild(batch.div);
if (batch.iframe) batch.iframe.parentNode.removeChild(batch.iframe);
if (batch.form) batch.form.parentNode.removeChild(batch.form);


if (batch.req) delete batch.req;

for (var i =3D 0; i < batch.postHooks.length; i++) {
batch.postHooks[i]();
}
batch.postHooks =3D null;


for (var i =3D 0; i < DWREngine._batches.length; i++) {
if (DWREngine._batches[i] =3D=3D batch) {
DWREngine._batches.splice(i, 1);
break;
}
}

batch.completed =3D true;
};


DWREngine._handleError =3D function(reason, ex) {
if (DWREngine._errorHandler) DWREngine._errorHandler(reason, ex);
};


DWREngine._handleWarning =3D function(reason, ex) {
if (DWREngine._warningHandler) DWREngine._warningHandler(reason, ex);
};


DWREngine._handleMetaDataError =3D function(handlers, reason, ex) {
if (handlers && typeof handlers.errorHandler =3D=3D "function") handlers.er=
rorHandler(reason, ex);
else DWREngine._handleError(reason, ex);
};


DWREngine._handleMetaDataWarning =3D function(handlers, reason, ex) {
if (handlers && typeof handlers.warningHandler =3D=3D "function") handlers.=
warningHandler(reason, ex);
else DWREngine._handleWarning(reason, ex);
};








DWREngine._serializeAll =3D function(batch, referto, data, name) {
if (data =3D=3D null) {
batch.map[name] =3D "null:null";
return;
}

switch (typeof data) {
case "boolean":
batch.map[name] =3D "boolean:" + data;
break;
case "number":
batch.map[name] =3D "number:" + data;
break;
case "string":
batch.map[name] =3D "string:" + encodeURIComponent(data);
break;
case "object":
if (data instanceof String) batch.map[name] =3D "String:" + encodeURICompon=
ent(data);
else if (data instanceof Boolean) batch.map[name] =3D "Boolean:" + data;
else if (data instanceof Number) batch.map[name] =3D "Number:" + data;
else if (data instanceof Date) batch.map[name] =3D "Date:" + data.getTime();
else if (data instanceof Array) batch.map[name] =3D DWREngine._serializeArr=
ay(batch, referto, data, name);
else batch.map[name] =3D DWREngine._serializeObject(batch, referto, data, n=
ame);
break;
case "function":

break;
default:
DWREngine._handleWarning("Unexpected type: " + typeof data + ", attempting =
default converter.");
batch.map[name] =3D "default:" + data;
break;
}
};


DWREngine._lookup =3D function(referto, data, name) {
var lookup;

for (var i =3D 0; i < referto.length; i++) {
if (referto[i].data =3D=3D data) {
lookup =3D referto[i];
break;
}
}
if (lookup) return "reference:" + lookup.name;
referto.push({ data:data, name:name });
return null;
};


DWREngine._serializeObject =3D function(batch, referto, data, name) {
var ref =3D DWREngine._lookup(referto, data, name);
if (ref) return ref;



if (data.nodeName && data.nodeType) {
return DWREngine._serializeXml(batch, referto, data, name);
}


var reply =3D "Object:{";
var element;
for (element in data) {
batch.paramCount++;
var childName =3D "c" + DWREngine._batch.map.callCount + "-e" + batch.param=
Count;
DWREngine._serializeAll(batch, referto, data[element], childName);

reply +=3D encodeURIComponent(element) + ":reference:" + childName + ", ";
}

if (reply.substring(reply.length - 2) =3D=3D ", ") {
reply =3D reply.substring(0, reply.length - 2);
}
reply +=3D "}";

return reply;
};


DWREngine._serializeXml =3D function(batch, referto, data, name) {
var ref =3D DWREngine._lookup(referto, data, name);
if (ref) return ref;

var output;
if (window.XMLSerializer) output =3D new XMLSerializer().serializeToString(=
data);
else output =3D data.toXml;

return "XML:" + encodeURIComponent(output);
};


DWREngine._serializeArray =3D function(batch, referto, data, name) {
var ref =3D DWREngine._lookup(referto, data, name);
if (ref) return ref;

var reply =3D "Array:[";
for (var i =3D 0; i < data.length; i++) {
if (i !=3D 0) reply +=3D ",";
batch.paramCount++;
var childName =3D "c" + DWREngine._batch.map.callCount + "-e" + batch.param=
Count;
DWREngine._serializeAll(batch, referto, data[i], childName);
reply +=3D "reference:";
reply +=3D childName;
}
reply +=3D "]";

return reply;
};


DWREngine._unserializeDocument =3D function(xml) {
var dom;
if (window.DOMParser) {
var parser =3D new DOMParser();
dom =3D parser.parseFromString(xml, "text/xml");
if (!dom.documentElement || dom.documentElement.tagName =3D=3D "parsererror=
") {
var message =3D dom.documentElement.firstChild.data;
message +=3D "\n" + dom.documentElement.firstChild.nextSibling.firstChild.d=
ata;
throw message;
}
return dom;
}
else if (window.ActiveXObject) {
dom =3D DWREngine._newActiveXObject(DWREngine._DOMDocument);
dom.loadXML(xml);
return dom;
}
else {
var div =3D document.createElement("div");
div.innerHTML =3D xml;
return div;
}
};





DWREngine._newActiveXObject =3D function(axarray) {
var returnValue;
for (var i =3D 0; i < axarray.length; i++) {
try {
returnValue =3D new ActiveXObject(axarray[i]);
break;
}
catch (ex) {   }
}
return returnValue;
};


if (typeof window.encodeURIComponent =3D=3D=3D 'undefined') {
DWREngine._utf8 =3D function(wide) {
wide =3D "" + wide;
var c;
var s;
var enc =3D "";
var i =3D 0;
while (i < wide.length) {
c =3D wide.charCodeAt(i++);

if (c >=3D 0xDC00 && c < 0xE000) continue;
if (c >=3D 0xD800 && c < 0xDC00) {
if (i >=3D wide.length) continue;
s =3D wide.charCodeAt(i++);
if (s < 0xDC00 || c >=3D 0xDE00) continue;
c =3D ((c - 0xD800) << 10) + (s - 0xDC00) + 0x10000;
}

if (c < 0x80) {
enc +=3D String.fromCharCode(c);
}
else if (c < 0x800) {
enc +=3D String.fromCharCode(0xC0 + (c >> 6), 0x80 + (c & 0x3F));
}
else if (c < 0x10000) {
enc +=3D String.fromCharCode(0xE0 + (c >> 12), 0x80 + (c >> 6 & 0x3F), 0x80=
 + (c & 0x3F));
}
else {
enc +=3D String.fromCharCode(0xF0 + (c >> 18), 0x80 + (c >> 12 & 0x3F), 0x8=
0 + (c >> 6 & 0x3F), 0x80 + (c & 0x3F));
}
}
return enc;
}

DWREngine._hexchars =3D "0123456789ABCDEF";

DWREngine._toHex =3D function(n) {
return DWREngine._hexchars.charAt(n >> 4) + DWREngine._hexchars.charAt(n & =
0xF);
}

DWREngine._okURIchars =3D "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuv=
wxyz0123456789_-";

window.encodeURIComponent =3D function(s)  {
s =3D DWREngine._utf8(s);
var c;
var enc =3D "";
for (var i=3D 0; i<s.length; i++) {
if (DWREngine._okURIchars.indexOf(s.charAt(i)) =3D=3D -1) {
enc +=3D "%" + DWREngine._toHex(s.charCodeAt(i));
}
else {
enc +=3D s.charAt(i);
}
}
return enc;
}
}


if (typeof Array.prototype.splice =3D=3D=3D 'undefined') {
Array.prototype.splice =3D function(ind, cnt)
{
if (arguments.length =3D=3D 0) return ind;
if (typeof ind !=3D "number") ind =3D 0;
if (ind < 0) ind =3D Math.max(0,this.length + ind);
if (ind > this.length) {
if (arguments.length > 2) ind =3D this.length;
else return [];
}
if (arguments.length < 2) cnt =3D this.length-ind;

cnt =3D (typeof cnt =3D=3D "number") ? Math.max(0, cnt) : 0;
removeArray =3D this.slice(ind, ind + cnt);
endArray =3D this.slice(ind + cnt);
this.length =3D ind;

for (var i =3D 2; i < arguments.length; i++) this[this.length] =3D argument=
s[i];
for (i =3D 0; i < endArray.length; i++) this[this.length] =3D endArray[i];

return removeArray;
}
}


if (typeof Array.prototype.shift =3D=3D=3D 'undefined') {
Array.prototype.shift =3D function(str) {
var val =3D this[0];
for (var i =3D 1; i < this.length; ++i) this[i - 1] =3D this[i];
this.length--;
return val;
}
}


if (typeof Array.prototype.unshift =3D=3D=3D 'undefined') {
Array.prototype.unshift =3D function() {
var i =3D unshift.arguments.length;
for (var j =3D this.length - 1; j >=3D 0; --j) this[j + i] =3D this[j];
for (j =3D 0; j < i; ++j) this[j] =3D unshift.arguments[j];
}
}


if (typeof Array.prototype.push =3D=3D=3D 'undefined') {
Array.prototype.push =3D function() {
var sub =3D this.length;
for (var i =3D 0; i < push.arguments.length; ++i) {
this[sub] =3D push.arguments[i];
sub++;
}
}
}


if (typeof Array.prototype.pop =3D=3D=3D 'undefined') {
Array.prototype.pop =3D function() {
var lastElement =3D this[this.length - 1];
this.length--;
return lastElement;
}
}





















function DWRUtil() { }





DWRUtil.onReturn =3D function(event, action) {
if (!event) {
event =3D window.event;
}
if (event && event.keyCode && event.keyCode =3D=3D 13) {
action();
}
};





DWRUtil.selectRange =3D function(ele, start, end) {
var orig =3D ele;
ele =3D $(ele);
if (ele =3D=3D null) {
DWRUtil.debug("selectRange() can't find an element with id: " + orig + ".");
return;
}
if (ele.setSelectionRange) {
ele.setSelectionRange(start, end);
}
else if (ele.createTextRange) {
var range =3D ele.createTextRange();
range.moveStart("character", start);
range.moveEnd("character", end - ele.value.length);
range.select();
}
ele.focus();
};




DWRUtil._getSelection =3D function(ele) {
var orig =3D ele;
ele =3D $(ele);
if (ele =3D=3D null) {
DWRUtil.debug("selectRange() can't find an element with id: " + orig + ".");
return;
}
return ele.value.substring(ele.selectionStart, ele.selectionEnd);





}





var $;
if (!$ && document.getElementById) {
$ =3D function() {
var elements =3D new Array();
for (var i =3D 0; i < arguments.length; i++) {
var element =3D arguments[i];
if (typeof element =3D=3D 'string') {
element =3D document.getElementById(element);
}
if (arguments.length =3D=3D 1) {
return element;
}
elements.push(element);
}
return elements;
}
}
else if (!$ && document.all) {
$ =3D function() {
var elements =3D new Array();
for (var i =3D 0; i < arguments.length; i++) {
var element =3D arguments[i];
if (typeof element =3D=3D 'string') {
element =3D document.all[element];
}
if (arguments.length =3D=3D 1) {
return element;
}
elements.push(element);
}
return elements;
}
}





DWRUtil.toDescriptiveString =3D function(data, level, depth) {
var reply =3D "";
var i =3D 0;
var value;
var obj;
if (level =3D=3D null) level =3D 0;
if (depth =3D=3D null) depth =3D 0;
if (data =3D=3D null) return "null";
if (DWRUtil._isArray(data)) {
if (data.length =3D=3D 0) reply +=3D "[]";
else {
if (level !=3D 0) reply +=3D "[\n";
else reply =3D "[";
for (i =3D 0; i < data.length; i++) {
try {
obj =3D data[i];
if (obj =3D=3D null || typeof obj =3D=3D "function") {
continue;
}
else if (typeof obj =3D=3D "object") {
if (level > 0) value =3D DWRUtil.toDescriptiveString(obj, level - 1, depth =
+ 1);
else value =3D DWRUtil._detailedTypeOf(obj);
}
else {
value =3D "" + obj;
value =3D value.replace(/\/n/g, "\\n");
value =3D value.replace(/\/t/g, "\\t");
}
}
catch (ex) {
value =3D "" + ex;
}
if (level !=3D 0)  {
reply +=3D DWRUtil._indent(level, depth + 2) + value + ", \n";
}
else {
if (value.length > 13) value =3D value.substring(0, 10) + "...";
reply +=3D value + ", ";
if (i > 5) {
reply +=3D "...";
break;
}
}
}
if (level !=3D 0) reply +=3D DWRUtil._indent(level, depth) + "]";
else reply +=3D "]";
}
return reply;
}
if (typeof data =3D=3D "string" || typeof data =3D=3D "number" || DWRUtil._=
isDate(data)) {
return data.toString();
}
if (typeof data =3D=3D "object") {
var typename =3D DWRUtil._detailedTypeOf(data);
if (typename !=3D "Object")  reply =3D typename + " ";
if (level !=3D 0) reply +=3D "{\n";
else reply =3D "{";
var isHtml =3D DWRUtil._isHTMLElement(data);
for (var prop in data) {
if (isHtml) {

if (prop.toUpperCase() =3D=3D prop || prop =3D=3D "title" ||
prop =3D=3D "lang" || prop =3D=3D "dir" || prop =3D=3D "className" ||
prop =3D=3D "form" || prop =3D=3D "name" || prop =3D=3D "prefix" ||
prop =3D=3D "namespaceURI" || prop =3D=3D "nodeType" ||
prop =3D=3D "firstChild" || prop =3D=3D "lastChild" ||
prop.match(/^offset/)) {
continue;
}
}
value =3D "";
try {
obj =3D data[prop];
if (obj =3D=3D null || typeof obj =3D=3D "function") {
continue;
}
else if (typeof obj =3D=3D "object") {
if (level > 0) {
value =3D "\n";
value +=3D DWRUtil._indent(level, depth + 2);
value =3D DWRUtil.toDescriptiveString(obj, level - 1, depth + 1);
}
else {
value =3D DWRUtil._detailedTypeOf(obj);
}
}
else {
value =3D "" + obj;
value =3D value.replace(/\/n/g, "\\n");
value =3D value.replace(/\/t/g, "\\t");
}
}
catch (ex) {
value =3D "" + ex;
}
if (level =3D=3D 0 && value.length > 13) value =3D value.substring(0, 10) +=
 "...";
var propStr =3D prop;
if (propStr.length > 30) propStr =3D propStr.substring(0, 27) + "...";
if (level !=3D 0) reply +=3D DWRUtil._indent(level, depth + 1);
reply +=3D prop + ":" + value + ", ";
if (level !=3D 0) reply +=3D "\n";
i++;
if (level =3D=3D 0 && i > 5) {
reply +=3D "...";
break;
}
}
reply +=3D DWRUtil._indent(level, depth);
reply +=3D "}";
return reply;
}
return data.toString();
};




DWRUtil._indent =3D function(level, depth) {
var reply =3D "";
if (level !=3D 0) {
for (var j =3D 0; j < depth; j++) {
reply +=3D "\u00A0\u00A0";
}
reply +=3D " ";
}
return reply;
};





DWRUtil.useLoadingMessage =3D function(message) {
var loadingMessage;
if (message) loadingMessage =3D message;
else loadingMessage =3D "Loading";
DWREngine.setPreHook(function() {
var disabledZone =3D $('disabledZone');
if (!disabledZone) {
disabledZone =3D document.createElement('div');
disabledZone.setAttribute('id', 'disabledZone');
disabledZone.style.position =3D "absolute";
disabledZone.style.zIndex =3D "1000";
disabledZone.style.left =3D "0px";
disabledZone.style.top =3D "0px";
disabledZone.style.width =3D "100%";
disabledZone.style.height =3D "100%";
document.body.appendChild(disabledZone);
var messageZone =3D document.createElement('div');
messageZone.setAttribute('id', 'messageZone');
messageZone.style.position =3D "absolute";
messageZone.style.top =3D "0px";
messageZone.style.right =3D "0px";
messageZone.style.background =3D "red";
messageZone.style.color =3D "white";
messageZone.style.fontFamily =3D "Arial,Helvetica,sans-serif";
messageZone.style.padding =3D "4px";
disabledZone.appendChild(messageZone);
var text =3D document.createTextNode(loadingMessage);
messageZone.appendChild(text);
}
else {
$('messageZone').innerHTML =3D loadingMessage;
disabledZone.style.visibility =3D 'visible';
}
});
DWREngine.setPostHook(function() {
$('disabledZone').style.visibility =3D 'hidden';
});
}





DWRUtil.setValue =3D function(ele, val, options) {
if (val =3D=3D null) val =3D "";
if (options !=3D null) {
if (options.escapeHtml) {
val =3D val.replace(/&/, "&amp;");
val =3D val.replace(/'/, "&apos;");
val =3D val.replace(/</, "&lt;");
val =3D val.replace(/>/, "&gt;");
}
}

var orig =3D ele;
var nodes, node, i;

ele =3D $(ele);

if (ele =3D=3D null) {
nodes =3D document.getElementsByName(orig);
if (nodes.length >=3D 1) {
ele =3D nodes.item(0);
}
}
if (ele =3D=3D null) {
DWRUtil.debug("setValue() can't find an element with id/name: " + orig + ".=
");
return;
}

if (DWRUtil._isHTMLElement(ele, "select")) {
if (ele.type =3D=3D "select-multiple" && DWRUtil._isArray(val)) {
DWRUtil._selectListItems(ele, val);
}
else {
DWRUtil._selectListItem(ele, val);
}
return;
}

if (DWRUtil._isHTMLElement(ele, "input")) {
if (ele.type =3D=3D "radio") {

if (nodes =3D=3D null) nodes =3D document.getElementsByName(orig);
if (nodes !=3D null && nodes.length > 1) {
for (i =3D 0; i < nodes.length; i++) {
node =3D nodes.item(i);
if (node.type =3D=3D "radio") {
node.checked =3D (node.value =3D=3D val);
}
}
}
else {
ele.checked =3D (val =3D=3D true);
}
}
else if (ele.type =3D=3D "checkbox") {
ele.checked =3D val;
}
else {
ele.value =3D val;
}
return;
}

if (DWRUtil._isHTMLElement(ele, "textarea")) {
ele.value =3D val;
return;
}



if (val.nodeType) {
if (val.nodeType =3D=3D 9  ) {
val =3D val.documentElement;
}

val =3D DWRUtil._importNode(ele.ownerDocument, val, true);
ele.appendChild(val);
return;
}


ele.innerHTML =3D val;
};






DWRUtil._selectListItems =3D function(ele, val) {


var found  =3D false;
var i;
var j;
for (i =3D 0; i < ele.options.length; i++) {
ele.options[i].selected =3D false;
for (j =3D 0; j < val.length; j++) {
if (ele.options[i].value =3D=3D val[j]) {
ele.options[i].selected =3D true;
}
}
}

if (found) return;

for (i =3D 0; i < ele.options.length; i++) {
for (j =3D 0; j < val.length; j++) {
if (ele.options[i].text =3D=3D val[j]) {
ele.options[i].selected =3D true;
}
}
}
};






DWRUtil._selectListItem =3D function(ele, val) {


var found  =3D false;
var i;
for (i =3D 0; i < ele.options.length; i++) {
if (ele.options[i].value =3D=3D val) {
ele.options[i].selected =3D true;
found =3D true;
}
else {
ele.options[i].selected =3D false;
}
}


if (found) return;

for (i =3D 0; i < ele.options.length; i++) {
if (ele.options[i].text =3D=3D val) {
ele.options[i].selected =3D true;
}
else {
ele.options[i].selected =3D false;
}
}
}





DWRUtil.getValue =3D function(ele, options) {
if (options =3D=3D null) {
options =3D {};
}
var orig =3D ele;
ele =3D $(ele);


var nodes =3D document.getElementsByName(orig);
if (ele =3D=3D null && nodes.length >=3D 1) {
ele =3D nodes.item(0);
}
if (ele =3D=3D null) {
DWRUtil.debug("getValue() can't find an element with id/name: " + orig + ".=
");
return "";
}

if (DWRUtil._isHTMLElement(ele, "select")) {


var sel =3D ele.selectedIndex;
if (sel !=3D -1) {
var reply =3D ele.options[sel].value;
if (reply =3D=3D null || reply =3D=3D "") {
reply =3D ele.options[sel].text;
}

return reply;
}
else {
return "";
}
}

if (DWRUtil._isHTMLElement(ele, "input")) {
if (ele.type =3D=3D "radio") {
var node;
for (i =3D 0; i < nodes.length; i++) {
node =3D nodes.item(i);
if (node.type =3D=3D "radio") {
if (node.checked) {
if (nodes.length > 1) return node.value;
else return true;
}
}
}
}
switch (ele.type) {
case "checkbox":
case "check-box":
case "radio":
return ele.checked;
default:
return ele.value;
}
}

if (DWRUtil._isHTMLElement(ele, "textarea")) {
return ele.value;
}

if (options.textContent) {
if (ele.textContent) return ele.textContent;
else if (ele.innerText) return ele.innerText;
}
return ele.innerHTML;
};





DWRUtil.getText =3D function(ele) {
var orig =3D ele;
ele =3D $(ele);
if (ele =3D=3D null) {
DWRUtil.debug("getText() can't find an element with id: " + orig + ".");
return "";
}

if (!DWRUtil._isHTMLElement(ele, "select")) {
DWRUtil.debug("getText() can only be used with select elements. Attempt to =
use: " + DWRUtil._detailedTypeOf(ele) + " from  id: " + orig + ".");
return "";
}



var sel =3D ele.selectedIndex;
if (sel !=3D -1) {
return ele.options[sel].text;
}
else {
return "";
}
};





DWRUtil.setValues =3D function(map) {
for (var property in map) {

if ($(property) !=3D null || document.getElementsByName(property).length >=
=3D 1) {
DWRUtil.setValue(property, map[property]);
}
}
};






DWRUtil.getValues =3D function(data) {
var ele;
if (typeof data =3D=3D "string") ele =3D $(data);
if (DWRUtil._isHTMLElement(data)) ele =3D data;
if (ele !=3D null) {
if (ele.elements =3D=3D null) {
alert("getValues() requires an object or reference to a form element.");
return null;
}
var reply =3D {};
var value;
for (var i =3D 0; i < ele.elements.length; i++) {
if (ele[i].id !=3D null) value =3D ele[i].id;
else if (ele[i].value !=3D null) value =3D ele[i].value;
else value =3D "element" + i;
reply[value] =3D DWRUtil.getValue(ele[i]);
}
return reply;
}
else {
for (var property in data) {

if ($(property) !=3D null || document.getElementsByName(property).length >=
=3D 1) {
data[property] =3D DWRUtil.getValue(property);
}
}
return data;
}
};





DWRUtil.addOptions =3D function(ele, data) {
var orig =3D ele;
ele =3D $(ele);
if (ele =3D=3D null) {
DWRUtil.debug("addOptions() can't find an element with id: " + orig + ".");
return;
}
var useOptions =3D DWRUtil._isHTMLElement(ele, "select");
var useLi =3D DWRUtil._isHTMLElement(ele, ["ul", "ol"]);
if (!useOptions && !useLi) {
DWRUtil.debug("addOptions() can only be used with select/ul/ol elements. At=
tempt to use: " + DWRUtil._detailedTypeOf(ele));
return;
}
if (data =3D=3D null) return;

var text;
var value;
var opt;
var li;
if (DWRUtil._isArray(data)) {

for (var i =3D 0; i < data.length; i++) {
if (useOptions) {
if (arguments[2] !=3D null) {
if (arguments[3] !=3D null) {
text =3D DWRUtil._getValueFrom(data[i], arguments[3]);
value =3D DWRUtil._getValueFrom(data[i], arguments[2]);
}
else {
value =3D DWRUtil._getValueFrom(data[i], arguments[2]);
text =3D value;
}
}
else
{
text =3D DWRUtil._getValueFrom(data[i], arguments[3]);
value =3D text;
}
if (text || value) {
opt =3D new Option(text, value);
ele.options[ele.options.length] =3D opt;
}
}
else {
li =3D document.createElement("li");
value =3D DWRUtil._getValueFrom(data[i], arguments[2]);
if (value !=3D null) {
li.innerHTML =3D value;
ele.appendChild(li);
}
}
}
}
else if (arguments[3] !=3D null) {
for (var prop in data) {
if (!useOptions) {
alert("DWRUtil.addOptions can only create select lists from objects.");
return;
}
value =3D DWRUtil._getValueFrom(data[prop], arguments[2]);
text =3D DWRUtil._getValueFrom(data[prop], arguments[3]);
if (text || value) {
opt =3D new Option(text, value);
ele.options[ele.options.length] =3D opt;
}
}
}
else {
for (var prop in data) {
if (!useOptions) {
DWRUtil.debug("DWRUtil.addOptions can only create select lists from objects=
.");
return;
}
if (typeof data[prop] =3D=3D "function") {

text =3D null;
value =3D null;
}
else if (arguments[2]) {
text =3D prop;
value =3D data[prop];
}
else {
text =3D data[prop];
value =3D prop;
}
if (text || value) {
opt =3D new Option(text, value);
ele.options[ele.options.length] =3D opt;
}
}
}
};




DWRUtil._getValueFrom =3D function(data, method) {
if (method =3D=3D null) return data;
else if (typeof method =3D=3D 'function') return method(data);
else return data[method];
}





DWRUtil.removeAllOptions =3D function(ele) {
var orig =3D ele;
ele =3D $(ele);
if (ele =3D=3D null) {
DWRUtil.debug("removeAllOptions() can't find an element with id: " + orig +=
 ".");
return;
}
var useOptions =3D DWRUtil._isHTMLElement(ele, "select");
var useLi =3D DWRUtil._isHTMLElement(ele, ["ul", "ol"]);
if (!useOptions && !useLi) {
DWRUtil.debug("removeAllOptions() can only be used with select, ol and ul e=
lements. Attempt to use: " + DWRUtil._detailedTypeOf(ele));
return;
}
if (useOptions) {
ele.options.length =3D 0;
}
else {
while (ele.childNodes.length > 0) {
ele.removeChild(ele.firstChild);
}
}
};





DWRUtil.addRows =3D function(ele, data, cellFuncs, options) {
var orig =3D ele;
ele =3D $(ele);
if (ele =3D=3D null) {
DWRUtil.debug("addRows() can't find an element with id: " + orig + ".");
return;
}
if (!DWRUtil._isHTMLElement(ele, ["table", "tbody", "thead", "tfoot"])) {
DWRUtil.debug("addRows() can only be used with table, tbody, thead and tfoo=
t elements. Attempt to use: " + DWRUtil._detailedTypeOf(ele));
return;
}
if (!options) options =3D {};
if (!options.rowCreator) options.rowCreator =3D DWRUtil._defaultRowCreator;
if (!options.cellCreator) options.cellCreator =3D DWRUtil._defaultCellCreat=
or;
var tr, rowNum;
if (DWRUtil._isArray(data)) {
for (rowNum =3D 0; rowNum < data.length; rowNum++) {
options.rowData =3D data[rowNum];
options.rowIndex =3D rowNum;
options.rowNum =3D rowNum;
options.data =3D null;
options.cellNum =3D -1;
tr =3D DWRUtil._addRowInner(cellFuncs, options);
if (tr !=3D null) ele.appendChild(tr);
}
}
else if (typeof data =3D=3D "object") {
rowNum =3D 0;
for (var rowIndex in data) {
options.rowData =3D data[rowIndex];
options.rowIndex =3D rowIndex;
options.rowNum =3D rowNum;
options.data =3D null;
options.cellNum =3D -1;
tr =3D DWRUtil._addRowInner(cellFuncs, options);
if (tr !=3D null) ele.appendChild(tr);
rowNum++;
}
}
};




DWRUtil._addRowInner =3D function(cellFuncs, options) {
var tr =3D options.rowCreator(options);
if (tr =3D=3D null) return null;
for (var cellNum =3D 0; cellNum < cellFuncs.length; cellNum++) {
var func =3D cellFuncs[cellNum];
var reply =3D func(options.rowData, options);
options.data =3D reply;
options.cellNum =3D cellNum;
var td =3D options.cellCreator(options);
if (td !=3D null) {
if (reply !=3D null) {
if (DWRUtil._isHTMLElement(reply)) td.appendChild(reply);
else td.innerHTML =3D reply;
}
tr.appendChild(td);
}
}
return tr;
};




DWRUtil._defaultRowCreator =3D function(options) {
return document.createElement("tr");
};




DWRUtil._defaultCellCreator =3D function(options) {
return document.createElement("td");
};





DWRUtil.removeAllRows =3D function(ele) {
var orig =3D ele;
ele =3D $(ele);
if (ele =3D=3D null) {
DWRUtil.debug("removeAllRows() can't find an element with id: " + orig + ".=
");
return;
}
if (!DWRUtil._isHTMLElement(ele, ["table", "tbody", "thead", "tfoot"])) {
DWRUtil.debug("removeAllRows() can only be used with table, tbody, thead an=
d tfoot elements. Attempt to use: " + DWRUtil._detailedTypeOf(ele));
return;
}
while (ele.childNodes.length > 0) {
ele.removeChild(ele.firstChild);
}
};







DWRUtil._isHTMLElement =3D function(ele, nodeName) {
if (ele =3D=3D null || typeof ele !=3D "object" || ele.nodeName =3D=3D null=
) {
return false;
}

if (nodeName !=3D null) {
var test =3D ele.nodeName.toLowerCase();

if (typeof nodeName =3D=3D "string") {
return test =3D=3D nodeName.toLowerCase();
}

if (DWRUtil._isArray(nodeName)) {
var match =3D false;
for (var i =3D 0; i < nodeName.length && !match; i++) {
if (test =3D=3D nodeName[i].toLowerCase()) {
match =3D  true;
}
}
return match;
}

DWRUtil.debug("DWRUtil._isHTMLElement was passed test node name that is nei=
ther a string or array of strings");
return false;
}

return true;
};




DWRUtil._detailedTypeOf =3D function(x) {
var reply =3D typeof x;
if (reply =3D=3D "object") {
reply =3D Object.prototype.toString.apply(x);
reply =3D reply.substring(8, reply.length-1);
}
return reply;
};




DWRUtil._isArray =3D function(data) {
return (data && data.join) ? true : false;
};




DWRUtil._isDate =3D function(data) {
return (data && data.toUTCString) ? true : false;
};




DWRUtil._importNode =3D function(doc, importedNode, deep) {
var newNode;

if (importedNode.nodeType =3D=3D 1  ) {
newNode =3D doc.createElement(importedNode.nodeName);

for (var i =3D 0; i < importedNode.attributes.length; i++) {
var attr =3D importedNode.attributes[i];
if (attr.nodeValue !=3D null && attr.nodeValue !=3D '') {
newNode.setAttribute(attr.name, attr.nodeValue);
}
}

if (typeof importedNode.style !=3D "undefined") {
newNode.style.cssText =3D importedNode.style.cssText;
}
}
else if (importedNode.nodeType =3D=3D 3  ) {
newNode =3D doc.createTextNode(importedNode.nodeValue);
}

if (deep && importedNode.hasChildNodes()) {
for (i =3D 0; i < importedNode.childNodes.length; i++) {
newNode.appendChild(DWRUtil._importNode(doc, importedNode.childNodes[i], tr=
ue));
}
}

return newNode;
}




DWRUtil.debug =3D function(message) {
alert(message);
}

/*  Prototype JavaScript framework, version 1.4.0_pre11
*  (c) 2005 Sam Stephenson <sam@conio.net>
*
*  THIS FILE IS AUTOMATICALLY GENERATED. When sending patches, please diff
*  against the source tree, available from the Prototype darcs repository.
*
*  Prototype is freely distributable under the terms of an MIT-style licens=
e.
*
*  For details, see the Prototype web site: http://prototype.conio.net/
*
/*-------------------------------------------------------------------------=
-*/

var Prototype =3D {
Version: '1.4.0_pre11',

emptyFunction: function() {},
K: function(x) {return x}
}

var Class =3D {
create: function() {
return function() {
this.initialize.apply(this, arguments);
}
}
}

var Abstract =3D new Object();

Object.extend =3D function(destination, source) {
for (property in source) {
destination[property] =3D source[property];
}
return destination;
}

Object.inspect =3D function(object) {
try {
if (object =3D=3D undefined) return 'undefined';
if (object =3D=3D null) return 'null';
return object.inspect ? object.inspect() : object.toString();
} catch (e) {
if (e instanceof RangeError) return '...';
throw e;
}
}

Function.prototype.bind =3D function(object) {
var __method =3D this;
return function() {
return __method.apply(object, arguments);
}
}

Function.prototype.bindAsEventListener =3D function(object) {
var __method =3D this;
return function(event) {
return __method.call(object, event || window.event);
}
}

Object.extend(Number.prototype, {
toColorPart: function() {
var digits =3D this.toString(16);
if (this < 16) return '0' + digits;
return digits;
},

succ: function() {
return this + 1;
},

times: function(iterator) {
$R(0, this, true).each(iterator);
return this;
}
});

var Try =3D {
these: function() {
var returnValue;

for (var i =3D 0; i < arguments.length; i++) {
var lambda =3D arguments[i];
try {
returnValue =3D lambda();
break;
} catch (e) {}
}

return returnValue;
}
}

/*-------------------------------------------------------------------------=
-*/

var PeriodicalExecuter =3D Class.create();
PeriodicalExecuter.prototype =3D {
initialize: function(callback, frequency) {
this.callback =3D callback;
this.frequency =3D frequency;
this.currentlyExecuting =3D false;

this.registerCallback();
},

registerCallback: function() {
setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
},

onTimerEvent: function() {
if (!this.currentlyExecuting) {
try {
this.currentlyExecuting =3D true;
this.callback();
} finally {
this.currentlyExecuting =3D false;
}
}
}
}

/*-------------------------------------------------------------------------=
-*/

function $() {
var elements =3D new Array();

for (var i =3D 0; i < arguments.length; i++) {
var element =3D arguments[i];
if (typeof element =3D=3D 'string')
element =3D document.getElementById(element);

if (arguments.length =3D=3D 1)
return element;

elements.push(element);
}

return elements;
}

Object.extend(String.prototype, {
stripTags: function() {
return this.replace(/<\/?[^>]+>/gi, '');
},

escapeHTML: function() {
var div =3D document.createElement('div');
var text =3D document.createTextNode(this);
div.appendChild(text);
return div.innerHTML;
},

unescapeHTML: function() {
var div =3D document.createElement('div');
div.innerHTML =3D this.stripTags();
return div.childNodes[0] ? div.childNodes[0].nodeValue : '';
},

toQueryParams: function() {
var pairs =3D this.match(/^\??(.*)$/)[1].split('&');
return pairs.inject({}, function(params, pairString) {
var pair =3D pairString.split('=3D');
params[pair[0]] =3D pair[1];
return params;
});
},

inspect: function() {
return "'" + this.replace('\\', '\\\\').replace("'", '\\\'') + "'";
}
});

String.prototype.parseQuery =3D String.prototype.toQueryParams;


var $break    =3D new Object();
var $continue =3D new Object();

var Enumerable =3D {
each: function(iterator) {
var index =3D 0;
try {
this._each(function(value) {
try {
iterator(value, index++);
} catch (e) {
if (e !=3D $continue) throw e;
}
});
} catch (e) {
if (e !=3D $break) throw e;
}
},

all: function(iterator) {
var result =3D true;
this.each(function(value, index) {
if (!(result &=3D (iterator || Prototype.K)(value, index)))
throw $break;
});
return result;
},

any: function(iterator) {
var result =3D true;
this.each(function(value, index) {
if (result &=3D (iterator || Prototype.K)(value, index))
throw $break;
});
return result;
},

collect: function(iterator) {
var results =3D [];
this.each(function(value, index) {
results.push(iterator(value, index));
});
return results;
},

detect: function (iterator) {
var result;
this.each(function(value, index) {
if (iterator(value, index)) {
result =3D value;
throw $break;
}
});
return result;
},

findAll: function(iterator) {
var results =3D [];
this.each(function(value, index) {
if (iterator(value, index))
results.push(value);
});
return results;
},

grep: function(pattern, iterator) {
var results =3D [];
this.each(function(value, index) {
var stringValue =3D value.toString();
if (stringValue.match(pattern))
results.push((iterator || Prototype.K)(value, index));
})
return results;
},

include: function(object) {
var found =3D false;
this.each(function(value) {
if (value =3D=3D object) {
found =3D true;
throw $break;
}
});
return found;
},

inject: function(memo, iterator) {
this.each(function(value, index) {
memo =3D iterator(memo, value, index);
});
return memo;
},

invoke: function(method) {
var args =3D $A(arguments).slice(1);
return this.collect(function(value) {
return value[method].apply(value, args);
});
},

max: function(iterator) {
var result;
this.each(function(value, index) {
value =3D (iterator || Prototype.K)(value, index);
if (value >=3D (result || value))
result =3D value;
});
return result;
},

min: function(iterator) {
var result;
this.each(function(value, index) {
value =3D (iterator || Prototype.K)(value, index);
if (value <=3D (result || value))
result =3D value;
});
return result;
},

partition: function(iterator) {
var trues =3D [], falses =3D [];
this.each(function(value, index) {
((iterator || Prototype.K)(value, index) ?
trues : falses).push(value);
});
return [trues, falses];
},

pluck: function(property) {
var results =3D [];
this.each(function(value, index) {
results.push(value[property]);
});
return results;
},

reject: function(iterator) {
var results =3D [];
this.each(function(value, index) {
if (!iterator(value, index))
results.push(value);
});
return results;
},

sortBy: function(iterator) {
return this.collect(function(value, index) {
return {value: value, criteria: iterator(value, index)};
}).sort(function(left, right) {
var a =3D left.criteria, b =3D right.criteria;
return a < b ? -1 : a > b ? 1 : 0;
}).pluck('value');
},

toArray: function() {
return this.collect(Prototype.K);
},

zip: function() {
var iterator =3D Prototype.K, args =3D $A(arguments);
if (typeof args.last() =3D=3D 'function')
iterator =3D args.pop();

var collections =3D [this].concat(args).map($A);
return this.map(function(value, index) {
iterator(value =3D collections.pluck(index));
return value;
});
},

inspect: function() {
return '#<Enumerable:' + this.toArray().inspect() + '>';
}
}

Object.extend(Enumerable, {
map:     Enumerable.collect,
find:    Enumerable.detect,
select:  Enumerable.findAll,
member:  Enumerable.include,
entries: Enumerable.toArray
});

var $A =3D Array.from =3D function(iterable) {
if (iterable.toArray) {
return iterable.toArray();
} else {
var results =3D [];
for (var i =3D 0; i < iterable.length; i++)
results.push(iterable[i]);
return results;
}
}

Object.extend(Array.prototype, Enumerable);

Object.extend(Array.prototype, {
_each: function(iterator) {
for (var i =3D 0; i < this.length; i++)
iterator(this[i]);
},

first: function() {
return this[0];
},

last: function() {
return this[this.length - 1];
},

compact: function() {
return this.select(function(value) {
return value !=3D undefined || value !=3D null;
});
},

flatten: function() {
return this.inject([], function(array, value) {
return array.concat(value.constructor =3D=3D Array ?
value.flatten() : [value]);
});
},

without: function() {
var values =3D $A(arguments);
return this.select(function(value) {
return !values.include(value);
});
},

inspect: function() {
return '[' + this.map(Object.inspect).join(', ') + ']';
}
});

var Hash =3D {
_each: function(iterator) {
for (key in this) {
var value =3D this[key];
if (typeof value =3D=3D 'function') continue;

var pair =3D [key, value];
pair.key =3D key;
pair.value =3D value;
iterator(pair);
}
},

keys: function() {
return this.pluck('key');
},

values: function() {
return this.pluck('value');
},

merge: function(hash) {
return $H(hash).inject($H(this), function(mergedHash, pair) {
mergedHash[pair.key] =3D pair.value;
return mergedHash;
});
},

toQueryString: function() {
return this.map(function(pair) {
return pair.map(encodeURIComponent).join('=3D');
}).join('&');
},

inspect: function() {
return '#<Hash:{' + this.map(function(pair) {
return pair.map(Object.inspect).join(': ');
}).join(', ') + '}>';
}
}

function $H(object) {
var hash =3D Object.extend({}, object || {});
Object.extend(hash, Enumerable);
Object.extend(hash, Hash);
return hash;
}

var Range =3D Class.create();
Object.extend(Range.prototype, Enumerable);
Object.extend(Range.prototype, {
initialize: function(start, end, exclusive) {
this.start =3D start;
this.end =3D end;
this.exclusive =3D exclusive;
},

_each: function(iterator) {
var value =3D this.start;
do {
iterator(value);
value =3D value.succ();
} while (this.include(value));
},

include: function(value) {
if (value < this.start)
return false;
if (this.exclusive)
return value < this.end;
return value <=3D this.end;
}
});

var $R =3D function(start, end, exclusive) {
return new Range(start, end, exclusive);
}

var Ajax =3D {
getTransport: function() {
return Try.these(
function() {return new ActiveXObject('Msxml2.XMLHTTP')},
function() {return new ActiveXObject('Microsoft.XMLHTTP')},
function() {return new XMLHttpRequest()}
) || false;
},

activeRequestCount: 0
}

Ajax.Responders =3D {
responders: [],

_each: function(iterator) {
this.responders._each(iterator);
},

register: function(responderToAdd) {
if (!this.include(responderToAdd))
this.responders.push(responderToAdd);
},

unregister: function(responderToRemove) {
this.responders =3D this.responders.without(responderToRemove);
},

dispatch: function(callback, request, transport, json) {
this.each(function(responder) {
if (responder[callback] && typeof responder[callback] =3D=3D 'function') {
try {
responder[callback].apply(responder, [request, transport, json]);
} catch (e) {
}
}
});
}
};

Object.extend(Ajax.Responders, Enumerable);

Ajax.Responders.register({
onCreate: function() {
Ajax.activeRequestCount++;
},

onComplete: function() {
Ajax.activeRequestCount--;
}
});

Ajax.Base =3D function() {};
Ajax.Base.prototype =3D {
setOptions: function(options) {
this.options =3D {
method:       'post',
asynchronous: true,
parameters:   ''
}
Object.extend(this.options, options || {});
},

responseIsSuccess: function() {
return this.transport.status =3D=3D undefined
|| this.transport.status =3D=3D 0
|| (this.transport.status >=3D 200 && this.transport.status < 300);
},

responseIsFailure: function() {
return !this.responseIsSuccess();
}
}

Ajax.Request =3D Class.create();
Ajax.Request.Events =3D
['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];

Ajax.Request.prototype =3D Object.extend(new Ajax.Base(), {
initialize: function(url, options) {
this.transport =3D Ajax.getTransport();
this.setOptions(options);
this.request(url);
},

request: function(url) {
var parameters =3D this.options.parameters || '';
if (parameters.length > 0) parameters +=3D '&_=3D';

try {
this.url =3D url;
if (this.options.method =3D=3D 'get')
this.url +=3D '?' + parameters;

Ajax.Responders.dispatch('onCreate', this, this.transport);

this.transport.open(this.options.method, this.url,
this.options.asynchronous);

if (this.options.asynchronous) {
this.transport.onreadystatechange =3D this.onStateChange.bind(this);
setTimeout((function() {this.respondToReadyState(1)}).bind(this), 10);
}

this.setRequestHeaders();

var body =3D this.options.postBody ? this.options.postBody : parameters;
this.transport.send(this.options.method =3D=3D 'post' ? body : null);

} catch (e) {
}
},

setRequestHeaders: function() {
var requestHeaders =3D
['X-Requested-With', 'XMLHttpRequest',
'X-Prototype-Version', Prototype.Version];

if (this.options.method =3D=3D 'post') {
requestHeaders.push('Content-type',
'application/x-www-form-urlencoded');

/* Force "Connection: close" for Mozilla browsers to work around
* a bug where XMLHttpReqeuest sends an incorrect Content-length
* header. See Mozilla Bugzilla #246651.
*/
if (this.transport.overrideMimeType)
requestHeaders.push('Connection', 'close');
}

if (this.options.requestHeaders)
requestHeaders.push.apply(requestHeaders, this.options.requestHeaders);

for (var i =3D 0; i < requestHeaders.length; i +=3D 2)
this.transport.setRequestHeader(requestHeaders[i], requestHeaders[i+1]);
},

onStateChange: function() {
var readyState =3D this.transport.readyState;
if (readyState !=3D 1)
this.respondToReadyState(this.transport.readyState);
},

evalJSON: function() {
try {
var json =3D this.transport.getResponseHeader('X-JSON'), object;
object =3D eval(json);
return object;
} catch (e) {
}
},

respondToReadyState: function(readyState) {
var event =3D Ajax.Request.Events[readyState];
var transport =3D this.transport, json =3D this.evalJSON();

if (event =3D=3D 'Complete')
(this.options['on' + this.transport.status]
|| this.options['on' + (this.responseIsSuccess() ? 'Success' : 'Failure')]
|| Prototype.emptyFunction)(transport, json);

(this.options['on' + event] || Prototype.emptyFunction)(transport, json);
Ajax.Responders.dispatch('on' + event, this, transport, json);

/* Avoid memory leak in MSIE: clean up the oncomplete event handler */
if (event =3D=3D 'Complete')
this.transport.onreadystatechange =3D Prototype.emptyFunction;
}
});

Ajax.Updater =3D Class.create();
Ajax.Updater.ScriptFragment =3D '(?:<script.*?>)((\n|.)*?)(?:<\/script>)';

Object.extend(Object.extend(Ajax.Updater.prototype, Ajax.Request.prototype)=
, {
initialize: function(container, url, options) {
this.containers =3D {
success: container.success ? $(container.success) : $(container),
failure: container.failure ? $(container.failure) :
(container.success ? null : $(container))
}

this.transport =3D Ajax.getTransport();
this.setOptions(options);

var onComplete =3D this.options.onComplete || Prototype.emptyFunction;
this.options.onComplete =3D (function(transport, object) {
this.updateContent();
onComplete(transport, object);
}).bind(this);

this.request(url);
},

updateContent: function() {
var receiver =3D this.responseIsSuccess() ?
this.containers.success : this.containers.failure;

var match    =3D new RegExp(Ajax.Updater.ScriptFragment, 'img');
var response =3D this.transport.responseText.replace(match, '');
var scripts  =3D this.transport.responseText.match(match);

if (receiver) {
if (this.options.insertion) {
new this.options.insertion(receiver, response);
} else {
receiver.innerHTML =3D response;
}
}

if (this.responseIsSuccess()) {
if (this.onComplete)
setTimeout(this.onComplete.bind(this), 10);
}

if (this.options.evalScripts && scripts) {
match =3D new RegExp(Ajax.Updater.ScriptFragment, 'im');
setTimeout((function() {
for (var i =3D 0; i < scripts.length; i++)
eval(scripts[i].match(match)[1]);
}).bind(this), 10);
}
}
});

Ajax.PeriodicalUpdater =3D Class.create();
Ajax.PeriodicalUpdater.prototype =3D Object.extend(new Ajax.Base(), {
initialize: function(container, url, options) {
this.setOptions(options);
this.onComplete =3D this.options.onComplete;

this.frequency =3D (this.options.frequency || 2);
this.decay =3D 1;

this.updater =3D {};
this.container =3D container;
this.url =3D url;

this.start();
},

start: function() {
this.options.onComplete =3D this.updateComplete.bind(this);
this.onTimerEvent();
},

stop: function() {
this.updater.onComplete =3D undefined;
clearTimeout(this.timer);
(this.onComplete || Ajax.emptyFunction).apply(this, arguments);
},

updateComplete: function(request) {
if (this.options.decay) {
this.decay =3D (request.responseText =3D=3D this.lastText ?
this.decay * this.options.decay : 1);

this.lastText =3D request.responseText;
}
this.timer =3D setTimeout(this.onTimerEvent.bind(this),
this.decay * this.frequency * 1000);
},

onTimerEvent: function() {
this.updater =3D new Ajax.Updater(this.container, this.url, this.options);
}
});

document.getElementsByClassName =3D function(className, parentElement) {
var children =3D (document.body || $(parentElement)).getElementsByTagName('=
*');
return $A(children).inject([], function(elements, child) {
if (Element.hasClassName(child, className))
elements.push(child);
return elements;
});
}

/*-------------------------------------------------------------------------=
-*/

if (!window.Element) {
var Element =3D new Object();
}

Object.extend(Element, {
visible: function(element) {
return $(element).style.display !=3D 'none';
},

toggle: function() {
for (var i =3D 0; i < arguments.length; i++) {
var element =3D $(arguments[i]);
Element[Element.visible(element) ? 'show' : 'hide'](element);
}
},

hide: function() {
for (var i =3D 0; i < arguments.length; i++) {
var element =3D $(arguments[i]);
element.style.display =3D 'none';
}
},

show: function() {
for (var i =3D 0; i < arguments.length; i++) {
var element =3D $(arguments[i]);
element.style.display =3D '';
}
},

remove: function(element) {
element =3D $(element);
element.parentNode.removeChild(element);
},

getHeight: function(element) {
element =3D $(element);
return element.offsetHeight;
},

classNames: function(element) {
return new Element.ClassNames(element);
},

hasClassName: function(element, className) {
if (!(element =3D $(element))) return;
return Element.classNames(element).include(className);
},

addClassName: function(element, className) {
if (!(element =3D $(element))) return;
return Element.classNames(element).add(className);
},

removeClassName: function(element, className) {
if (!(element =3D $(element))) return;
return Element.classNames(element).remove(className);
},

// removes whitespace-only text node children
cleanWhitespace: function(element) {
element =3D $(element);
for (var i =3D 0; i < element.childNodes.length; i++) {
var node =3D element.childNodes[i];
if (node.nodeType =3D=3D 3 && !/\S/.test(node.nodeValue))
Element.remove(node);
}
},

empty: function(element) {
return $(element).innerHTML.match(/^\s*$/);
},

scrollTo: function(element) {
element =3D $(element);
var x =3D element.x ? element.x : element.offsetLeft,
y =3D element.y ? element.y : element.offsetTop;
window.scrollTo(x, y);
}
});

var Toggle =3D new Object();
Toggle.display =3D Element.toggle;

/*-------------------------------------------------------------------------=
-*/

Abstract.Insertion =3D function(adjacency) {
this.adjacency =3D adjacency;
}

Abstract.Insertion.prototype =3D {
initialize: function(element, content) {
this.element =3D $(element);
this.content =3D content;

if (this.adjacency && this.element.insertAdjacentHTML) {
try {
this.element.insertAdjacentHTML(this.adjacency, this.content);
} catch (e) {
if (this.element.tagName.toLowerCase() =3D=3D 'tbody') {
this.fragment =3D this.contentFromAnonymousTable();
this.insertContent();
} else {
throw e;
}
}
} else {
this.range =3D this.element.ownerDocument.createRange();
if (this.initializeRange) this.initializeRange();
this.fragment =3D this.range.createContextualFragment(this.content);
this.insertContent();
}
},

contentFromAnonymousTable: function() {
var div =3D document.createElement('div');
div.innerHTML =3D '<table>' + this.content + '</table>';
return div.childNodes[0].childNodes[0].childNodes[0];
}
}

var Insertion =3D new Object();

Insertion.Before =3D Class.create();
Insertion.Before.prototype =3D Object.extend(new Abstract.Insertion('before=
Begin'), {
initializeRange: function() {
this.range.setStartBefore(this.element);
},

insertContent: function() {
this.element.parentNode.insertBefore(this.fragment, this.element);
}
});

Insertion.Top =3D Class.create();
Insertion.Top.prototype =3D Object.extend(new Abstract.Insertion('afterBegi=
n'), {
initializeRange: function() {
this.range.selectNodeContents(this.element);
this.range.collapse(true);
},

insertContent: function() {
this.element.insertBefore(this.fragment, this.element.firstChild);
}
});

Insertion.Bottom =3D Class.create();
Insertion.Bottom.prototype =3D Object.extend(new Abstract.Insertion('before=
End'), {
initializeRange: function() {
this.range.selectNodeContents(this.element);
this.range.collapse(this.element);
},

insertContent: function() {
this.element.appendChild(this.fragment);
}
});

Insertion.After =3D Class.create();
Insertion.After.prototype =3D Object.extend(new Abstract.Insertion('afterEn=
d'), {
initializeRange: function() {
this.range.setStartAfter(this.element);
},

insertContent: function() {
this.element.parentNode.insertBefore(this.fragment,
this.element.nextSibling);
}
});

/*-------------------------------------------------------------------------=
-*/

Element.ClassNames =3D Class.create();
Element.ClassNames.prototype =3D {
initialize: function(element) {
this.element =3D $(element);
},

_each: function(iterator) {
this.element.className.split(/\s+/).select(function(name) {
return name.length > 0;
})._each(iterator);
},

set: function(className) {
this.element.className =3D className;
},

add: function(classNameToAdd) {
if (this.include(classNameToAdd)) return;
this.set(this.toArray().concat(classNameToAdd).join(' '));
},

remove: function(classNameToRemove) {
if (!this.include(classNameToRemove)) return;
this.set(this.select(function(className) {
return className !=3D classNameToRemove;
}));
},

toString: function() {
return this.toArray().join(' ');
}
}

Object.extend(Element.ClassNames.prototype, Enumerable);

var Field =3D {
clear: function() {
for (var i =3D 0; i < arguments.length; i++)
$(arguments[i]).value =3D '';
},

focus: function(element) {
$(element).focus();
},

present: function() {
for (var i =3D 0; i < arguments.length; i++)
if ($(arguments[i]).value =3D=3D '') return false;
return true;
},

select: function(element) {
$(element).select();
},

activate: function(element) {
$(element).focus();
$(element).select();
}
}

/*-------------------------------------------------------------------------=
-*/

var Form =3D {
serialize: function(form) {
var elements =3D Form.getElements($(form));
var queryComponents =3D new Array();

for (var i =3D 0; i < elements.length; i++) {
var queryComponent =3D Form.Element.serialize(elements[i]);
if (queryComponent)
queryComponents.push(queryComponent);
}

return queryComponents.join('&');
},

getElements: function(form) {
var form =3D $(form);
var elements =3D new Array();

for (tagName in Form.Element.Serializers) {
var tagElements =3D form.getElementsByTagName(tagName);
for (var j =3D 0; j < tagElements.length; j++)
elements.push(tagElements[j]);
}
return elements;
},

getInputs: function(form, typeName, name) {
var form =3D $(form);
var inputs =3D form.getElementsByTagName('input');

if (!typeName && !name)
return inputs;

var matchingInputs =3D new Array();
for (var i =3D 0; i < inputs.length; i++) {
var input =3D inputs[i];
if ((typeName && input.type !=3D typeName) ||
(name && input.name !=3D name))
continue;
matchingInputs.push(input);
}

return matchingInputs;
},

disable: function(form) {
var elements =3D Form.getElements(form);
for (var i =3D 0; i < elements.length; i++) {
var element =3D elements[i];
element.blur();
element.disabled =3D 'true';
}
},

enable: function(form) {
var elements =3D Form.getElements(form);
for (var i =3D 0; i < elements.length; i++) {
var element =3D elements[i];
element.disabled =3D '';
}
},

focusFirstElement: function(form) {
var form =3D $(form);
var elements =3D Form.getElements(form);
for (var i =3D 0; i < elements.length; i++) {
var element =3D elements[i];
if (element.type !=3D 'hidden' && !element.disabled) {
Field.activate(element);
break;
}
}
},

reset: function(form) {
$(form).reset();
}
}

Form.Element =3D {
serialize: function(element) {
var element =3D $(element);
var method =3D element.tagName.toLowerCase();
var parameter =3D Form.Element.Serializers[method](element);

if (parameter)
return encodeURIComponent(parameter[0]) + '=3D' +
encodeURIComponent(parameter[1]);
},

getValue: function(element) {
var element =3D $(element);
var method =3D element.tagName.toLowerCase();
var parameter =3D Form.Element.Serializers[method](element);

if (parameter)
return parameter[1];
}
}

Form.Element.Serializers =3D {
input: function(element) {
switch (element.type.toLowerCase()) {
case 'submit':
case 'hidden':
case 'password':
case 'text':
return Form.Element.Serializers.textarea(element);
case 'checkbox':
case 'radio':
return Form.Element.Serializers.inputSelector(element);
}
return false;
},

inputSelector: function(element) {
if (element.checked)
return [element.name, element.value];
},

textarea: function(element) {
return [element.name, element.value];
},

select: function(element) {
return Form.Element.Serializers[element.type =3D=3D 'select-one' ?
'selectOne' : 'selectMany'](element);
},

selectOne: function(element) {
var value =3D '', opt, index =3D element.selectedIndex;
if (index >=3D 0) {
opt =3D element.options[index];
value =3D opt.value;
if (!value && !('value' in opt))
value =3D opt.text;
}
return [element.name, value];
},

selectMany: function(element) {
var value =3D new Array();
for (var i =3D 0; i < element.length; i++) {
var opt =3D element.options[i];
if (opt.selected) {
var optValue =3D opt.value;
if (!optValue && !('value' in opt))
optValue =3D opt.text;
value.push(optValue);
}
}
return [element.name, value];
}
}

/*-------------------------------------------------------------------------=
-*/

var $F =3D Form.Element.getValue;

/*-------------------------------------------------------------------------=
-*/

Abstract.TimedObserver =3D function() {}
Abstract.TimedObserver.prototype =3D {
initialize: function(element, frequency, callback) {
this.frequency =3D frequency;
this.element   =3D $(element);
this.callback  =3D callback;

this.lastValue =3D this.getValue();
this.registerCallback();
},

registerCallback: function() {
setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
},

onTimerEvent: function() {
var value =3D this.getValue();
if (this.lastValue !=3D value) {
this.callback(this.element, value);
this.lastValue =3D value;
}
}
}

Form.Element.Observer =3D Class.create();
Form.Element.Observer.prototype =3D Object.extend(new Abstract.TimedObserve=
r(), {
getValue: function() {
return Form.Element.getValue(this.element);
}
});

Form.Observer =3D Class.create();
Form.Observer.prototype =3D Object.extend(new Abstract.TimedObserver(), {
getValue: function() {
return Form.serialize(this.element);
}
});

/*-------------------------------------------------------------------------=
-*/

Abstract.EventObserver =3D function() {}
Abstract.EventObserver.prototype =3D {
initialize: function(element, callback) {
this.element  =3D $(element);
this.callback =3D callback;

this.lastValue =3D this.getValue();
if (this.element.tagName.toLowerCase() =3D=3D 'form')
this.registerFormCallbacks();
else
this.registerCallback(this.element);
},

onElementEvent: function() {
var value =3D this.getValue();
if (this.lastValue !=3D value) {
this.callback(this.element, value);
this.lastValue =3D value;
}
},

registerFormCallbacks: function() {
var elements =3D Form.getElements(this.element);
for (var i =3D 0; i < elements.length; i++)
this.registerCallback(elements[i]);
},

registerCallback: function(element) {
if (element.type) {
switch (element.type.toLowerCase()) {
case 'checkbox':
case 'radio':
element.target =3D this;
element.prev_onclick =3D element.onclick || Prototype.emptyFunction;
element.onclick =3D function() {
this.prev_onclick();
this.target.onElementEvent();
}
break;
case 'password':
case 'text':
case 'textarea':
case 'select-one':
case 'select-multiple':
element.target =3D this;
element.prev_onchange =3D element.onchange || Prototype.emptyFunction;
element.onchange =3D function() {
this.prev_onchange();
this.target.onElementEvent();
}
break;
}
}
}
}

Form.Element.EventObserver =3D Class.create();
Form.Element.EventObserver.prototype =3D Object.extend(new Abstract.EventOb=
server(), {
getValue: function() {
return Form.Element.getValue(this.element);
}
});

Form.EventObserver =3D Class.create();
Form.EventObserver.prototype =3D Object.extend(new Abstract.EventObserver()=
, {
getValue: function() {
return Form.serialize(this.element);
}
});


if (!window.Event) {
var Event =3D new Object();
}

Object.extend(Event, {
KEY_BACKSPACE: 8,
KEY_TAB:       9,
KEY_RETURN:   13,
KEY_ESC:      27,
KEY_LEFT:     37,
KEY_UP:       38,
KEY_RIGHT:    39,
KEY_DOWN:     40,
KEY_DELETE:   46,

element: function(event) {
return event.target || event.srcElement;
},

isLeftClick: function(event) {
return (((event.which) && (event.which =3D=3D 1)) ||
((event.button) && (event.button =3D=3D 1)));
},

pointerX: function(event) {
return event.pageX || (event.clientX +
(document.documentElement.scrollLeft || document.body.scrollLeft));
},

pointerY: function(event) {
return event.pageY || (event.clientY +
(document.documentElement.scrollTop || document.body.scrollTop));
},

stop: function(event) {
if (event.preventDefault) {
event.preventDefault();
event.stopPropagation();
} else {
event.returnValue =3D false;
event.cancelBubble =3D true;
}
},

// find the first node with the given tagName, starting from the
// node the event was triggered on; traverses the DOM upwards
findElement: function(event, tagName) {
var element =3D Event.element(event);
while (element.parentNode && (!element.tagName ||
(element.tagName.toUpperCase() !=3D tagName.toUpperCase())))
element =3D element.parentNode;
return element;
},

observers: false,

_observeAndCache: function(element, name, observer, useCapture) {
if (!this.observers) this.observers =3D [];
if (element.addEventListener) {
this.observers.push([element, name, observer, useCapture]);
element.addEventListener(name, observer, useCapture);
} else if (element.attachEvent) {
this.observers.push([element, name, observer, useCapture]);
element.attachEvent('on' + name, observer);
}
},

unloadCache: function() {
if (!Event.observers) return;
for (var i =3D 0; i < Event.observers.length; i++) {
Event.stopObserving.apply(this, Event.observers[i]);
Event.observers[i][0] =3D null;
}
Event.observers =3D false;
},

observe: function(element, name, observer, useCapture) {
var element =3D $(element);
useCapture =3D useCapture || false;

if (name =3D=3D 'keypress' &&
(navigator.appVersion.match(/Konqueror|Safari|KHTML/)
|| element.attachEvent))
name =3D 'keydown';

this._observeAndCache(element, name, observer, useCapture);
},

stopObserving: function(element, name, observer, useCapture) {
var element =3D $(element);
useCapture =3D useCapture || false;

if (name =3D=3D 'keypress' &&
(navigator.appVersion.match(/Konqueror|Safari|KHTML/)
|| element.detachEvent))
name =3D 'keydown';

if (element.removeEventListener) {
element.removeEventListener(name, observer, useCapture);
} else if (element.detachEvent) {
element.detachEvent('on' + name, observer);
}
}
});

/* prevent memory leaks in IE */
Event.observe(window, 'unload', Event.unloadCache, false);

var Position =3D {

// set to true if needed, warning: firefox performance problems
// NOT neeeded for page scrolling, only if draggable contained in
// scrollable elements
includeScrollOffsets: false,

// must be called before calling withinIncludingScrolloffset, every time the
// page is scrolled
prepare: function() {
this.deltaX =3D  window.pageXOffset
|| document.documentElement.scrollLeft
|| document.body.scrollLeft
|| 0;
this.deltaY =3D  window.pageYOffset
|| document.documentElement.scrollTop
|| document.body.scrollTop
|| 0;
},

realOffset: function(element) {
var valueT =3D 0, valueL =3D 0;
do {
valueT +=3D element.scrollTop  || 0;
valueL +=3D element.scrollLeft || 0;
element =3D element.parentNode;
} while (element);
return [valueL, valueT];
},

cumulativeOffset: function(element) {
var valueT =3D 0, valueL =3D 0;
do {
valueT +=3D element.offsetTop  || 0;
valueL +=3D element.offsetLeft || 0;
element =3D element.offsetParent;
} while (element);
return [valueL, valueT];
},

// caches x/y coordinate pair to use with overlap
within: function(element, x, y) {
if (this.includeScrollOffsets)
return this.withinIncludingScrolloffsets(element, x, y);
this.xcomp =3D x;
this.ycomp =3D y;
this.offset =3D this.cumulativeOffset(element);

return (y >=3D this.offset[1] &&
y <  this.offset[1] + element.offsetHeight &&
x >=3D this.offset[0] &&
x <  this.offset[0] + element.offsetWidth);
},

withinIncludingScrolloffsets: function(element, x, y) {
var offsetcache =3D this.realOffset(element);

this.xcomp =3D x + offsetcache[0] - this.deltaX;
this.ycomp =3D y + offsetcache[1] - this.deltaY;
this.offset =3D this.cumulativeOffset(element);

return (this.ycomp >=3D this.offset[1] &&
this.ycomp <  this.offset[1] + element.offsetHeight &&
this.xcomp >=3D this.offset[0] &&
this.xcomp <  this.offset[0] + element.offsetWidth);
},

// within must be called directly before
overlap: function(mode, element) {
if (!mode) return 0;
if (mode =3D=3D 'vertical')
return ((this.offset[1] + element.offsetHeight) - this.ycomp) /
element.offsetHeight;
if (mode =3D=3D 'horizontal')
return ((this.offset[0] + element.offsetWidth) - this.xcomp) /
element.offsetWidth;
},

clone: function(source, target) {
source =3D $(source);
target =3D $(target);
target.style.position =3D 'absolute';
var offsets =3D this.cumulativeOffset(source);
target.style.top    =3D offsets[1] + 'px';
target.style.left   =3D offsets[0] + 'px';
target.style.width  =3D source.offsetWidth + 'px';
target.style.height =3D source.offsetHeight + 'px';
}
}
// Copyright (c) 2005 Thomas Fuchs (http://script.aculo.us, http://mir.acul=
o.us)
//
// See scriptaculous.js for full license.


Object.debug =3D function(obj) {
var info =3D [];

if(typeof obj in ["string","number"]) {
return obj;
} else {
for(property in obj)
if(typeof obj[property]!=3D"function")
info.push(property + ' =3D> ' +
(typeof obj[property] =3D=3D "string" ?
'"' + obj[property] + '"' :
obj[property]));
}

return ("'" + obj + "' #" + typeof obj +
": {" + info.join(", ") + "}");
}


String.prototype.toArray =3D function() {
var results =3D [];
for (var i =3D 0; i < this.length; i++)
results.push(this.charAt(i));
return results;
}

/*-------------------------------------------------------------------------=
-*/

var Builder =3D {
NODEMAP: {
AREA: 'map',
CAPTION: 'table',
COL: 'table',
COLGROUP: 'table',
LEGEND: 'fieldset',
OPTGROUP: 'select',
OPTION: 'select',
PARAM: 'object',
TBODY: 'table',
TD: 'table',
TFOOT: 'table',
TH: 'table',
THEAD: 'table',
TR: 'table'
},
// note: For Firefox < 1.5, OPTION and OPTGROUP tags are currently broken,
//       due to a Firefox bug
node: function(elementName) {
elementName =3D elementName.toUpperCase();

// try innerHTML approach
var parentTag =3D this.NODEMAP[elementName] || 'div';
var parentElement =3D document.createElement(parentTag);
parentElement.innerHTML =3D "<" + elementName + "></" + elementName + ">";
var element =3D parentElement.firstChild || null;

// see if browser added wrapping tags
if(element && (element.tagName !=3D elementName))
element =3D element.getElementsByTagName(elementName)[0];

// fallback to createElement approach
if(!element) element =3D document.createElement(elementName);

// abort if nothing could be created
if(!element) return;

// attributes (or text)
if(arguments[1])
if(this._isStringOrNumber(arguments[1]) ||
(arguments[1] instanceof Array)) {
this._children(element, arguments[1]);
} else {
var attrs =3D this._attributes(arguments[1]);
if(attrs.length) {
parentElement.innerHTML =3D "<" +elementName + " " +
attrs + "></" + elementName + ">";
element =3D parentElement.firstChild || null;
// workaround firefox 1.0.X bug
if(!element) {
element =3D document.createElement(elementName);
for(attr in arguments[1])
element[attr =3D=3D 'class' ? 'className' : attr] =3D arguments[1][attr];
}
if(element.tagName !=3D elementName)
element =3D parentElement.getElementsByTagName(elementName)[0];
}
}

// text, or array of children
if(arguments[2])
this._children(element, arguments[2]);

return element;
},
_text: function(text) {
return document.createTextNode(text);
},
_attributes: function(attributes) {
var attrs =3D [];
for(attribute in attributes)
attrs.push((attribute=3D=3D'className' ? 'class' : attribute) +
'=3D"' + attributes[attribute].toString().escapeHTML() + '"');
return attrs.join(" ");
},
_children: function(element, children) {
if(typeof children=3D=3D'object') { // array can hold nodes and text
children.flatten().each( function(e) {
if(typeof e=3D=3D'object')
element.appendChild(e)
else
if(Builder._isStringOrNumber(e))
element.appendChild(Builder._text(e));
});
} else
if(Builder._isStringOrNumber(children))
element.appendChild(Builder._text(children));
},
_isStringOrNumber: function(param) {
return(typeof param=3D=3D'string' || typeof param=3D=3D'number');
}
}

/* ------------- element ext -------------- */

// adapted from http://dhtmlkitchen.com/learn/js/setstyle/index4.jsp
// note: Safari return null on elements with display:none; see http://bugzi=
lla.opendarwin.org/show_bug.cgi?id=3D4125
// instead of "auto" values returns null so it's easier to use with || cons=
tructs

String.prototype.camelize =3D function() {
var oStringList =3D this.split('-');
if(oStringList.length =3D=3D 1)
return oStringList[0];
var ret =3D this.indexOf("-") =3D=3D 0 ?
oStringList[0].charAt(0).toUpperCase() + oStringList[0].substring(1) : oStr=
ingList[0];
for(var i =3D 1, len =3D oStringList.length; i < len; i++){
var s =3D oStringList[i];
ret +=3D s.charAt(0).toUpperCase() + s.substring(1)
}
return ret;
}

Element.getStyle =3D function(element, style) {
element =3D $(element);
var value =3D element.style[style.camelize()];
if(!value)
if(document.defaultView && document.defaultView.getComputedStyle) {
var css =3D document.defaultView.getComputedStyle(element, null);
value =3D (css!=3Dnull) ? css.getPropertyValue(style) : null;
} else if(element.currentStyle) {
value =3D element.currentStyle[style.camelize()];
}

// If top, left, bottom, or right values have been queried, return "auto" f=
or consistency resaons
// if position is "static", as Opera (and others?) returns the pixel values=
 relative to root element
// (or positioning context?)
if (window.opera && (style =3D=3D "left" || style =3D=3D "top" || style =3D=
=3D "right" || style =3D=3D "bottom"))
if (Element.getStyle(element, "position") =3D=3D "static") value =3D "auto";

if(value=3D=3D'auto') value =3D null;
return value;
}

// converts rgb() and #xxx to #xxxxxx format,
// returns self (or first argument) if not convertable
String.prototype.parseColor =3D function() {
color =3D "#";
if(this.slice(0,4) =3D=3D "rgb(") {
var cols =3D this.slice(4,this.length-1).split(',');
var i=3D0; do { color +=3D parseInt(cols[i]).toColorPart() } while (++i<3);
} else {
if(this.slice(0,1) =3D=3D '#') {
if(this.length=3D=3D4) for(var i=3D1;i<4;i++) color +=3D (this.charAt(i) + =
this.charAt(i)).toLowerCase();
if(this.length=3D=3D7) color =3D this.toLowerCase();
}
}
return(color.length=3D=3D7 ? color : (arguments[0] || this));
}

Element.makePositioned =3D function(element) {
element =3D $(element);
var pos =3D Element.getStyle(element, 'position');
if(pos =3D=3D'static' || !pos) {
element._madePositioned =3D true;
element.style.position =3D "relative";
// Opera returns the offset relative to the positioning context, when an el=
ement is position relative
// but top and left have not been defined
if (window.opera){
element.style.top =3D 0;
element.style.left =3D 0;
}
}
}

Element.undoPositioned =3D function(element) {
element =3D $(element);
if(typeof element._madePositioned !=3D "undefined"){
element._madePositioned =3D undefined;
element.style.position =3D "";
element.style.top =3D "";
element.style.left =3D "";
element.style.bottom =3D "";
element.style.right =3D "";
}
}

Element.makeClipping =3D function(element) {
element =3D $(element);
if (typeof element._overflow !=3D 'undefined') return;
element._overflow =3D element.style.overflow;
if((Element.getStyle(element, 'overflow') || 'visible') !=3D 'hidden') elem=
ent.style.overflow =3D 'hidden';
}

Element.undoClipping =3D function(element) {
element =3D $(element);
if (typeof element._overflow =3D=3D 'undefined') return;
element.style.overflow =3D element._overflow;
element._overflow =3D undefined;
}

Element.collectTextNodesIgnoreClass =3D function(element, ignoreclass) {
var children =3D $(element).childNodes;
var text     =3D "";
var classtest =3D new RegExp("^([^ ]+ )*" + ignoreclass+ "( [^ ]+)*$","i");

for (var i =3D 0; i < children.length; i++) {
if(children[i].nodeType=3D=3D3) {
text+=3Dchildren[i].nodeValue;
} else {
if((!children[i].className.match(classtest)) && children[i].hasChildNodes())
text +=3D Element.collectTextNodesIgnoreClass(children[i], ignoreclass);
}
}

return text;
}

Element.setContentZoom =3D function(element, percent) {
element =3D $(element);
element.style.fontSize =3D (percent/100) + "em";
if(navigator.appVersion.indexOf('AppleWebKit')>0) window.scrollBy(0,0);
}

Element.getOpacity =3D function(element){
var opacity;
if (opacity =3D Element.getStyle(element, "opacity"))
return parseFloat(opacity);
if (opacity =3D (Element.getStyle(element, "filter") || '').match(/alpha\(o=
pacity=3D(.*)\)/))
if(opacity[1]) return parseFloat(opacity[1]) / 100;
return 1.0;
}

Element.setOpacity =3D function(element, value){
element=3D $(element);
var els =3D element.style;
if (value =3D=3D 1){
els.opacity =3D '0.999999';
if(/MSIE/.test(navigator.userAgent))
els.filter =3D Element.getStyle(element,'filter').replace(/alpha\([^\)]*\)/=
gi,'');
} else {
if(value < 0.00001) value =3D 0;
els.opacity =3D value;
if(/MSIE/.test(navigator.userAgent))
els.filter =3D Element.getStyle(element,'filter').replace(/alpha\([^\)]*\)/=
gi,'') +
"alpha(opacity=3D"+value*100+")";
}
}

Element.getInlineOpacity =3D function(element){
element=3D $(element);
var op;
op =3D element.style.opacity;
if (typeof op !=3D "undefined" && op !=3D "") return op;
return "";
}

Element.setInlineOpacity =3D function(element, value){
element=3D $(element);
var els =3D element.style;
els.opacity =3D value;
}

Element.getDimensions =3D function(element){
element =3D $(element);
// All *Width and *Height properties give 0 on elements with display "none",
// so enable the element temporarily
if (Element.getStyle(element,'display') =3D=3D "none"){
var els =3D element.style;
var originalVisibility =3D els.visibility;
var originalPosition =3D els.position;
els.visibility =3D "hidden";
els.position =3D "absolute";
els.display =3D "";
var originalWidth =3D element.clientWidth;
var originalHeight =3D element.clientHeight;
els.display =3D "none";
els.position =3D originalPosition;
els.visibility =3D originalVisibility;
return {width: originalWidth, height: originalHeight};
}

return {width: element.offsetWidth, height: element.offsetHeight};
}

/*-------------------------------------------------------------------------=
-*/

Position.positionedOffset =3D function(element) {
var valueT =3D 0, valueL =3D 0;
do {
valueT +=3D element.offsetTop  || 0;
valueL +=3D element.offsetLeft || 0;
element =3D element.offsetParent;
if (element) {
p =3D Element.getStyle(element,'position');
if(p =3D=3D 'relative' || p =3D=3D 'absolute') break;
}
} while (element);
return [valueL, valueT];
}

// Safari returns margins on body which is incorrect if the child is absolu=
tely positioned.
// for performance reasons, we create a specialized version of Position.cum=
ulativeOffset for
// KHTML/WebKit only

if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)) {
Position.cumulativeOffset =3D function(element) {
var valueT =3D 0, valueL =3D 0;
do {
valueT +=3D element.offsetTop  || 0;
valueL +=3D element.offsetLeft || 0;

if (element.offsetParent=3D=3Ddocument.body)
if (Element.getStyle(element,'position')=3D=3D'absolute') break;

element =3D element.offsetParent;
} while (element);
return [valueL, valueT];
}
}

Position.page =3D function(forElement) {
var valueT =3D 0, valueL =3D 0;

var element =3D forElement;
do {
valueT +=3D element.offsetTop  || 0;
valueL +=3D element.offsetLeft || 0;

// Safari fix
if (element.offsetParent=3D=3Ddocument.body)
if (Element.getStyle(element,'position')=3D=3D'absolute') break;

} while (element =3D element.offsetParent);

element =3D forElement;
do {
valueT -=3D element.scrollTop  || 0;
valueL -=3D element.scrollLeft || 0;
} while (element =3D element.parentNode);

return [valueL, valueT];
}

// elements with display:none don't return an offsetParent,
// fall back to  manual calculation
Position.offsetParent =3D function(element) {
if(element.offsetParent) return element.offsetParent;
if(element =3D=3D document.body) return element;

while ((element =3D element.parentNode) && element !=3D document.body)
if (Element.getStyle(element,'position')!=3D'static')
return element;

return document.body;
}

Position.clone =3D function(source, target) {
var options =3D Object.extend({
setLeft:    true,
setTop:     true,
setWidth:   true,
setHeight:  true,
offsetTop:  0,
offsetLeft: 0
}, arguments[2] || {})

// find page position of source
source =3D $(source);
var p =3D Position.page(source);

// find coordinate system to use
target =3D $(target);
var delta =3D [0, 0];
var parent =3D null;
// delta [0,0] will do fine with position: fixed elements,
// position:absolute needs offsetParent deltas
if (Element.getStyle(target,'position') =3D=3D 'absolute') {
parent =3D Position.offsetParent(target);
delta =3D Position.page(parent);
}

// correct by body offsets (fixes Safari)
if (parent=3D=3Ddocument.body) {
delta[0] -=3D document.body.offsetLeft;
delta[1] -=3D document.body.offsetTop;
}

// set position
if(options.setLeft)   target.style.left  =3D (p[0] - delta[0] + options.off=
setLeft) + "px";
if(options.setTop)    target.style.top   =3D (p[1] - delta[1] + options.off=
setTop) + "px";
if(options.setWidth)  target.style.width =3D source.offsetWidth + "px";
if(options.setHeight) target.style.height =3D source.offsetHeight + "px";
}

Position.absolutize =3D function(element) {
element =3D $(element);
if(element.style.position=3D=3D'absolute') return;
Position.prepare();

var offsets =3D Position.positionedOffset(element);
var top     =3D offsets[1];
var left    =3D offsets[0];
var width   =3D element.clientWidth;
var height  =3D element.clientHeight;

element._originalLeft   =3D left - parseFloat(element.style.left  || 0);
element._originalTop    =3D top  - parseFloat(element.style.top || 0);
element._originalWidth  =3D element.style.width;
element._originalHeight =3D element.style.height;

element.style.position =3D 'absolute';
element.style.top    =3D top + 'px';;
element.style.left   =3D left + 'px';;
element.style.width  =3D width + 'px';;
element.style.height =3D height + 'px';;
}

Position.relativize =3D function(element) {
element =3D $(element);
if(element.style.position=3D=3D'relative') return;
Position.prepare();

element.style.position =3D 'relative';
var top  =3D parseFloat(element.style.top  || 0) - (element._originalTop ||=
 0);
var left =3D parseFloat(element.style.left || 0) - (element._originalLeft |=
| 0);

element.style.top    =3D top + 'px';
element.style.left   =3D left + 'px';
element.style.height =3D element._originalHeight;
element.style.width  =3D element._originalWidth;
}

/*-------------------------------------------------------------------------=
-*/

Element.Class =3D {
// Element.toggleClass(element, className) toggles the class being on/off
// Element.toggleClass(element, className1, className2) toggles between bot=
h classes,
//   defaulting to className1 if neither exist
toggle: function(element, className) {
if(Element.Class.has(element, className)) {
Element.Class.remove(element, className);
if(arguments.length =3D=3D 3) Element.Class.add(element, arguments[2]);
} else {
Element.Class.add(element, className);
if(arguments.length =3D=3D 3) Element.Class.remove(element, arguments[2]);
}
},

// gets space-delimited classnames of an element as an array
get: function(element) {
return $(element).className.split(' ');
},

// functions adapted from original functions by Gavin Kistner
remove: function(element) {
element =3D $(element);
var removeClasses =3D arguments;
$R(1,arguments.length-1).each( function(index) {
element.className =3D
element.className.split(' ').reject(
function(klass) { return (klass =3D=3D removeClasses[index]) } ).join(' ');
});
},

add: function(element) {
element =3D $(element);
for(var i =3D 1; i < arguments.length; i++) {
Element.Class.remove(element, arguments[i]);
element.className +=3D (element.className.length > 0 ? ' ' : '') + argument=
s[i];
}
},

// returns true if all given classes exist in said element
has: function(element) {
element =3D $(element);
if(!element || !element.className) return false;
var regEx;
for(var i =3D 1; i < arguments.length; i++) {
if((typeof arguments[i] =3D=3D 'object') &&
(arguments[i].constructor =3D=3D Array)) {
for(var j =3D 0; j < arguments[i].length; j++) {
regEx =3D new RegExp("(^|\\s)" + arguments[i][j] + "(\\s|$)");
if(!regEx.test(element.className)) return false;
}
} else {
regEx =3D new RegExp("(^|\\s)" + arguments[i] + "(\\s|$)");
if(!regEx.test(element.className)) return false;
}
}
return true;
},

// expects arrays of strings and/or strings as optional paramters
// Element.Class.has_any(element, ['classA','classB','classC'], 'classD')
has_any: function(element) {
element =3D $(element);
if(!element || !element.className) return false;
var regEx;
for(var i =3D 1; i < arguments.length; i++) {
if((typeof arguments[i] =3D=3D 'object') &&
(arguments[i].constructor =3D=3D Array)) {
for(var j =3D 0; j < arguments[i].length; j++) {
regEx =3D new RegExp("(^|\\s)" + arguments[i][j] + "(\\s|$)");
if(regEx.test(element.className)) return true;
}
} else {
regEx =3D new RegExp("(^|\\s)" + arguments[i] + "(\\s|$)");
if(regEx.test(element.className)) return true;
}
}
return false;
},

childrenWith: function(element, className) {
var children =3D $(element).getElementsByTagName('*');
var elements =3D new Array();

for (var i =3D 0; i < children.length; i++)
if (Element.Class.has(children[i], className))
elements.push(children[i]);

return elements;
}
}// Copyright (c) 2005 Thomas Fuchs (http://script.aculo.us, http://mir.acu=
lo.us)
// Contributors:
//  Justin Palmer (http://encytemedia.com/)
//  Mark Pilgrim (http://diveintomark.org/)
//  Martin Bialasinki
//
// See scriptaculous.js for full license.

var Effect =3D {
tagifyText: function(element) {
var tagifyStyle =3D "position:relative";
if(/MSIE/.test(navigator.userAgent)) tagifyStyle +=3D ";zoom:1";
element =3D $(element);
$A(element.childNodes).each( function(child) {
if(child.nodeType=3D=3D3) {
child.nodeValue.toArray().each( function(character) {
element.insertBefore(
Builder.node('span',{style: tagifyStyle},
character =3D=3D " " ? String.fromCharCode(160) : character),
child);
});
Element.remove(child);
}
});
},
multiple: function(element, effect) {
var elements;
if(((typeof element =3D=3D 'object') ||
(typeof element =3D=3D 'function')) &&
(element.length))
elements =3D element;
else
elements =3D $(element).childNodes;

var options =3D Object.extend({
speed: 0.1,
delay: 0.0
}, arguments[2] || {});
var speed =3D options.speed;
var delay =3D options.delay;

$A(elements).each( function(element, index) {
new effect(element, Object.extend(options, { delay: delay + index * speed }=
));
});
}
};

var Effect2 =3D Effect; // deprecated

/* ------------- transitions ------------- */

Effect.Transitions =3D {}

Effect.Transitions.linear =3D function(pos) {
return pos;
}
Effect.Transitions.sinoidal =3D function(pos) {
return (-Math.cos(pos*Math.PI)/2) + 0.5;
}
Effect.Transitions.reverse  =3D function(pos) {
return 1-pos;
}
Effect.Transitions.flicker =3D function(pos) {
return ((-Math.cos(pos*Math.PI)/4) + 0.75) + Math.random()/4;
}
Effect.Transitions.wobble =3D function(pos) {
return (-Math.cos(pos*Math.PI*(9*pos))/2) + 0.5;
}
Effect.Transitions.pulse =3D function(pos) {
return (Math.floor(pos*10) % 2 =3D=3D 0 ?
(pos*10-Math.floor(pos*10)) : 1-(pos*10-Math.floor(pos*10)));
}
Effect.Transitions.none =3D function(pos) {
return 0;
}
Effect.Transitions.full =3D function(pos) {
return 1;
}

/* ------------- core effects ------------- */

Effect.Queue =3D {
effects:  [],
interval: null,
add: function(effect) {
var timestamp =3D new Date().getTime();

switch(effect.options.queue) {
case 'front':
// move unstarted effects after this effect
this.effects.findAll(function(e){ return e.state=3D=3D'idle' }).each( funct=
ion(e) {
e.startOn  +=3D effect.finishOn;
e.finishOn +=3D effect.finishOn;
});
break;
case 'end':
// start effect after last queued effect has finished
timestamp =3D this.effects.pluck('finishOn').max() || timestamp;
break;
}

effect.startOn  +=3D timestamp;
effect.finishOn +=3D timestamp;
this.effects.push(effect);
if(!this.interval)
this.interval =3D setInterval(this.loop.bind(this), 40);
},
remove: function(effect) {
this.effects =3D this.effects.reject(function(e) { return e=3D=3Deffect });
if(this.effects.length =3D=3D 0) {
clearInterval(this.interval);
this.interval =3D null;
}
},
loop: function() {
var timePos =3D new Date().getTime();
this.effects.invoke('loop', timePos);
}
}

Effect.Base =3D function() {};
Effect.Base.prototype =3D {
position: null,
setOptions: function(options) {
this.options =3D Object.extend({
transition: Effect.Transitions.sinoidal,
duration:   1.0,   // seconds
fps:        25.0,  // max. 25fps due to Effect.Queue implementation
sync:       false, // true for combining
from:       0.0,
to:         1.0,
delay:      0.0,
queue:      'parallel'
}, options || {});
},
start: function(options) {
this.setOptions(options || {});
this.currentFrame =3D 0;
this.state        =3D 'idle';
this.startOn      =3D this.options.delay*1000;
this.finishOn     =3D this.startOn + (this.options.duration*1000);
this.event('beforeStart');
if(!this.options.sync) Effect.Queue.add(this);
},
loop: function(timePos) {
if(timePos >=3D this.startOn) {
if(timePos >=3D this.finishOn) {
this.render(1.0);
this.cancel();
this.event('beforeFinish');
if(this.finish) this.finish();
this.event('afterFinish');
return;
}
var pos   =3D (timePos - this.startOn) / (this.finishOn - this.startOn);
var frame =3D Math.round(pos * this.options.fps * this.options.duration);
if(frame > this.currentFrame) {
this.render(pos);
this.currentFrame =3D frame;
}
}
},
render: function(pos) {
if(this.state =3D=3D 'idle') {
this.state =3D 'running';
this.event('beforeSetup');
if(this.setup) this.setup();
this.event('afterSetup');
}
if(this.options.transition) pos =3D this.options.transition(pos);
pos *=3D (this.options.to-this.options.from);
pos +=3D this.options.from;
this.position =3D pos;
this.event('beforeUpdate');
if(this.update) this.update(pos);
this.event('afterUpdate');
},
cancel: function() {
if(!this.options.sync) Effect.Queue.remove(this);
this.state =3D 'finished';
},
event: function(eventName) {
if(this.options[eventName + 'Internal']) this.options[eventName + 'Internal=
'](this);
if(this.options[eventName]) this.options[eventName](this);
}
}

Effect.Parallel =3D Class.create();
Object.extend(Object.extend(Effect.Parallel.prototype, Effect.Base.prototyp=
e), {
initialize: function(effects) {
this.effects =3D effects || [];
this.start(arguments[1]);
},
update: function(position) {
this.effects.invoke('render', position);
},
finish: function(position) {
this.effects.each( function(effect) {
effect.render(1.0);
effect.cancel();
effect.event('beforeFinish');
if(effect.finish) effect.finish(position);
effect.event('afterFinish');
});
}
});

Effect.Opacity =3D Class.create();
Object.extend(Object.extend(Effect.Opacity.prototype, Effect.Base.prototype=
), {
initialize: function(element) {
this.element =3D $(element);
// make this work on IE on elements without 'layout'
if(/MSIE/.test(navigator.userAgent) && (!this.element.hasLayout))
this.element.style.zoom =3D 1;
var options =3D Object.extend({
from: Element.getOpacity(this.element) || 0.0,
to:   1.0
}, arguments[1] || {});
this.start(options);
},
update: function(position) {
Element.setOpacity(this.element, position);
}
});

Effect.MoveBy =3D Class.create();
Object.extend(Object.extend(Effect.MoveBy.prototype, Effect.Base.prototype)=
, {
initialize: function(element, toTop, toLeft) {
this.element      =3D $(element);
this.toTop        =3D toTop;
this.toLeft       =3D toLeft;
this.start(arguments[3]);
},
setup: function() {
// Bug in Opera: Opera returns the "real" position of a static element or
// relative element that does not have top/left explicitly set.
// =3D=3D> Always set top and left for position relative elements in your s=
tylesheets
// (to 0 if you do not need them)

Element.makePositioned(this.element);
this.originalTop  =3D parseFloat(Element.getStyle(this.element,'top')  || '=
0');
this.originalLeft =3D parseFloat(Element.getStyle(this.element,'left') || '=
0');
},
update: function(position) {
var topd  =3D this.toTop  * position + this.originalTop;
var leftd =3D this.toLeft * position + this.originalLeft;
this.setPosition(topd, leftd);
},
setPosition: function(topd, leftd) {
this.element.style.top  =3D topd  + "px";
this.element.style.left =3D leftd + "px";
}
});

Effect.Scale =3D Class.create();
Object.extend(Object.extend(Effect.Scale.prototype, Effect.Base.prototype),=
 {
initialize: function(element, percent) {
this.element =3D $(element)
var options =3D Object.extend({
scaleX: true,
scaleY: true,
scaleContent: true,
scaleFromCenter: false,
scaleMode: 'box',        // 'box' or 'contents' or {} with provided values
scaleFrom: 100.0,
scaleTo:   percent
}, arguments[2] || {});
this.start(options);
},
setup: function() {
var effect =3D this;

this.restoreAfterFinish =3D this.options.restoreAfterFinish || false;
this.elementPositioning =3D Element.getStyle(this.element,'position');

effect.originalStyle =3D {};
['top','left','width','height','fontSize'].each( function(k) {
effect.originalStyle[k] =3D effect.element.style[k];
});

this.originalTop  =3D this.element.offsetTop;
this.originalLeft =3D this.element.offsetLeft;

var fontSize =3D Element.getStyle(this.element,'font-size') || "100%";
['em','px','%'].each( function(fontSizeType) {
if(fontSize.indexOf(fontSizeType)>0) {
effect.fontSize     =3D parseFloat(fontSize);
effect.fontSizeType =3D fontSizeType;
}
});

this.factor =3D (this.options.scaleTo - this.options.scaleFrom)/100;

this.dims =3D null;
if(this.options.scaleMode=3D=3D'box')
this.dims =3D [this.element.clientHeight, this.element.clientWidth];
if(this.options.scaleMode=3D=3D'content')
this.dims =3D [this.element.scrollHeight, this.element.scrollWidth];
if(!this.dims)
this.dims =3D [this.options.scaleMode.originalHeight,
this.options.scaleMode.originalWidth];
},
update: function(position) {
var currentScale =3D (this.options.scaleFrom/100.0) + (this.factor * positi=
on);
if(this.options.scaleContent && this.fontSize)
this.element.style.fontSize =3D this.fontSize*currentScale + this.fontSizeT=
ype;
this.setDimensions(this.dims[0] * currentScale, this.dims[1] * currentScale=
);
},
finish: function(position) {
if (this.restoreAfterFinish) {
var effect =3D this;
['top','left','width','height','fontSize'].each( function(k) {
effect.element.style[k] =3D effect.originalStyle[k];
});
}
},
setDimensions: function(height, width) {
var els =3D this.element.style;
if(this.options.scaleX) els.width =3D width + 'px';
if(this.options.scaleY) els.height =3D height + 'px';
if(this.options.scaleFromCenter) {
var topd  =3D (height - this.dims[0])/2;
var leftd =3D (width  - this.dims[1])/2;
if(this.elementPositioning =3D=3D 'absolute') {
if(this.options.scaleY) els.top =3D this.originalTop-topd + "px";
if(this.options.scaleX) els.left =3D this.originalLeft-leftd + "px";
} else {
if(this.options.scaleY) els.top =3D -topd + "px";
if(this.options.scaleX) els.left =3D -leftd + "px";
}
}
}
});

Effect.Highlight =3D Class.create();
Object.extend(Object.extend(Effect.Highlight.prototype, Effect.Base.prototy=
pe), {
initialize: function(element) {
this.element =3D $(element);
var options =3D Object.extend({
startcolor:   "#ffff99"
}, arguments[1] || {});
this.start(options);
},
setup: function() {
// Disable background image during the effect
this.oldBgImage =3D this.element.style.backgroundImage;
this.element.style.backgroundImage =3D "none";
if(!this.options.endcolor)
this.options.endcolor =3D Element.getStyle(this.element, 'background-color'=
).parseColor('#ffffff');
if (typeof this.options.restorecolor =3D=3D "undefined")
this.options.restorecolor =3D this.element.style.backgroundColor;
// init color calculations
this.colors_base =3D [
parseInt(this.options.startcolor.slice(1,3),16),
parseInt(this.options.startcolor.slice(3,5),16),
parseInt(this.options.startcolor.slice(5),16) ];
this.colors_delta =3D [
parseInt(this.options.endcolor.slice(1,3),16)-this.colors_base[0],
parseInt(this.options.endcolor.slice(3,5),16)-this.colors_base[1],
parseInt(this.options.endcolor.slice(5),16)-this.colors_base[2]];
},
update: function(position) {
var effect =3D this; var colors =3D $R(0,2).map( function(i){
return Math.round(effect.colors_base[i]+(effect.colors_delta[i]*position))
});
this.element.style.backgroundColor =3D "#" +
colors[0].toColorPart() + colors[1].toColorPart() + colors[2].toColorPart();
},
finish: function() {
this.element.style.backgroundColor =3D this.options.restorecolor;
this.element.style.backgroundImage =3D this.oldBgImage;
}
});

Effect.ScrollTo =3D Class.create();
Object.extend(Object.extend(Effect.ScrollTo.prototype, Effect.Base.prototyp=
e), {
initialize: function(element) {
this.element =3D $(element);
this.start(arguments[1] || {});
},
setup: function() {
Position.prepare();
var offsets =3D Position.cumulativeOffset(this.element);
var max =3D window.innerHeight ?
window.height - window.innerHeight :
document.body.scrollHeight -
(document.documentElement.clientHeight ?
document.documentElement.clientHeight : document.body.clientHeight);
this.scrollStart =3D Position.deltaY;
this.delta =3D (offsets[1] > max ? max : offsets[1]) - this.scrollStart;
},
update: function(position) {
Position.prepare();
window.scrollTo(Position.deltaX,
this.scrollStart + (position*this.delta));
}
});

/* ------------- combination effects ------------- */

Effect.Fade =3D function(element) {
var oldOpacity =3D Element.getInlineOpacity(element);
var options =3D Object.extend({
from: Element.getOpacity(element) || 1.0,
to:   0.0,
afterFinishInternal: function(effect)
{ if (effect.options.to =3D=3D 0) {
Element.hide(effect.element);
Element.setInlineOpacity(effect.element, oldOpacity);
}
}
}, arguments[1] || {});
return new Effect.Opacity(element,options);
}

Effect.Appear =3D function(element) {
var options =3D Object.extend({
from: (Element.getStyle(element, "display") =3D=3D "none" ? 0.0 : Element.g=
etOpacity(element) || 0.0),
to:   1.0,
beforeSetup: function(effect)
{ Element.setOpacity(effect.element, effect.options.from);
Element.show(effect.element); }
}, arguments[1] || {});
return new Effect.Opacity(element,options);
}

Effect.Puff =3D function(element) {
element =3D $(element);
var oldOpacity =3D Element.getInlineOpacity(element);
var oldPosition =3D element.style.position;
return new Effect.Parallel(
[ new Effect.Scale(element, 200,
{ sync: true, scaleFromCenter: true, scaleContent: true, restoreAfterFinish=
: true }),
new Effect.Opacity(element, { sync: true, to: 0.0 } ) ],
Object.extend({ duration: 1.0,
beforeSetupInternal: function(effect)
{ effect.effects[0].element.style.position =3D 'absolute'; },
afterFinishInternal: function(effect)
{ Element.hide(effect.effects[0].element);
effect.effects[0].element.style.position =3D oldPosition;
Element.setInlineOpacity(effect.effects[0].element, oldOpacity); }
}, arguments[1] || {})
);
}

Effect.BlindUp =3D function(element) {
element =3D $(element);
Element.makeClipping(element);
return new Effect.Scale(element, 0,
Object.extend({ scaleContent: false,
scaleX: false,
restoreAfterFinish: true,
afterFinishInternal: function(effect)
{
Element.hide(effect.element);
Element.undoClipping(effect.element);
}
}, arguments[1] || {})
);
}

Effect.BlindDown =3D function(element) {
element =3D $(element);
var oldHeight =3D element.style.height;
var elementDimensions =3D Element.getDimensions(element);
return new Effect.Scale(element, 100,
Object.extend({ scaleContent: false,
scaleX: false,
scaleFrom: 0,
scaleMode: {originalHeight: elementDimensions.height, originalWidth: elemen=
tDimensions.width},
restoreAfterFinish: true,
afterSetup: function(effect) {
Element.makeClipping(effect.element);
effect.element.style.height =3D "0px";
Element.show(effect.element);
},
afterFinishInternal: function(effect) {
Element.undoClipping(effect.element);
effect.element.style.height =3D oldHeight;
}
}, arguments[1] || {})
);
}

Effect.SwitchOff =3D function(element) {
element =3D $(element);
var oldOpacity =3D Element.getInlineOpacity(element);
return new Effect.Appear(element, {
duration: 0.4,
from: 0,
transition: Effect.Transitions.flicker,
afterFinishInternal: function(effect) {
new Effect.Scale(effect.element, 1, {
duration: 0.3, scaleFromCenter: true,
scaleX: false, scaleContent: false, restoreAfterFinish: true,
beforeSetup: function(effect) {
Element.makePositioned(effect.element);
Element.makeClipping(effect.element);
},
afterFinishInternal: function(effect) {
Element.hide(effect.element);
Element.undoClipping(effect.element);
Element.undoPositioned(effect.element);
Element.setInlineOpacity(effect.element, oldOpacity);
}
})
}
});
}

Effect.DropOut =3D function(element) {
element =3D $(element);
var oldTop =3D element.style.top;
var oldLeft =3D element.style.left;
var oldOpacity =3D Element.getInlineOpacity(element);
return new Effect.Parallel(
[ new Effect.MoveBy(element, 100, 0, { sync: true }),
new Effect.Opacity(element, { sync: true, to: 0.0 }) ],
Object.extend(
{ duration: 0.5,
beforeSetup: function(effect) {
Element.makePositioned(effect.effects[0].element); },
afterFinishInternal: function(effect) {
Element.hide(effect.effects[0].element);
Element.undoPositioned(effect.effects[0].element);
effect.effects[0].element.style.left =3D oldLeft;
effect.effects[0].element.style.top =3D oldTop;
Element.setInlineOpacity(effect.effects[0].element, oldOpacity); }
}, arguments[1] || {}));
}

Effect.Shake =3D function(element) {
element =3D $(element);
var oldTop =3D element.style.top;
var oldLeft =3D element.style.left;
return new Effect.MoveBy(element, 0, 20,
{ duration: 0.05, afterFinishInternal: function(effect) {
new Effect.MoveBy(effect.element, 0, -40,
{ duration: 0.1, afterFinishInternal: function(effect) {
new Effect.MoveBy(effect.element, 0, 40,
{ duration: 0.1, afterFinishInternal: function(effect) {
new Effect.MoveBy(effect.element, 0, -40,
{ duration: 0.1, afterFinishInternal: function(effect) {
new Effect.MoveBy(effect.element, 0, 40,
{ duration: 0.1, afterFinishInternal: function(effect) {
new Effect.MoveBy(effect.element, 0, -20,
{ duration: 0.05, afterFinishInternal: function(effect) {
Element.undoPositioned(effect.element);
effect.element.style.left =3D oldLeft;
effect.element.style.top =3D oldTop;
}}) }}) }}) }}) }}) }});
}

Effect.SlideDown =3D function(element) {
element =3D $(element);
Element.cleanWhitespace(element);
// SlideDown need to have the content of the element wrapped in a container=
 element with fixed height!
var oldInnerBottom =3D element.firstChild.style.bottom;
var elementDimensions =3D Element.getDimensions(element);
return new Effect.Scale(element, 100,
Object.extend({ scaleContent: false,
scaleX: false,
scaleFrom: 0,
scaleMode: {originalHeight: elementDimensions.height, originalWidth: elemen=
tDimensions.width},
restoreAfterFinish: true,
afterSetup: function(effect) {
Element.makePositioned(effect.element.firstChild);
if (window.opera) effect.element.firstChild.style.top =3D "";
Element.makeClipping(effect.element);
element.style.height =3D '0';
Element.show(element);
},
afterUpdateInternal: function(effect) {
effect.element.firstChild.style.bottom =3D
(effect.originalHeight - effect.element.clientHeight) + 'px'; },
afterFinishInternal: function(effect) {
Element.undoClipping(effect.element);
Element.undoPositioned(effect.element.firstChild);
effect.element.firstChild.style.bottom =3D oldInnerBottom; }
}, arguments[1] || {})
);
}

Effect.SlideUp =3D function(element) {
element =3D $(element);
Element.cleanWhitespace(element);
var oldInnerBottom =3D element.firstChild.style.bottom;
return new Effect.Scale(element, 0,
Object.extend({ scaleContent: false,
scaleX: false,
scaleMode: 'box',
scaleFrom: 100,
restoreAfterFinish: true,
beforeStartInternal: function(effect) {
Element.makePositioned(effect.element.firstChild);
if (window.opera) effect.element.firstChild.style.top =3D "";
Element.makeClipping(effect.element);
Element.show(element);
},
afterUpdateInternal: function(effect) {
effect.element.firstChild.style.bottom =3D
(effect.originalHeight - effect.element.clientHeight) + 'px'; },
afterFinishInternal: function(effect) {
Element.hide(effect.element);
Element.undoClipping(effect.element);
Element.undoPositioned(effect.element.firstChild);
effect.element.firstChild.style.bottom =3D oldInnerBottom; }
}, arguments[1] || {})
);
}

Effect.Squish =3D function(element) {
// Bug in opera makes the TD containing this element expand for a instance =
after finish
return new Effect.Scale(element, window.opera ? 1 : 0,
{ restoreAfterFinish: true,
beforeSetup: function(effect) {
Element.makeClipping(effect.element); },
afterFinishInternal: function(effect) {
Element.hide(effect.element);
Element.undoClipping(effect.element); }
});
}

Effect.Grow =3D function(element) {
element =3D $(element);
var options =3D arguments[1] || {};

var elementDimensions =3D Element.getDimensions(element);
var originalWidth =3D elementDimensions.width;
var originalHeight =3D elementDimensions.height;
var oldTop =3D element.style.top;
var oldLeft =3D element.style.left;
var oldHeight =3D element.style.height;
var oldWidth =3D element.style.width;
var oldOpacity =3D Element.getInlineOpacity(element);

var direction =3D options.direction || 'center';
var moveTransition =3D options.moveTransition || Effect.Transitions.sinoida=
l;
var scaleTransition =3D options.scaleTransition || Effect.Transitions.sinoi=
dal;
var opacityTransition =3D options.opacityTransition || Effect.Transitions.f=
ull;

var initialMoveX, initialMoveY;
var moveX, moveY;

switch (direction) {
case 'top-left':
initialMoveX =3D initialMoveY =3D moveX =3D moveY =3D 0;
break;
case 'top-right':
initialMoveX =3D originalWidth;
initialMoveY =3D moveY =3D 0;
moveX =3D -originalWidth;
break;
case 'bottom-left':
initialMoveX =3D moveX =3D 0;
initialMoveY =3D originalHeight;
moveY =3D -originalHeight;
break;
case 'bottom-right':
initialMoveX =3D originalWidth;
initialMoveY =3D originalHeight;
moveX =3D -originalWidth;
moveY =3D -originalHeight;
break;
case 'center':
initialMoveX =3D originalWidth / 2;
initialMoveY =3D originalHeight / 2;
moveX =3D -originalWidth / 2;
moveY =3D -originalHeight / 2;
break;
}

return new Effect.MoveBy(element, initialMoveY, initialMoveX, {
duration: 0.01,
beforeSetup: function(effect) {
Element.hide(effect.element);
Element.makeClipping(effect.element);
Element.makePositioned(effect.element);
},
afterFinishInternal: function(effect) {
new Effect.Parallel(
[ new Effect.Opacity(effect.element, { sync: true, to: 1.0, from: 0.0, tran=
sition: opacityTransition }),
new Effect.MoveBy(effect.element, moveY, moveX, { sync: true, transition: m=
oveTransition }),
new Effect.Scale(effect.element, 100, {
scaleMode: { originalHeight: originalHeight, originalWidth: originalWidth },
sync: true, scaleFrom: window.opera ? 1 : 0, transition: scaleTransition, r=
estoreAfterFinish: true})
], Object.extend({
beforeSetup: function(effect) {
effect.effects[0].element.style.height =3D 0;
Element.show(effect.effects[0].element);
},
afterFinishInternal: function(effect) {
var el =3D effect.effects[0].element;
var els =3D el.style;
Element.undoClipping(el);
Element.undoPositioned(el);
els.top =3D oldTop;
els.left =3D oldLeft;
els.height =3D oldHeight;
els.width =3D originalWidth;
Element.setInlineOpacity(el, oldOpacity);
}
}, options)
)
}
});
}

Effect.Shrink =3D function(element) {
element =3D $(element);
var options =3D arguments[1] || {};

var originalWidth =3D element.clientWidth;
var originalHeight =3D element.clientHeight;
var oldTop =3D element.style.top;
var oldLeft =3D element.style.left;
var oldHeight =3D element.style.height;
var oldWidth =3D element.style.width;
var oldOpacity =3D Element.getInlineOpacity(element);

var direction =3D options.direction || 'center';
var moveTransition =3D options.moveTransition || Effect.Transitions.sinoida=
l;
var scaleTransition =3D options.scaleTransition || Effect.Transitions.sinoi=
dal;
var opacityTransition =3D options.opacityTransition || Effect.Transitions.n=
one;

var moveX, moveY;

switch (direction) {
case 'top-left':
moveX =3D moveY =3D 0;
break;
case 'top-right':
moveX =3D originalWidth;
moveY =3D 0;
break;
case 'bottom-left':
moveX =3D 0;
moveY =3D originalHeight;
break;
case 'bottom-right':
moveX =3D originalWidth;
moveY =3D originalHeight;
break;
case 'center':
moveX =3D originalWidth / 2;
moveY =3D originalHeight / 2;
break;
}

return new Effect.Parallel(
[ new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0, transition:=
 opacityTransition }),
new Effect.Scale(element, window.opera ? 1 : 0, { sync: true, transition: s=
caleTransition, restoreAfterFinish: true}),
new Effect.MoveBy(element, moveY, moveX, { sync: true, transition: moveTran=
sition })
], Object.extend({
beforeStartInternal: function(effect) {
Element.makePositioned(effect.effects[0].element);
Element.makeClipping(effect.effects[0].element);
},
afterFinishInternal: function(effect) {
var el =3D effect.effects[0].element;
var els =3D el.style;
Element.hide(el);
Element.undoClipping(el);
Element.undoPositioned(el);
els.top =3D oldTop;
els.left =3D oldLeft;
els.height =3D oldHeight;
els.width =3D oldWidth;
Element.setInlineOpacity(el, oldOpacity);
}
}, options)
);
}

Effect.Pulsate =3D function(element) {
element =3D $(element);
var options    =3D arguments[1] || {};
var oldOpacity =3D Element.getInlineOpacity(element);
var transition =3D options.transition || Effect.Transitions.sinoidal;
var reverser   =3D function(pos){ return transition(1-Effect.Transitions.pu=
lse(pos)) };
reverser.bind(transition);
return new Effect.Opacity(element,
Object.extend(Object.extend({  duration: 3.0, from: 0,
afterFinishInternal: function(effect) { Element.setInlineOpacity(effect.ele=
ment, oldOpacity); }
}, options), {transition: reverser}));
}

Effect.Fold =3D function(element) {
element =3D $(element);
var originalTop =3D element.style.top;
var originalLeft =3D element.style.left;
var originalWidth =3D element.style.width;
var originalHeight =3D element.style.height;
Element.makeClipping(element);
return new Effect.Scale(element, 5, Object.extend({
scaleContent: false,
scaleX: false,
afterFinishInternal: function(effect) {
new Effect.Scale(element, 1, {
scaleContent: false,
scaleY: false,
afterFinishInternal: function(effect) {
Element.hide(effect.element);
Element.undoClipping(effect.element);
effect.element.style.top =3D originalTop;
effect.element.style.left =3D originalLeft;
effect.element.style.width =3D originalWidth;
effect.element.style.height =3D originalHeight;
} });
}}, arguments[1] || {}));
}

// Autocompleter.Base handles all the autocompletion functionality
// that's independent of the data source for autocompletion. This
// includes drawing the autocompletion menu, observing keyboard
// and mouse events, and similar.
//
// Specific autocompleters need to provide, at the very least,
// a getUpdatedChoices function that will be invoked every time
// the text inside the monitored textbox changes. This method
// should get the text for which to provide autocompletion by
// invoking this.getEntry(), NOT by directly accessing
// this.element.value. This is to allow incremental tokenized
// autocompletion. Specific auto-completion logic (AJAX, etc)
// belongs in getUpdatedChoices.
//
// Tokenized incremental autocompletion is enabled automatically
// when an autocompleter is instantiated with the 'tokens' option
// in the options parameter, e.g.:
// new Ajax.Autocompleter('id','upd', '/url/', { tokens: ',' });
// will incrementally autocomplete with a comma as the token.
// Additionally, ',' in the above example can be replaced with
// a token array, e.g. { tokens: new Array (',', '\n') } which
// enables autocompletion on multiple tokens. This is most
// useful when one of the tokens is \n (a newline), as it
// allows smart autocompletion after linebreaks.
var Autocompleter =3D {}
Autocompleter.Base =3D function()
{
};
Autocompleter.Base.prototype =3D {
base_initialize: function(element, update, options)
{
this.element =3D $(element);
this.update =3D $(update);
this.has_focus =3D false;
this.changed =3D false;
this.active =3D false;
this.index =3D 0;
this.entry_count =3D 0;
if (this.setOptions)
this.setOptions(options);
else
this.options =3D options || {};
this.options.tokens =3D this.options.tokens || new Array();
this.options.frequency =3D this.options.frequency || 0.4;
this.options.min_chars =3D this.options.min_chars || 1;
this.options.onShow =3D this.options.onShow ||
function(element, update)
{
if (!update.style.position || update.style.position =3D=3D 'absolute')
{
update.style.position =3D 'absolute';
var offsets =3D Position.cumulativeOffset(element);
update.style.left =3D offsets[0] + 'px';
update.style.top =3D (offsets[1] + element.offsetHeight) + 'px';
update.style.width =3D element.offsetWidth + 'px';
}
new Effect.Appear(update, {duration:0.15});
};
this.options.onHide =3D this.options.onHide ||
function(element, update)
{
new Effect.Fade(update, {duration:0.15})
};
if (this.options.indicator)
this.indicator =3D $(this.options.indicator);
if (typeof(this.options.tokens) =3D=3D 'string')
this.options.tokens =3D new Array(this.options.tokens);
this.observer =3D null;
Element.hide(this.update);
Event.observe(this.element, "blur", this.onBlur.bindAsEventListener(this));
Event.observe(this.element, "keypress", this.onKeyPress.bindAsEventListener=
(this));
},
show: function()
{
if (this.update.style.display =3D=3D 'none') this.options.onShow(this.eleme=
nt, this.update);
if (!this.iefix && (navigator.appVersion.indexOf('MSIE') > 0) && this.updat=
e.style.position =3D=3D 'absolute')
{
new Insertion.After(this.update,
'<iframe id=3D"' + this.update.id + '_iefix" ' +
'style=3D"display:none;filter:progid:DXImageTransform.Microsoft.Alpha(opaci=
ty=3D0);" ' +
'src=3D"javascript:false;" frameborder=3D"0" scrolling=3D"no"></iframe>');
this.iefix =3D $(this.update.id + '_iefix');
}
if (this.iefix)
{
Position.clone(this.update, this.iefix);
this.iefix.style.zIndex =3D 1;
this.update.style.zIndex =3D 2;
Element.show(this.iefix);
}
},
hide: function()
{
if (this.update.style.display =3D=3D '') this.options.onHide(this.element, =
this.update);
if (this.iefix) Element.hide(this.iefix);
},
startIndicator: function()
{
if (this.indicator) Element.show(this.indicator);
},
stopIndicator: function()
{
if (this.indicator) Element.hide(this.indicator);
},
onKeyPress: function(event)
{
if (this.active)
switch (event.keyCode)
{
case Event.KEY_TAB:
case Event.KEY_RETURN:
this.select_entry();
Event.stop(event);
case Event.KEY_ESC:
this.hide();
this.active =3D false;
return;
case Event.KEY_LEFT:
case Event.KEY_RIGHT:
return;
case Event.KEY_UP:
this.mark_previous();
this.render();
if (navigator.appVersion.indexOf('AppleWebKit') > 0) Event.stop(event);
return;
case Event.KEY_DOWN:
this.mark_next();
this.render();
if (navigator.appVersion.indexOf('AppleWebKit') > 0) Event.stop(event);
return;
}
else
if (event.keyCode =3D=3D Event.KEY_TAB || event.keyCode =3D=3D Event.KEY_RE=
TURN)
return;
this.changed =3D true;
this.has_focus =3D true;
if (this.observer) clearTimeout(this.observer);
this.observer =3D
setTimeout(this.onObserverEvent.bind(this), this.options.frequency * 1000);
},
onHover: function(event)
{
var element =3D Event.findElement(event, 'LI');
if (this.index !=3D element.autocompleteIndex)
{
this.index =3D element.autocompleteIndex;
this.render();
}
Event.stop(event);
},
onClick: function(event)
{
var element =3D Event.findElement(event, 'LI');
this.index =3D element.autocompleteIndex;
this.select_entry();
Event.stop(event);
},
onBlur: function(event)
{
// needed to make click events working
setTimeout(this.hide.bind(this), 250);
this.has_focus =3D false;
this.active =3D false;
},
render: function()
{
if (this.entry_count > 0)
{
for (var i =3D 0; i < this.entry_count; i++)
{
this.index =3D=3D i ?
Element.addClassName(this.get_entry(i), "selected") :
Element.removeClassName(this.get_entry(i), "selected");
}
if (this.has_focus)
{
if (this.get_current_entry().scrollIntoView)
this.get_current_entry().scrollIntoView(false);
this.show();
this.active =3D true;
}
}
else this.hide();
},
mark_previous: function()
{
if (this.index > 0) this.index--
else this.index =3D this.entry_count - 1;
},
mark_next: function()
{
if (this.index < this.entry_count - 1) this.index++
else this.index =3D 0;
},
get_entry: function(index)
{
return this.update.firstChild.childNodes[index];
},
get_current_entry: function()
{
return this.get_entry(this.index);
},
select_entry: function()
{
this.active =3D false;
value =3D Element.collectTextNodesIgnoreClass(this.get_current_entry(), 'in=
formal').unescapeHTML();
this.updateElement(value);
this.element.focus();
},
updateElement: function(value)
{
var last_token_pos =3D this.findLastToken();
if (last_token_pos !=3D -1)
{
var new_value =3D this.element.value.substr(0, last_token_pos + 1);
var whitespace =3D this.element.value.substr(last_token_pos + 1).match(/^\s=
+/);
if (whitespace)
new_value +=3D whitespace[0];
this.element.value =3D new_value + value;
}
else
{
this.element.value =3D value;
}
},
updateChoices: function(choices)
{
if (!this.changed && this.has_focus)
{
this.update.innerHTML =3D choices;
Element.cleanWhitespace(this.update);
Element.cleanWhitespace(this.update.firstChild);
if (this.update.firstChild && this.update.firstChild.childNodes)
{
this.entry_count =3D
this.update.firstChild.childNodes.length;
for (var i =3D 0; i < this.entry_count; i++)
{
entry =3D this.get_entry(i);
entry.autocompleteIndex =3D i;
this.addObservers(entry);
}
}
else
{
this.entry_count =3D 0;
}
this.stopIndicator();
this.index =3D 0;
this.render();
}
},
addObservers: function(element)
{
Event.observe(element, "mouseover", this.onHover.bindAsEventListener(this));
Event.observe(element, "click", this.onClick.bindAsEventListener(this));
},
onObserverEvent: function()
{
this.changed =3D false;
if (this.getEntry().length >=3D this.options.min_chars)
{
this.startIndicator();
this.getUpdatedChoices();
}
else
{
this.active =3D false;
this.hide();
}
},
getEntry: function()
{
var token_pos =3D this.findLastToken();
var ret;
if (token_pos !=3D -1)
ret =3D this.element.value.substr(token_pos + 1).replace(/^\s+/, '').replac=
e(/\s+$/, '');
else
ret =3D this.element.value;
return /\n/.test(ret) ? '' : ret;
},
findLastToken: function()
{
var last_token_pos =3D -1;
for (var i =3D 0; i < this.options.tokens.length; i++)
{
var this_token_pos =3D this.element.value.lastIndexOf(this.options.tokens[i=
]);
if (this_token_pos > last_token_pos)
last_token_pos =3D this_token_pos;
}
return last_token_pos;
}
}
Ajax.Autocompleter =3D Class.create();
Object.extend(Object.extend(Ajax.Autocompleter.prototype, Autocompleter.Bas=
e.prototype), {
initialize: function(element, update, url, options)
{
this.base_initialize(element, update, options);
this.options.asynchronous =3D true;
this.options.onComplete =3D this.onComplete.bind(this)
this.options.method =3D 'post';
this.options.defaultParams =3D this.options.parameters || null;
this.url =3D url;
},
getUpdatedChoices: function()
{
var entry =3D encodeURIComponent(this.element.name) + '=3D' +
encodeURIComponent(this.getEntry());
this.options.parameters =3D this.options.callback ?
this.options.callback(this.element, entry) : entry;
if (this.options.defaultParams)
this.options.parameters +=3D '&' + this.options.defaultParams;
// (Jeremy Higgs: Instead of using AJAX.Request, let's be consistent and us=
e DWR)
this.options.dwrFunction(this.url, this.getEntry(), this.options.onComplete)
},
onComplete: function(response)
{
this.updateChoices(response.response);
}
});
// The local array autocompleter. Used when you'd prefer to
// inject an array of autocompletion options into the page, rather
// than sending out Ajax queries, which can be quite slow sometimes.
//
// The constructor takes four parameters. The first two are, as usual,
// the id of the monitored textbox, and id of the autocompletion menu.
// The third is the array you want to autocomplete from, and the fourth
// is the options block.
//
// Extra local autocompletion options:
// - choices - How many autocompletion choices to offer
//
// - partial_search - If false, the autocompleter will match entered
//                    text only at the beginning of strings in the
//                    autocomplete array. Defaults to true, which will
//                    match text at the beginning of any *word* in the
//                    strings in the autocomplete array. If you want to
//                    search anywhere in the string, additionally set
//                    the option full_search to true (default: off).
//
// - full_search - Search anywhere in autocomplete array strings.
//
// - partial_chars - How many characters to enter before triggering
//                   a partial match (unlike min_chars, which defines
//                   how many characters are required to do any match
//                   at all). Defaults to 2.
//
// - ignore_case - Whether to ignore case when autocompleting.
//                 Defaults to true.
//
// It's possible to pass in a custom function as the 'selector'
// option, if you prefer to write your own autocompletion logic.
// In that case, the other options above will not apply unless
// you support them.
Autocompleter.Local =3D Class.create();
Autocompleter.Local.prototype =3D Object.extend(new Autocompleter.Base(), {
initialize: function(element, update, array, options)
{
this.base_initialize(element, update, options);
this.options.array =3D array;
},
getUpdatedChoices: function()
{
this.updateChoices(this.options.selector(this));
},
setOptions: function(options)
{
this.options =3D Object.extend({
choices: 10,
partial_search: true,
partial_chars: 2,
ignore_case: true,
full_search: false,
selector: function(instance)
{
var ret =3D new Array();
// Beginning matches
var partial =3D new Array();
// Inside matches
var entry =3D instance.getEntry();
var count =3D 0;
for (var i =3D 0; i < instance.options.array.length &&
ret.length < instance.options.choices; i++)
{
var elem =3D instance.options.array[i];
var found_pos =3D instance.options.ignore_case ?
elem.toLowerCase().indexOf(entry.toLowerCase()) :
elem.indexOf(entry);
while (found_pos !=3D -1)
{
if (found_pos =3D=3D 0 && elem.length !=3D entry.length)
{
ret.push("<li><strong>" + elem.substr(0, entry.length) + "</strong>" +
elem.substr(entry.length) + "</li>");
break;
}
else if (entry.length >=3D instance.options.partial_chars &&
instance.options.partial_search && found_pos !=3D -1)
{
if (instance.options.full_search || /\s/.test(elem.substr(found_pos - 1, 1)=
))
{
partial.push("<li>" + elem.substr(0, found_pos) + "<strong>" +
elem.substr(found_pos, entry.length) + "</strong>" + elem.substr(
found_pos + entry.length) + "</li>");
break;
}
}
found_pos =3D instance.options.ignore_case ?
elem.toLowerCase().indexOf(entry.toLowerCase(), found_pos + 1) :
elem.indexOf(entry, found_pos + 1);
}
}
if (partial.length)
ret =3D ret.concat(partial.slice(0, instance.options.choices - ret.length))
return "<ul>" + ret.join('') + "</ul>";
}
}, options || {});
}
});

/*************************************************
labels.js
*************************************************/
// please declare the "domainName" and "entityId" javascript variables befo=
re including this script file
var operationInProgress =3D false;
// variable to enforce one label operation at a time
// populates labelsInfoSpan with the droppable versions of the labels
// also fires off another request to pull in the suggested labels

/**
Adding labels
**/
function onAddLabel()
{
enableDeleteLabelLinks();
fetchAndWriteSuggestedLabels();
}

// DWR callback method for when labels are being added
function add_label_callback(response)
{
if (response.success)
{
var labelsInfoSpan =3D document.getElementById('labelsList');
var errorSpan =3D document.getElementById('errorSpan');
errorSpan.innerHTML =3D "";
labelsInfoSpan.innerHTML =3D response.response;
// call the fade event on each of the new labels
var updatedLabelIds =3D '';
if (document.getElementById("recentlyUpdated"))
{
updatedLabelIds =3D document.getElementById("recentlyUpdated").innerHTML;
}
var labelIdsArray =3D stringTokenizer(updatedLabelIds, new Array(',', ' '));
for (var i =3D 0; i < labelIdsArray.length; i++)
{
if (labelIdsArray[i].length > 0) // skip empty strings in the tokenized arr=
ay (can't figure out how they get in there)
{
label =3D document.getElementById('label-' + labelIdsArray[i]);
if (label.style.display =3D=3D 'none')
{
new Effect.Appear(document.getElementById('label-' + labelIdsArray[i]));
}
}
}
document.addLabelForm.labelsString.value =3D '';
}
else
{
showLabelOperationErrorContainer();
document.getElementById("labelOperationErrorMessage").innerHTML =3D respons=
e.response;
}
// clear the text box and focus on it should the user want to add another l=
abel
document.addLabelForm.labelsString.focus();
fetchAndWriteSuggestedLabels();
// once status has been updated we switch off the waiting icon
toggleWaitImageAndStatus(false);
setLabelOperationStatusMessage('');
operationInProgress =3D false;
// hide box after the 'done' button is clicked if label successfully added
if (hideTextfieldAfterAdd && response.success)
disableDeleteLabelLinks();
}

// DWR error handler for adding labels
function add_label_errorhandler()
{
handleError("[41a] Error connecting to the server. The labels have not been=
 updated.");
}

var hideTextfieldAfterAdd
// Method to add labels via AJAX
function doAddLabel(hideTextfieldAfterAddParam)
{
hideTextfieldAfterAdd =3D hideTextfieldAfterAddParam;
if (!operationInProgress)
{
var newLabelName =3D document.addLabelForm.labelsString.value.toLowerCase();
// if there is no text in the add label textfield and the user clicks 'done=
', skip xml http request to add/validate label
if (hideTextfieldAfterAdd && (newLabelName =3D=3D null || newLabelName.leng=
th =3D=3D 0))
{
disableDeleteLabelLinks();
return;
}
operationInProgress =3D true;
// hide any errors from previous attempts at adding a label
hideLabelOperationErrorContainer();
toggleWaitImageAndStatus(true);
setLabelOperationStatusMessage('Adding label ...');
AddLabelToEntity.addLabel(entityId, newLabelName, {callback:add_label_callb=
ack, errorHandler:add_label_errorhandler});
}
}
function stringTokenizer(str, delimeters)
{
var result =3D new Array();
var delimeterChar =3D delimeters.pop();
// alert('Delimeter char: ' + delimeterChar);
var temp =3D str.split(delimeterChar);
if (delimeters.length =3D=3D 0)
{
// alert('Returning ' + temp.valueOf());
return temp;
}
else
{
for (var j =3D 0; j < temp.length; j++)
{
// alert('Recursing on: ' + temp[j] + ' with delimeters: ' + delimeters.val=
ueOf());
var copyOfDelimeters =3D copyArray(delimeters);
result =3D result.concat(stringTokenizer(temp[j], copyOfDelimeters));
}
}
return result;
}
function copyArray(a)
{
var result =3D new Array();
for (var i =3D 0; i < a.length; i++)
result.push(a[i]);
return result;
}

/**
Removing labels
**/
// DWR callback method for removing labels (wraps around another function i=
n order to pass a local context)
// See https://dwr.dev.java.net/servlets/ReadMsg?list=3Dusers&msgNo=3D1040
var remove_label_callback_wrapper =3D function(labelId)
{
return function(response)
{
if (response.success)
{
toggleWaitImageAndStatus(false);
setLabelOperationStatusMessage('');
new Effect.DropOut(document.getElementById('label-' + labelId));
}
else
{
showLabelOperationErrorContainer();
document.getElementById("labelOperationErrorMessage").innerHTML =3D respons=
e.response;
}

// once status has been updated we switch off the waiting icon
toggleWaitImageAndStatus(false);
setLabelOperationStatusMessage('');
operationInProgress =3D false;
}
}

// DWR error handler for removing labels
function remove_label_errorhandler()
{
handleError("[42b] Error connecting to the server. The labels have not been=
 updated.");
}

// Method to remove label via AJAX
function doRemoveLabel(labelId)
{
if (!operationInProgress)
{
operationInProgress =3D true;
toggleWaitImageAndStatus(true);
// hide any errors from previous attempts at adding a label
hideLabelOperationErrorContainer();
setLabelOperationStatusMessage('Removing label ...');
RemoveLabelFromEntity.removeLabel(entityId, labelId, {callback:remove_label=
_callback_wrapper(labelId), errorHandler:remove_label_errorhandler});
var errorSpan =3D this.document.getElementById('errorSpan');
errorSpan.innerHTML =3D "";
}
}

/**
Viewing labels (with delete label links)
**/
// DWR callback method for viewing labels
function view_labels_callback(response)
{
if (response.success)
{
var labelsInfoSpan =3D document.getElementById('labelsList');
labelsInfoSpan.innerHTML =3D response.response;
if (document.getElementById('editLabelsLink'))
{
document.getElementById('editLabelsLink').style.visibility =3D 'hidden';
}
}
else
{
handleError("[43a] Error connecting to the server. The labels have not been=
 updated.");
}
}

// DWR error handler for viewing labels
function view_labels_errorhandler()
{
handleError("[43b] Error connecting to the server. The labels have not been=
 updated.");
}

// Method for viewing labels with enabled delete label links (initiated aft=
er the 'Edit' link is clicked)
function enableDeleteLabelLinks()
{
var errorSpan =3D this.document.getElementById('errorSpan');
errorSpan.innerHTML =3D "";
ViewLabelsForEntity.viewLabels(entityId, {callback:view_labels_callback, er=
rorHandler:view_labels_errorhandler});
}

/**
Viewing labels (with disabled delete label links)
**/
// DWR callback method
function view_labels_disabled_callback(response)
{
if (response.success)
{
var labelsInfoSpan =3D document.getElementById('labelsList');
labelsInfoSpan.innerHTML =3D response.response;
hideLabelsInput();
}
else
{
handleError("[44a] Error connecting to the server. The labels have not been=
 updated.");
}
}

// DWR error handler
function view_labels_disabled_errorhandler()
{
handleError("[44b]Error connecting to the server. The labels have not been =
updated.");
}

// Method to retreive a list of labels with no delete links (called after p=
ressing the 'Done' button)
function disableDeleteLabelLinks()
{
if (!operationInProgress)
{
var errorSpan =3D this.document.getElementById('errorSpan');
errorSpan.innerHTML =3D "";
ViewLabelsForEntityWithoutDeleteLinks.viewLabels(entityId, spaceKey, {callb=
ack:view_labels_disabled_callback, errorHandler:view_labels_disabled_errorh=
andler});
}
}

/**
Suggested labels
**/
// DWR callback method
function view_suggested_labels_callback(response)
{
if (response.success)
{
var suggestedLabelsSpan =3D document.getElementById('suggestedLabelsSpan');
suggestedLabelsSpan.innerHTML =3D response.response;
}
else
{
handleError("[45a] Error connecting to the server. The suggested labels hav=
e not been loaded.");
}
}

// DWR error handler
function view_suggested_labels_errorhandler(x)
{
handleError("[45b] Error connecting to the server. The suggested labels hav=
e not been loaded. (" + x + ")");
}

// Method to retrieve a list of suggested labels for the given entity
function fetchAndWriteSuggestedLabels()
{
var errorSpan =3D document.getElementById('errorSpan');
errorSpan.innerHTML =3D "";
SuggestedLabelsForEntity.viewLabels(entityId, 'labels/suggestedlabels.vm', =
{callback:view_suggested_labels_callback, errorHandler:view_suggested_label=
s_errorhandler});
}

function hideLabelsInput()
{
hideLabelOperationErrorContainer();
this.document.getElementById('labelInputSpan').style.display =3D 'none';
if (document.getElementById('editLabelsLink'))
{
document.getElementById('editLabelsLink').style.visibility =3D 'visible';
}
}
function showLabelsInput()
{
document.getElementById('labelInputSpan').style.display =3D 'block';
// reset the value of this field, just in case the browser wants to become =
helpful and insert the old value
document.forms.addLabelForm.labelsString.value =3D '';
document.forms.addLabelForm.labelsString.focus();
if (document.getElementById('editLabelsLink'))
{
document.getElementById('editLabelsLink').style.visibility =3D 'hidden';
}
}
function hideLabelOperationErrorContainer()
{
if (document.getElementById("labelOperationErrorContainer").style.display !=
=3D 'none')
{
// clean up error message before hiding error box
document.getElementById("labelOperationErrorMessage").innerHTML =3D '';
document.getElementById("labelOperationErrorContainer").style.display =3D '=
none';
}
}
function showLabelOperationErrorContainer()
{
document.getElementById("labelOperationErrorContainer").style.display =3D '=
block';
}
function toggleWaitImageAndStatus(isOn)
{
if (isOn)
document.getElementById("waitImageAndStatus").style.display =3D 'inline';
else
document.getElementById("waitImageAndStatus").style.display =3D 'none';
}
function setLabelOperationStatusMessage(htmlMessage)
{
document.getElementById("labelOperationStatus").innerHTML =3D htmlMessage;
}
function handleException(exception, htmlMessage)
{
alert(exception);
handleActionError(htmlMessage);
}
function handleError(htmlMessage)
{
handleActionError(htmlMessage);
}
function handleActionError(htmlMessage)
{
operationInProgress =3D false;
toggleWaitImageAndStatus(false);
setLabelOperationStatusMessage('');
document.getElementById("errorSpan").innerHTML =3D htmlMessage;
}

------=_Part_8ACADCFC_A9883FD4.14B322D279E--
