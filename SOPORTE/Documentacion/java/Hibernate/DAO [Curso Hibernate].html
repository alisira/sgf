<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" dir="ltr" lang="es"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>
    DAO    [Curso Hibernate]
  </title>

  <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="date" content="2013-12-03T12:02:43+0100">
<meta name="keywords" content="unidades,07_arquitectura,03_dao">
<link rel="search" type="application/opensearchdescription+xml" href="http://cursohibernate.es/lib/exe/opensearch.php" title="Curso Hibernate">
<link rel="start" href="http://cursohibernate.es/">
<link rel="contents" href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;do=index" title="Índice">
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="http://cursohibernate.es/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://cursohibernate.es/feed.php?mode=list&amp;ns=unidades:07_arquitectura">
<link rel="alternate" type="text/html" title="Plain HTML" href="http://cursohibernate.es/doku.php?do=export_xhtml&amp;id=unidades:07_arquitectura:03_dao">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://cursohibernate.es/doku.php?do=export_raw&amp;id=unidades:07_arquitectura:03_dao">
<link rel="canonical" href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao">
<link rel="stylesheet" media="screen" type="text/css" href="DAO%20%5BCurso%20Hibernate%5D_files/css_002.css">
<link rel="stylesheet" media="all" type="text/css" href="DAO%20%5BCurso%20Hibernate%5D_files/css.css">
<link rel="stylesheet" media="print" type="text/css" href="DAO%20%5BCurso%20Hibernate%5D_files/css_003.css">
<script type="text/javascript"><!--//--><![CDATA[//><!--
var NS='unidades:07_arquitectura';var JSINFO = {"id":"unidades:07_arquitectura:03_dao","namespace":"unidades:07_arquitectura"};
//--><!]]></script>
<script type="text/javascript" charset="utf-8" src="DAO%20%5BCurso%20Hibernate%5D_files/js.php"></script>
<script type="text/javascript"><!--//--><![CDATA[//><!--

var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
//--><!]]></script><script src="DAO%20%5BCurso%20Hibernate%5D_files/ga.js" type="text/javascript"></script>
<script type="text/javascript"><!--//--><![CDATA[//><!--

var pageTracker = _gat._getTracker("UA-34712348-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
//--><!]]></script>

  <link rel="shortcut icon" href="http://cursohibernate.es/lib/tpl/dokubook/images/favicon.ico">

  
  <!-- change link borders dynamically -->
  <style type="text/css">
            div.dokuwiki ul#top__nav a.edit,
        div.dokuwiki ul#top__nav a.show,
        div.dokuwiki ul#top__nav a.source,
        div.dokuwiki ul#top__nav a.restore
        {
      border-color: #fabd23;
      border-bottom: 1px solid #fff;
      font-weight: bold;
    }
  </style>
</head>

<body class="show">
<div class="dokuwiki">
  
  <div id="sidebar_left" class="sidebar">
    <a href="http://cursohibernate.es/" name="dokuwiki__top" id="dokuwiki__top" accesskey="h" title="[ALT+H]">  <img class="logo" src="DAO%20%5BCurso%20Hibernate%5D_files/dokuwiki-128.png" alt="Curso Hibernate">
</a>
 
    <span class="sb_label">navigation</span>
<div id="navigation" class="sidebar_box">
<div id="sb__index__tree">

<ul class="idx">
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=ejercicios" class="idx_dir"><strong>ejercicios</strong></a></div></li>
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=patrones" class="idx_dir"><strong>patrones</strong></a></div></li>
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=privado" class="idx_dir"><strong>privado</strong></a></div></li>
<li class="open"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades" class="idx_dir"><strong>unidades</strong></a></div>
<ul class="idx">
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades%3A01_introduccion_orm" class="idx_dir"><strong>01_introduccion_orm</strong></a></div></li>
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades%3A02_hibernate" class="idx_dir"><strong>02_hibernate</strong></a></div></li>
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades%3A03_relaciones" class="idx_dir"><strong>03_relaciones</strong></a></div></li>
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades%3A04_claves_primarias_y_tipos_datos" class="idx_dir"><strong>04_claves_primarias_y_tipos_datos</strong></a></div></li>
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades%3A05_hibernate_query_language" class="idx_dir"><strong>05_hibernate_query_language</strong></a></div></li>
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades%3A06_objetos_validaciones" class="idx_dir"><strong>06_objetos_validaciones</strong></a></div></li>
<li class="open"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades%3A07_arquitectura" class="idx_dir"><strong>07_arquitectura</strong></a></div>
<ul class="idx">
<li class="level3"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:00_start" class="wikilink1" title="unidades:07_arquitectura:00_start">Inicio</a></div></li>
<li class="level3"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:01_hibernateutil" class="wikilink1" title="unidades:07_arquitectura:01_hibernateutil">HibernateUtil</a></div></li>
<li class="level3"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:02_excepciones" class="wikilink1" title="unidades:07_arquitectura:02_excepciones">Excepciones</a></div></li>
<li class="level3"><div class="li"><span class="curid"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao" class="wikilink1" title="unidades:07_arquitectura:03_dao">DAO</a></span></div></li>
<li class="level3"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:04_paquetes" class="wikilink1" title="unidades:07_arquitectura:04_paquetes">Paquetes</a></div></li>
</ul>
</li>
<li class="closed"><div class="li"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;idx=unidades%3A08_spring" class="idx_dir"><strong>08_spring</strong></a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="http://cursohibernate.es/doku.php?id=referencias" class="wikilink1" title="referencias">Referencias</a></div></li>
<li class="level1"><div class="li"><a href="http://cursohibernate.es/doku.php?id=start" class="wikilink1" title="start">Curso de Hibernate con Spring</a></div></li>
</ul>
</div>
</div>
<span class="sb_label">buscar</span>
<div id="search">
<form action="/doku.php" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input name="do" value="search" type="hidden"><input id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" type="text"><input value="Buscar" class="button" title="Buscar" type="submit"><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form></div>
<span class="sb_label">toolbox</span>
<div id="toolbox" class="sidebar_box">
<a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;do=index" class="action index" accesskey="x" rel="nofollow" title="Índice [X]">Índice</a><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;do=media" class="action media" rel="nofollow" title="Gestor de ficheros">Gestor de ficheros</a><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;do=recent" class="action recent" accesskey="r" rel="nofollow" title="Cambios recientes [R]">Cambios recientes</a><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;do=backlink" class="action backlink" rel="nofollow" title="Enlaces anteriores">Enlaces anteriores</a><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;do=login&amp;sectok=ef779e70a3e2cce513a6be158b407c10" class="action login" rel="nofollow" title="Conectarse">Conectarse</a><br><form class="button" method="get" action="/doku.php?id=unidades:07_arquitectura:03_dao">  <div class="no">    <input value="Exportar a ODT" class="button" type="submit">    <input name="do" value="export_odt" type="hidden">    <input name="id" value="unidades:07_arquitectura:03_dao" type="hidden">  </div></form>
</div>
  </div>

  <div id="dokubook_container_left">

    <div class="stylehead">

      <div class="header">
                        <div class="logo">
          <a href="http://cursohibernate.es/doku.php" name="dokuwiki__top" accesskey="h" title="[ALT+H]">Curso Hibernate</a>        </div>
      </div>

      <ul id="top__nav">
        <li><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;do=edit&amp;rev=" class="action source" accesskey="v" rel="nofollow" title="Ver fuente [V]">Ver fuente</a></li>
<li><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao&amp;do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Revisiones antiguas [O]">Revisiones antiguas</a></li>
      </ul>

    </div>

    
    <div class="page">

            <div class="breadcrumbs">
        <span class="bchead">Traza:</span> <span class="bcsep">•</span> <span class="curid"><a href="http://cursohibernate.es/doku.php?id=unidades:07_arquitectura:03_dao" class="breadcrumbs" title="unidades:07_arquitectura:03_dao">DAO</a></span>      </div>
      
      
      <!-- wikipage start -->
      <!-- TOC START -->
<div class="toc">
<div style="cursor: pointer;" class="tocheader toctoggle" id="toc__header"><span class="toc_close" id="toc__toggle"><span>−</span></span>Tabla de Contenidos</div>
<div id="toc__inside">

<ul class="toc">
<li class="level1"><div class="li"><span class="li"><a href="#dao" class="toc">DAO</a></span></div>
<ul class="toc">
<li class="level2"><div class="li"><span class="li"><a href="#los_interfaces" class="toc">Los interfaces</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#la_implementacion" class="toc">La implementación</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#creando_un_nuevo_objeto_dao" class="toc">Creando un nuevo objeto DAO</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#creando_objetos_dao" class="toc">Creando objetos DAO</a></span></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1"><a name="dao" id="dao">DAO</a></h1>
<div class="level1">

<p>
Pasemos ahora a ver cómo implementar el patrón <a href="http://cursohibernate.es/doku.php?id=patrones:dao" class="wikilink1" title="patrones:dao">DAO</a> usando Hibernate y de forma que sea fácilmente reutilizable. 
</p>

<p>
El mayor problema del patrón <a href="http://cursohibernate.es/doku.php?id=patrones:dao" class="wikilink1" title="patrones:dao">DAO</a>
 es la repetición de código para cada una de las entidades. Para evitar 
dicha repetición y obtener una gran flexibilidad en la implementación 
del objeto DAO se va a usar un modelo de clases e interfaces un poco 
complejo, pero una vez entendido cómo funciona será muy sencillo crear 
nuevos objetos DAO o cambiar su implementación.
</p>

</div>

<h2 class="sectionedit2"><a name="los_interfaces" id="los_interfaces">Los interfaces</a></h2>
<div class="level2">

<p>
El siguiente diagrama UML explica los interfaces <code>ProfesorDAO</code> y <code>UsuarioDAO</code>.
</p>

<p>
<a title="PlantUML Graph" class="media" href="http://cursohibernate.es/lib/plugins/plantuml/img.php?width=0&amp;height=0&amp;title=PlantUML%20Graph&amp;align=&amp;version=2011-07-16&amp;md5=f628eff9866c6fc14c60e05f7aba5b4d"><img src="DAO%20%5BCurso%20Hibernate%5D_files/img_002.png" class="media" title="PlantUML Graph" alt="PlantUML Graph"></a>
</p>

<p>
Como podemos ver, los objetos DAO de Profesor y Usuario son realmente los interfaces <code>ProfesorDAO</code> y <code>UsuarioDAO</code>
  ya que de esa forma podremos fácilmente tener varias implementaciones 
para cada interfaz DAO. Para evitar definir los mismos métodos en cada 
interfaz DAO se ha creado un interfaz <em>padre</em> llamado <code>GenericDAO</code> del que heredan <code>ProfesorDAO</code> y <code>UsuarioDAO</code>.
</p>

<p>
El código Java relativo a los 3 interfaces es el siguiente:
</p>
<div class="code"><pre class="java code java codeShown"><span class="lno">1:</span> <span class="kw1">public</span> <span class="kw1">interface</span> GenericDAO<span class="sy0">&lt;</span>T,ID <span class="kw1">extends</span> Serializable<span class="sy0">&gt;</span> <span class="br0">{</span>
<span class="lno">2:</span>     T create<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throws</span> BussinessException<span class="sy0">;</span>
<span class="lno">3:</span>     <span class="kw4">void</span> saveOrUpdate<span class="br0">(</span>T entity<span class="br0">)</span> <span class="kw1">throws</span> BussinessException<span class="sy0">;</span>
<span class="lno">4:</span>     T get<span class="br0">(</span>ID id<span class="br0">)</span> <span class="kw1">throws</span> BussinessException<span class="sy0">;</span>
<span class="lno">5:</span>     <span class="kw4">void</span> delete<span class="br0">(</span>ID id<span class="br0">)</span> <span class="kw1">throws</span> BussinessException<span class="sy0">;</span>
<span class="lno">6:</span>     List<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> findAll<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throws</span> BussinessException<span class="sy0">;</span>
<span class="lno">7:</span> <span class="br0">}</span>
</pre><p class="codefoot codeShown"><a name="genericdaojava">GenericDAO.java</a></p></div><div class="code"><pre class="java code java codeShown"><span class="lno">1:</span> <span class="kw1">public</span> <span class="kw1">interface</span> ProfesorDAO <span class="kw1">extends</span> GenericDAO<span class="sy0">&lt;</span>Profesor,Integer<span class="sy0">&gt;</span> <span class="br0">{</span>
<span class="lno">2:</span>
<span class="lno">3:</span> <span class="br0">}</span>
</pre><p class="codefoot codeShown"><a name="profesordaojava">ProfesorDAO.java</a></p></div><div class="code"><pre class="java code java codeShown"><span class="lno">1:</span> <span class="kw1">public</span> <span class="kw1">interface</span> UsuarioDAO <span class="kw1">extends</span> GenericDAO<span class="sy0">&lt;</span>Usuario,Integer<span class="sy0">&gt;</span>  <span class="br0">{</span>
<span class="lno">2:</span>
<span class="lno">3:</span> <span class="br0">}</span>
</pre><p class="codefoot codeShown"><a name="usuariodaojava">UsuarioDAO.java</a></p></div>
<p>
Pasemos ahora a explicar cada uno de los métodos de <code>GenericDAO</code>:
</p>
<ul>
<li class="level1"><div class="li"> <code>T create()</code>: Crea un nuevo objeto de la entidad.</div>
</li>
<li class="level1"><div class="li"> <code>void saveOrUpdate(T entity)</code> : Inserta o actualiza un objeto de una entidad en la base de datos.</div>
</li>
<li class="level1"><div class="li"> <code>T get(ID id)</code> : Obtiene un objeto de una entidad desde la base de datos en función de la clave primaria.</div>
</li>
<li class="level1"><div class="li"> <code>void delete(ID id)</code> : Borra un objeto de una entidad de la base de datos en función de la clave primaria.</div>
</li>
<li class="level1"><div class="li"> <code>List&lt;T&gt; findAll()</code> : Obtiene una lista con todos los objetos de una entidad de la base de datos.</div>
</li>
</ul>

<p>
</p><p></p><div class="noteimportant">
Los métodos que tiene el interfaz <code>GenericDAO</code> son un posible
 ejemplo de métodos para un objeto DAO. El programador puede diseñar el 
objeto DAO de la forma que más le interese,como por ejemplo:
<p></p>
<ul>
<li class="level1"><div class="li"> Separando el método <code>void saveOrUpdate(T entity)</code> en dos distintos, uno para la inserción y otro para la actualización.</div>
</li>
<li class="level1"><div class="li"> Haciendo que el método <code>T get(ID id)</code> permita bloquear el objeto para que nadie lo pueda modificar.</div>
</li>
<li class="level1"><div class="li"> Etc.</div>
</li>
</ul>

<p>
Un <code>GenericDAO</code> con muchos mas métodos lo podemos encontrar en <a href="http://www.genbetadev.com/java-j2ee/spring-framework-el-patrn-dao" class="urlextern" title="http://www.genbetadev.com/java-j2ee/spring-framework-el-patrn-dao" rel="nofollow">Spring Framework: El patrón DAO</a>

</p></div><p></p>
<p></p>

<p>
</p><p></p><div class="noteimportant">
En los interfaces <code>ProfesorDAO</code> y <code>UsuarioDAO</code> será normal añadir, entre otros, más métodos <code>find</code> para personalizar los métodos de búsqueda de entidades.
<p></p>

<p>
Por ejemplo en <code>UsuarioDAO</code> sería útil añadir el método <code>Usuario findByLogin(String login)</code> que nos permitiría obtener un usuario en función de su login en vez de en función de su <code>idUsuario</code> tal y como hace <code>T get(ID id)</code>.
</p>

<p>
Tambien en <code>ProfesorDAO</code> sería útil añadir el método <code>List&lt;Profesor&gt; findByNombreAndApe1AndApe2(String nombre,String ape1,String ape2)</code>
 que nos permitiría obtener los usuarios que tengan el nombre y el 1º 
apellido y el 2º apellido en vez de obtener todos los profesores como 
hace <code>List&lt;T&gt; findAll()</code>

</p></div><p></p>
<p></p>

</div>

<h2 class="sectionedit3"><a name="la_implementacion" id="la_implementacion">La implementación</a></h2>
<div class="level2">

<p>
Como ya hemos comentado la ventaja de usar el patrón <a href="http://cursohibernate.es/doku.php?id=patrones:dao" class="wikilink1" title="patrones:dao">DAO</a>
 es poder tener varias implementaciones del mismo interfaz DAO de forma 
que podamos cambiar la funcionalidad de una forma sencilla pero también 
es necesario que <strong>no</strong> se repita el código entre las distintas implementaciones.
</p>

<p>
Para reutilizar el código se ha creado la clase <code>GenericDAOImplHibernate</code>
 que implementa de forma genérica el acceso a la base de datos mediante 
Hibernate. De esta clase heredarán las implementaciones de cada interfaz
 DAO. 
</p>

<p>
Veamos un diagrama UML con las relaciones:
</p>

<p>
<a title="PlantUML Graph" class="media" href="http://cursohibernate.es/lib/plugins/plantuml/img.php?width=0&amp;height=0&amp;title=PlantUML%20Graph&amp;align=&amp;version=2011-07-16&amp;md5=3099db067e7cd0de7c59c68520304718"><img src="DAO%20%5BCurso%20Hibernate%5D_files/img.png" class="media" title="PlantUML Graph" alt="PlantUML Graph"></a>
</p>

<p>
Ahora tenemos las 2 clases <code>ProfesorDAOImplHibernate</code> y <code>UsuarioDAOImplHibernate</code> que reutilizan todo el código de <code>GenericDAOImplHibernate</code> ya que heredan de <code>GenericDAOImplHibernate</code> y de esa forma evitaremos duplicar el código de Hibernate en cada entidad.
</p>

<p>
En el siguiente diagrama UML puede verse los interfaces que implementa cada clase.
</p>

<p>
<a title="PlantUML Graph" class="media" href="http://cursohibernate.es/lib/plugins/plantuml/img.php?width=0&amp;height=0&amp;title=PlantUML%20Graph&amp;align=&amp;version=2011-07-16&amp;md5=70aab9a3d6d10b92823b167bee272605"><img src="DAO%20%5BCurso%20Hibernate%5D_files/img_003.png" class="media" title="PlantUML Graph" alt="PlantUML Graph"></a>
</p>

<p>
El código Java correspondiente a las 3 clases es el siguiente:
</p>
<div class="code"><pre class="java code java codeShown"><span class="lno"> &nbsp;1:</span> <span class="kw1">public</span> <span class="kw1">class</span> GenericDAOImplHibernate<span class="sy0">&lt;</span>T, ID <span class="kw1">extends</span> Serializable<span class="sy0">&gt;</span> <span class="kw1">implements</span> GenericDAO<span class="sy0">&lt;</span>T, ID<span class="sy0">&gt;</span> <span class="br0">{</span>
<span class="lno"> &nbsp;2:</span>
<span class="lno"> &nbsp;3:</span>
<span class="lno"> &nbsp;4:</span>     SessionFactory sessionFactory<span class="sy0">;</span>
<span class="lno"> &nbsp;5:</span>
<span class="lno"> &nbsp;6:</span>     <span class="kw1">private</span> <span class="kw1">final</span> <span class="kw1">static</span> Logger LOGGER <span class="sy0">=</span> Logger.<span class="me1">getLogger</span><span class="br0">(</span>GenericDAOImplHibernate.<span class="kw1">class</span>.<span class="me1">getName</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> &nbsp;7:</span>
<span class="lno"> &nbsp;8:</span>     <span class="kw1">public</span> GenericDAOImplHibernate<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> &nbsp;9:</span>         sessionFactory<span class="sy0">=</span>HibernateUtil.<span class="me1">getSessionFactory</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 10:</span>     <span class="br0">}</span>
<span class="lno"> 11:</span>
<span class="lno"> 12:</span>
<span class="lno"> 13:</span>
<span class="lno"> 14:</span>     @Override
<span class="lno"> 15:</span>     <span class="kw1">public</span> T create<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throws</span> BussinessException <span class="br0">{</span>
<span class="lno"> 16:</span>         <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 17:</span>             <span class="kw1">return</span> getEntityClass<span class="br0">(</span><span class="br0">)</span>.<span class="me1">newInstance</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 18:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Ainstantiationexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">InstantiationException</span></a> <span class="sy0">|</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aillegalaccessexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">IllegalAccessException</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 19:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a><span class="br0">(</span>ex<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 20:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 21:</span>             <span class="kw1">throw</span> ex<span class="sy0">;</span>
<span class="lno"> 22:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 23:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a><span class="br0">(</span>ex<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 24:</span>         <span class="br0">}</span>
<span class="lno"> 25:</span>     <span class="br0">}</span>
<span class="lno"> 26:</span>
<span class="lno"> 27:</span>     @Override
<span class="lno"> 28:</span>     <span class="kw1">public</span> <span class="kw4">void</span> saveOrUpdate<span class="br0">(</span>T entity<span class="br0">)</span> <span class="kw1">throws</span> BussinessException <span class="br0">{</span>
<span class="lno"> 29:</span>         Session session <span class="sy0">=</span> sessionFactory.<span class="me1">getCurrentSession</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 30:</span>         <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 31:</span>             session.<span class="me1">beginTransaction</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 32:</span>             session.<span class="me1">saveOrUpdate</span><span class="br0">(</span>entity<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 33:</span>             session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">commit</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 34:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>javax.<span class="me1">validation</span>.<span class="me1">ConstraintViolationException</span> cve<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 35:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 36:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 37:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 38:</span>                 <span class="br0">}</span>
<span class="lno"> 39:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 40:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 41:</span>             <span class="br0">}</span>
<span class="lno"> 42:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span>cve<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 43:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>org.<span class="me1">hibernate</span>.<span class="me1">exception</span>.<span class="me1">ConstraintViolationException</span> cve<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 44:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 45:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 46:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 47:</span>                 <span class="br0">}</span>
<span class="lno"> 48:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 49:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 50:</span>             <span class="br0">}</span>
<span class="lno"> 51:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span>cve<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 52:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 53:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 54:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 55:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 56:</span>                 <span class="br0">}</span>
<span class="lno"> 57:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 58:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 59:</span>             <span class="br0">}</span>
<span class="lno"> 60:</span>             <span class="kw1">throw</span> ex<span class="sy0">;</span>
<span class="lno"> 61:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 62:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 63:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 64:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 65:</span>                 <span class="br0">}</span>
<span class="lno"> 66:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 67:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 68:</span>             <span class="br0">}</span>
<span class="lno"> 69:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a><span class="br0">(</span>ex<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 70:</span>         <span class="br0">}</span>
<span class="lno"> 71:</span>     <span class="br0">}</span>
<span class="lno"> 72:</span>
<span class="lno"> 73:</span>     @Override
<span class="lno"> 74:</span>     <span class="kw1">public</span> T get<span class="br0">(</span>ID id<span class="br0">)</span> <span class="kw1">throws</span> BussinessException <span class="br0">{</span>
<span class="lno"> 75:</span>         Session session <span class="sy0">=</span> sessionFactory.<span class="me1">getCurrentSession</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 76:</span>         <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 77:</span>             session.<span class="me1">beginTransaction</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 78:</span>             T entity <span class="sy0">=</span> <span class="br0">(</span>T<span class="br0">)</span> session.<span class="me1">get</span><span class="br0">(</span>getEntityClass<span class="br0">(</span><span class="br0">)</span>, id<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 79:</span>             session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">commit</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 80:</span>
<span class="lno"> 81:</span>             <span class="kw1">return</span> entity<span class="sy0">;</span>
<span class="lno"> 82:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>javax.<span class="me1">validation</span>.<span class="me1">ConstraintViolationException</span> cve<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 83:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 84:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 85:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 86:</span>                 <span class="br0">}</span>
<span class="lno"> 87:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 88:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 89:</span>             <span class="br0">}</span>
<span class="lno"> 90:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span>cve<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 91:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>org.<span class="me1">hibernate</span>.<span class="me1">exception</span>.<span class="me1">ConstraintViolationException</span> cve<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 92:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno"> 93:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 94:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 95:</span>                 <span class="br0">}</span>
<span class="lno"> 96:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno"> 97:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno"> 98:</span>             <span class="br0">}</span>
<span class="lno"> 99:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span>cve<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">100:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">101:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">102:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">103:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">104:</span>                 <span class="br0">}</span>
<span class="lno">105:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">106:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">107:</span>             <span class="br0">}</span>
<span class="lno">108:</span>             <span class="kw1">throw</span> ex<span class="sy0">;</span>
<span class="lno">109:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">110:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">111:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">112:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">113:</span>                 <span class="br0">}</span>
<span class="lno">114:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">115:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">116:</span>             <span class="br0">}</span>
<span class="lno">117:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a><span class="br0">(</span>ex<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">118:</span>         <span class="br0">}</span>
<span class="lno">119:</span>     <span class="br0">}</span>
<span class="lno">120:</span>
<span class="lno">121:</span>     @Override
<span class="lno">122:</span>     <span class="kw1">public</span> <span class="kw4">void</span> delete<span class="br0">(</span>ID id<span class="br0">)</span> <span class="kw1">throws</span> BussinessException <span class="br0">{</span>
<span class="lno">123:</span>         Session session <span class="sy0">=</span> sessionFactory.<span class="me1">getCurrentSession</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">124:</span>         <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">125:</span>             session.<span class="me1">beginTransaction</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">126:</span>             T entity <span class="sy0">=</span> <span class="br0">(</span>T<span class="br0">)</span> session.<span class="me1">get</span><span class="br0">(</span>getEntityClass<span class="br0">(</span><span class="br0">)</span>, id<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">127:</span>             <span class="kw1">if</span> <span class="br0">(</span>entity <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">128:</span>                 <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span><span class="kw1">new</span> BussinessMessage<span class="br0">(</span><span class="kw2">null</span>, <span class="st0">"Los datos a borrar ya no existen"</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">129:</span>             <span class="br0">}</span>
<span class="lno">130:</span>             session.<span class="me1">delete</span><span class="br0">(</span>entity<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">131:</span>             session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">commit</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">132:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>javax.<span class="me1">validation</span>.<span class="me1">ConstraintViolationException</span> cve<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">133:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">134:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">135:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">136:</span>                 <span class="br0">}</span>
<span class="lno">137:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">138:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">139:</span>             <span class="br0">}</span>
<span class="lno">140:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span>cve<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">141:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>org.<span class="me1">hibernate</span>.<span class="me1">exception</span>.<span class="me1">ConstraintViolationException</span> cve<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">142:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">143:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">144:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">145:</span>                 <span class="br0">}</span>
<span class="lno">146:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">147:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">148:</span>             <span class="br0">}</span>
<span class="lno">149:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span>cve<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">150:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>BussinessException ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">151:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">152:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">153:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">154:</span>                 <span class="br0">}</span>
<span class="lno">155:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">156:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">157:</span>             <span class="br0">}</span>
<span class="lno">158:</span>             <span class="kw1">throw</span> ex<span class="sy0">;</span>
<span class="lno">159:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">160:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">161:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">162:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">163:</span>                 <span class="br0">}</span>
<span class="lno">164:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">165:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">166:</span>             <span class="br0">}</span>
<span class="lno">167:</span>             <span class="kw1">throw</span> ex<span class="sy0">;</span>
<span class="lno">168:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">169:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">170:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">171:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">172:</span>                 <span class="br0">}</span>
<span class="lno">173:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">174:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">175:</span>             <span class="br0">}</span>
<span class="lno">176:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a><span class="br0">(</span>ex<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">177:</span>         <span class="br0">}</span>
<span class="lno">178:</span>     <span class="br0">}</span>
<span class="lno">179:</span>
<span class="lno">180:</span>     @Override
<span class="lno">181:</span>     <span class="kw1">public</span> List<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> findAll<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throws</span> BussinessException <span class="br0">{</span>
<span class="lno">182:</span>         Session session <span class="sy0">=</span> sessionFactory.<span class="me1">getCurrentSession</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">183:</span>         <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">184:</span>
<span class="lno">185:</span>             Query query <span class="sy0">=</span> session.<span class="me1">createQuery</span><span class="br0">(</span><span class="st0">"SELECT e FROM "</span> <span class="sy0">+</span> getEntityClass<span class="br0">(</span><span class="br0">)</span>.<span class="me1">getName</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">+</span> <span class="st0">" e"</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">186:</span>             List<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> entities <span class="sy0">=</span> query.<span class="me1">list</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">187:</span>
<span class="lno">188:</span>             <span class="kw1">return</span> entities<span class="sy0">;</span>
<span class="lno">189:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>javax.<span class="me1">validation</span>.<span class="me1">ConstraintViolationException</span> cve<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">190:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">191:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">192:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">193:</span>                 <span class="br0">}</span>
<span class="lno">194:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">195:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">196:</span>             <span class="br0">}</span>
<span class="lno">197:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span>cve<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">198:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>org.<span class="me1">hibernate</span>.<span class="me1">exception</span>.<span class="me1">ConstraintViolationException</span> cve<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">199:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">200:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">201:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">202:</span>                 <span class="br0">}</span>
<span class="lno">203:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">204:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">205:</span>             <span class="br0">}</span>
<span class="lno">206:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> BussinessException<span class="br0">(</span>cve<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">207:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">208:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">209:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">210:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">211:</span>                 <span class="br0">}</span>
<span class="lno">212:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">213:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">214:</span>             <span class="br0">}</span>
<span class="lno">215:</span>             <span class="kw1">throw</span> ex<span class="sy0">;</span>
<span class="lno">216:</span>         <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> ex<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">217:</span>             <span class="kw1">try</span> <span class="br0">{</span>
<span class="lno">218:</span>                 <span class="kw1">if</span> <span class="br0">(</span>session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">isActive</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">219:</span>                     session.<span class="me1">getTransaction</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">rollback</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="lno">220:</span>                 <span class="br0">}</span>
<span class="lno">221:</span>             <span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Exception</span></a> exc<span class="br0">)</span> <span class="br0">{</span>
<span class="lno">222:</span>                 LOGGER.<span class="me1">log</span><span class="br0">(</span>Level.<span class="me1">WARNING</span>,<span class="st0">"Falló al hacer un rollback"</span>, exc<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">223:</span>             <span class="br0">}</span>
<span class="lno">224:</span>             <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aruntimeexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">RuntimeException</span></a><span class="br0">(</span>ex<span class="br0">)</span><span class="sy0">;</span>
<span class="lno">225:</span>         <span class="br0">}</span>
<span class="lno">226:</span>     <span class="br0">}</span>
<span class="lno">227:</span>
<span class="lno">228:</span>     <span class="kw1">private</span> Class<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> getEntityClass<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
<span class="lno">229:</span>         <span class="kw1">return</span> <span class="br0">(</span>Class<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span><span class="br0">)</span> <span class="br0">(</span><span class="br0">(</span>ParameterizedType<span class="br0">)</span> getClass<span class="br0">(</span><span class="br0">)</span>.<span class="me1">getGenericSuperclass</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">getActualTypeArguments</span><span class="br0">(</span><span class="br0">)</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span>
<span class="lno">230:</span>     <span class="br0">}</span>
<span class="lno">231:</span> <span class="br0">}</span>
</pre><p class="codefoot codeShown"><a name="genericdaoimplhibernatejava">GenericDAOImplHibernate.java</a></p></div><div class="code"><pre class="java code java codeShown"><span class="lno">1:</span> <span class="kw1">public</span> <span class="kw1">class</span> ProfesorDAOImplHibernate <span class="kw1">extends</span> GenericDAOImplHibernate<span class="sy0">&lt;</span>Profesor,Integer<span class="sy0">&gt;</span> <span class="kw1">implements</span>  ProfesorDAO <span class="br0">{</span>
<span class="lno">2:</span>
<span class="lno">3:</span> <span class="br0">}</span>
</pre><p class="codefoot codeShown"><a name="profesordaoimplhibernatejava">ProfesorDAOImplHibernate.java</a></p></div><div class="code"><pre class="java code java codeShown"><span class="lno">1:</span> <span class="kw1">public</span> <span class="kw1">class</span> UsuarioDAOImplHibernate <span class="kw1">extends</span> GenericDAOImplHibernate<span class="sy0">&lt;</span>Usuario,Integer<span class="sy0">&gt;</span> <span class="kw1">implements</span>  UsuarioDAO <span class="br0">{</span>
<span class="lno">2:</span>
<span class="lno">3:</span> <span class="br0">}</span>
</pre><p class="codefoot codeShown"><a name="usuariodaoimplhibernate_java">UsuarioDAOImplHibernate .java</a></p></div>
<p>
El código de <code>GenericDAOImplHibernate</code> ha quedado un poco largo ya que se ha incluido la gestión de excepciones que hemos visto en el tema anterior.
</p>

<p>
Destacar la línea 9 de <code>GenericDAOImplHibernate</code> en la que se ve cómo usamos la clase <code>HibernateUtil</code> para acceder al objeto <code>SessionFactory</code>.
 Ésto es importante ya que en la siguiente lección explicaremos cómo 
hacer que no sea necesaria esa línea y evitar la dependencia de <code>GenericDAOImplHibernate</code> con <code>HibernateUtil</code>.
</p>

<p>
También destacar la simplicidad de las implementaciones para los interfaces <code>ProfesorDAO</code> y <code>UsuarioDAO</code>. Sólo es necesario crear las clases <code>ProfesorDAOImplHibernate</code> y <code>UsuarioDAOImplHibernate</code> y que hereden de <code>GenericDAOImplHibernate</code> no habiendo ni una sola línea de código.
</p>

<p>
</p><p></p><div class="noteimportant">
La clase <code>GenericDAOImplHibernate</code> hace uso de los <a href="http://en.wikipedia.org/wiki/Generics_in_Java" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Generics_in_Java">Generics</a>
 de Java. Está mas allá del alcance de este curso explicar cómo 
funcionan los Generics de Java, pero en Internet existen gran cantidad 
de tutoriales explicando su funcionamiento.

</div><p></p>
<p></p>

<p>
Ahora en un único diagrama UML se ven todas las relaciones entre los interfaces y las clases. 
</p>

<p>
<a title="PlantUML Graph" class="media" href="http://cursohibernate.es/lib/plugins/plantuml/img.php?width=0&amp;height=0&amp;title=PlantUML%20Graph&amp;align=&amp;version=2011-07-16&amp;md5=f06a1d9c2cf151575fbc5084139e3d0c"><img src="DAO%20%5BCurso%20Hibernate%5D_files/img_004.png" class="media" title="PlantUML Graph" alt="PlantUML Graph"></a>
</p>

<p>
Este diagrama UML contiene todos los intefaces y clases que se necesitan para implementar el patrón <a href="http://cursohibernate.es/doku.php?id=patrones:dao" class="wikilink1" title="patrones:dao">DAO</a> en hibernate de una forma correcta.
</p>

</div>

<h2 class="sectionedit4"><a name="creando_un_nuevo_objeto_dao" id="creando_un_nuevo_objeto_dao">Creando un nuevo objeto DAO</a></h2>
<div class="level2">

<p>
Para finalizar explicar los pasos necesarios para crear un objeto DAO de
 una nueva entidad. Para ello, lo haremos con el ejemplo de la entidad <code>Municipio</code>.
</p>
<ul>
<li class="level1"><div class="li"> Crear un nuevo interfaz llamado <code>MunicipioDAO</code> que herede de <code>GenericDAO</code>. El código Java es el siguiente:</div>
</li>
</ul>
<pre class="java code java"><span class="kw1">public</span> <span class="kw1">interface</span> MunicipioDAO <span class="kw1">extends</span> GenericDAO<span class="sy0">&lt;</span>Municipio,Integer<span class="sy0">&gt;</span> <span class="br0">{</span>
&nbsp;
<span class="br0">}</span></pre><ul>
<li class="level1"><div class="li"> Crear una nueva implementación llamada <code>MunicipioDAOImplHibernate </code> para Hibernate que herede de <code>GenericDAOImplHibernate</code> e implemente <code>MunicipioDAO</code></div>
</li>
</ul>
<pre class="java code java"><span class="kw1">public</span> <span class="kw1">class</span> MunicipioDAOImplHibernate <span class="kw1">extends</span> GenericDAOImplHibernate<span class="sy0">&lt;</span>Municipio,Integer<span class="sy0">&gt;</span> <span class="kw1">implements</span>  MunicipioDAO <span class="br0">{</span>
&nbsp;
<span class="br0">}</span></pre>
<p>
Como vemos es sencillísimo crear un nuevo objeto DAO para una nueva entidad y sin nada de código repetido.
</p>

</div>

<h2 class="sectionedit5"><a name="creando_objetos_dao" id="creando_objetos_dao">Creando objetos DAO</a></h2>
<div class="level2">

<p>
Ya sabemos cómo programar nuestros objetos DAO, pero ahora hay que 
añadirle el problema de crearlos desde nuestra aplicación. Aparentemente
 es tan sencillo como el siguiente código:
</p>
<pre class="java code java">UsuarioDAO usuarioDAO <span class="sy0">=</span> <span class="kw1">new</span> UsuarioDAOImplHibernate<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
ProfesorDAO profesorDAO <span class="sy0">=</span> <span class="kw1">new</span> ProfesorDAOImplHibernate<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></pre>
<p>
Con esas dos simples líneas hemos creado 2 objetos DAO para las 
entidades Profesor y Usuario. Estas líneas se repetirán a lo largo del 
código cada vez que quedamos acceder a las entidades Profesor y Usuario.
</p>

<p>
¿Cuál es el problema?
</p>

<p>
Que si queremos cambiar la implementación de <code>UsuarioDAO</code> o de <code>ProfesorDAO</code>
 deberemos cambiar el código en todos los sitios en los que se use. 
Supongamos que ahora queremos usar implementaciones basadas en JDBC, se 
debería cambiar el código a:
</p>
<pre class="java code java">UsuarioDAO usuarioDAO <span class="sy0">=</span> <span class="kw1">new</span> UsuarioDAOImplJDBC<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
ProfesorDAO profesorDAO <span class="sy0">=</span> <span class="kw1">new</span> ProfesorDAOImplJDBC<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></pre>
<p>
Podríamos pensar que hacer un simple <em>buscar/reemplazar</em> en 
nuestro IDE sería suficiente, pero podríamos tener código ya compilado 
en JARs con lo que no se cambiaría a no ser que buscáramos el fuente de 
los JARs y además habría que volver a recompilarlos.Una aplicación 
pueden ser miles y miles de líneas de código y decenas de JARs, así que 
el trabajo puede ser un poco largo y tedioso.
</p>

<p>
Hay varias soluciones a ésto pero hablaremos de la solución elegida en el siguiente tema sobre Spring. 
</p>

</div>

      <!-- wikipage stop -->

      <div class="meta">
        <div class="doc">
          unidades/07_arquitectura/03_dao.txt · Última modificación: 2013/12/03 12:02 por admin        </div>
      </div>

      <a href="#dokuwiki__top" class="action top" accesskey="x" rel="nofollow" title="Ir hasta arriba [X]">Ir hasta arriba</a>
      <div class="clearer"></div>

    </div>

    
    <div class="clearer"></div>

    
    <div class="stylefoot">
          </div>

    <div class="footerinc" align="center">
  <div class="license"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="DAO%20%5BCurso%20Hibernate%5D_files/cc-by-nc-sa.png" class="medialeft licbutton" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported"></a> </div>
  <a target="_blank" href="http://www.chimeric.de/" title="chimeric.de=chi`s home"><img src="DAO%20%5BCurso%20Hibernate%5D_files/button-chimeric-de.png" alt="chimeric.de = chi`s home" border="0" height="15" width="80"></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="DAO%20%5BCurso%20Hibernate%5D_files/button-css.png" alt="Valid CSS" border="0" height="15" width="80"></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="DAO%20%5BCurso%20Hibernate%5D_files/button-dw.png" alt="Driven by DokuWiki" border="0" height="15" width="80"></a>

  <a target="_blank" href="http://www.firefox-browser.de/" title="do yourself a favour and use a real browser - get firefox"><img src="DAO%20%5BCurso%20Hibernate%5D_files/button-firefox.png" alt="do yourself a favour and use a real browser - get firefox!!" border="0" height="15" width="80"></a>
  
  <a target="_blank" href="http://cursohibernate.es/feed.php" title="Recent changes RSS feed"><img src="DAO%20%5BCurso%20Hibernate%5D_files/button-rss.png" alt="Recent changes RSS feed" border="0" height="15" width="80"></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="DAO%20%5BCurso%20Hibernate%5D_files/button-xhtml.png" alt="Valid XHTML 1.0" border="0" height="15" width="80"></a>
</div>

  </div>

</div>
<div class="no"><img src="DAO%20%5BCurso%20Hibernate%5D_files/indexer.gif" alt="" height="1" width="2"></div>


<div aria-labelledby="ui-dialog-title-media__popup_content" role="dialog" tabindex="-1" class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable" style="display: none; z-index: 1000; outline: 0px none;"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span id="ui-dialog-title-media__popup_content" class="ui-dialog-title">Configuración del vínculo</span><a role="button" class="ui-dialog-titlebar-close ui-corner-all" href="#"><span class="ui-icon ui-icon-closethick">close</span></a></div><div class="ui-dialog-content ui-widget-content" id="media__popup_content"><p id="media__link"><label>Destino del vínculo</label><button title="Vínculo a la pagina de descripción" id="media__linkbtn1" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_link_lnk.png"></button><button title="Vínculo al original" id="media__linkbtn2" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_link_direct.png"></button><button title="Sin vínculo" id="media__linkbtn3" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_link_nolnk.png"></button><button title="Mostrar solo el vínculo." id="media__linkbtn4" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_link_displaylnk.png"></button></p><p id="media__align"><label>Alineación</label><button title="No use alineación." id="media__alignbtn1" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_align_noalign.png"></button><button title="Alinear imagen a la izquierda" id="media__alignbtn2" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_align_left.png"></button><button title="Alinear imagen en el centro." id="media__alignbtn3" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_align_center.png"></button><button title="Alinear imagen a la derecha." id="media__alignbtn4" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_align_right.png"></button></p><p id="media__size"><label>Tamaño de la imagen</label><button title="Versión en tamaño pequeño" id="media__sizebtn1" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_size_small.png"></button><button title="Versión en tamaño medio" id="media__sizebtn2" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_size_medium.png"></button><button title="Versión en tamaño grande" id="media__sizebtn3" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_size_large.png"></button><button title="Versión original" id="media__sizebtn4" class="button"><img src="DAO%20%5BCurso%20Hibernate%5D_files/media_size_original.png"></button></p><p><input value="Insertar" class="button" id="media__sendbtn" type="button"></p></div></div></body></html>