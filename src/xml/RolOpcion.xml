<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="compromisoinicial" >
  <resultMap id="RolOpcion" class="sigefirrhh.persistencia.modelo.RolOpcion" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Apr 20 14:09:16 VET 2015.
    -->
    <result column="id_rol_opcion" property="idRolOpcion" jdbcType="INTEGER" />
    <result column="id_rol" property="idRol" jdbcType="INTEGER" />
    <result column="id_opcion" property="idOpcion" jdbcType="INTEGER" />
    <result column="consultar" property="consultar" jdbcType="VARCHAR" />
    <result column="agregar" property="agregar" jdbcType="VARCHAR" />
    <result column="modificar" property="modificar" jdbcType="VARCHAR" />
    <result column="eliminar" property="eliminar" jdbcType="VARCHAR" />
    <result column="ejecutar" property="ejecutar" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="buscarRolOpcion" resultMap="RolOpcion" parameterClass="sigefirrhh.persistencia.modelo.CriterioBusqueda" >
    <!--realizado el 20-04-15 14:20:44 .-->
	    SELECT  id_rol_opcion, rolopcion.id_rol, rolopcion.id_opcion, consultar, agregar, modificar, eliminar, ejecutar
			FROM 
			  rol, 
			  opcion, 
			  rolopcion
			WHERE 
			  opcion.id_opcion = rolopcion.id_opcion AND
			  rolopcion.id_rol = rol.id_rol  
    
	   <isParameterPresent >
	  
			<isNotNull prepend="AND" property="idRol" >
				<iterate property="idRol" open="rol.id_rol in (" close=")"	conjunction="," >
					#idRol[]#
				</iterate>
			</isNotNull>
			
			<isNotNull prepend="AND" property="uri" >
				<iterate property="uri" open="uri in (" close=")"	conjunction="," >
					#uri[]#
				</iterate>
			</isNotNull>
		
		</isParameterPresent>
   		ORDER BY ruta
  </select> 

  	
  	 
</sqlMap>